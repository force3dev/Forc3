(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{89715:function(e,t,s){Promise.resolve().then(s.bind(s,83309))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},83309:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(57437),n=s(2265),r=s(16463),i=s(87138);function l(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null);async function d(){try{let e=await fetch("/api/user/profile");if(e.ok){let s=await e.json();t(s)}}catch(e){t({stravaConnected:!1})}}async function x(){r(!0),o(null);try{(await fetch("/api/strava/sync",{method:"POST"})).ok?(o("Synced successfully!"),await d()):o("Sync failed. Try again.")}catch(e){o("Sync failed. Try again.")}finally{r(!1)}}async function u(){l(!0);try{(await fetch("/api/strava/auth",{method:"DELETE"})).ok&&await d()}finally{l(!1)}}return(0,n.useEffect)(()=>{d()},[]),(0,a.jsxs)("div",{className:"rounded-xl border p-6 flex flex-col gap-4",style:{backgroundColor:"#141414",borderColor:"#262626"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg font-black tracking-widest",style:{color:"#FC4C02"},children:"STRAVA"}),(0,a.jsx)("span",{className:"text-white font-semibold text-base",children:"Integration"})]}),null===e?(0,a.jsx)("div",{className:"h-6 w-32 animate-pulse rounded",style:{backgroundColor:"#262626"}}):e.stravaConnected?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-semibold bg-green-900/40 text-green-400 border border-green-800",children:[(0,a.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-green-400 inline-block"}),"Strava Connected ✓"]})}),e.stravaLastSync&&(0,a.jsxs)("p",{className:"text-xs",style:{color:"#a0a0a0"},children:["Last synced: ",new Date(e.stravaLastSync).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),c&&(0,a.jsx)("p",{className:"text-xs",style:{color:c.includes("fail")?"#f87171":"#4ade80"},children:c}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:x,disabled:s,className:"inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold text-white transition-opacity hover:opacity-80 disabled:opacity-50",style:{backgroundColor:"#0066FF"},children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})}),"Syncing…"]}):"Sync Now"}),(0,a.jsx)("button",{onClick:u,disabled:i,className:"inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold transition-colors hover:bg-red-900/30 disabled:opacity-50",style:{color:"#f87171",border:"1px solid #262626"},children:i?"Disconnecting…":"Disconnect"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm",style:{color:"#a0a0a0"},children:"Sync your runs and rides automatically."}),(0,a.jsx)("a",{href:"/api/strava/auth",className:"inline-flex items-center justify-center gap-2 rounded-lg px-5 py-2.5 text-sm font-bold text-white transition-opacity hover:opacity-90 w-fit",style:{backgroundColor:"#FC4C02"},children:"Connect Strava"})]})]})}function c(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{localStorage.getItem("push_permission_asked")||t(!0)},[]),!e)return null;async function c(){l(!0);try{let e=await Notification.requestPermission();if("granted"===e){let e=await navigator.serviceWorker.ready,t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"your_vapid_public_key_here"}),s=btoa(String.fromCharCode(...new Uint8Array(t.getKey("p256dh")))),a=btoa(String.fromCharCode(...new Uint8Array(t.getKey("auth"))));await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:t.endpoint,p256dh:s,auth:a})})}else r(!0)}catch(e){r(!0)}finally{localStorage.setItem("push_permission_asked","true"),l(!1),s||t(!1)}}return(0,a.jsxs)("div",{className:"animate-fade-in rounded-2xl border border-[#262626] bg-[#141414] p-6 shadow-lg",style:{animation:"fadeIn 0.4s ease both"},children:[(0,a.jsx)("style",{children:"@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }"}),(0,a.jsx)("h2",{className:"mb-1 text-lg font-semibold text-white",children:"Never miss a workout \uD83D\uDCAA"}),(0,a.jsx)("p",{className:"mb-5 text-sm text-gray-400",children:"Get your daily coaching brief every morning"}),s?(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"You can enable notifications in browser settings anytime."}):(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:c,disabled:i,className:"flex items-center gap-2 rounded-xl bg-[#0066FF] px-5 py-2.5 text-sm font-medium text-white transition hover:bg-blue-500 disabled:opacity-60",children:[i&&(0,a.jsx)("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Enable Notifications"]}),(0,a.jsx)("button",{onClick:function(){localStorage.setItem("push_permission_asked","true"),t(!1)},className:"text-sm text-gray-500 hover:text-gray-300",children:"Not now"})]})]})}function o(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{fetch("/api/referral").then(e=>e.json()).then(t).catch(()=>{})},[]);let i=e?"https://forc3.app/join?ref=".concat(e.code):"";function l(){i&&(navigator.clipboard.writeText(i),r(!0),setTimeout(()=>r(!1),2e3))}return(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF81"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold",children:"Refer Friends, Train Free"}),(0,a.jsx)("p",{className:"text-neutral-500 text-xs",children:"Get 1 month free for every friend who subscribes"})]})]}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Your referral link"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"flex-1 bg-[#0a0a0a] border border-[#333] rounded-xl px-3 py-2 text-sm text-neutral-300 truncate",children:i}),(0,a.jsx)("button",{onClick:l,className:"px-4 py-2 rounded-xl text-sm font-bold transition-colors ".concat(s?"bg-[#00C853] text-black":"bg-[#0066FF] text-white"),children:s?"Copied!":"Copy"})]})]}),(0,a.jsxs)("div",{className:"bg-[#0a0a0a] border border-[#222] rounded-xl p-4 space-y-2",children:[(0,a.jsx)("div",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"How it works"}),["Share your link with friends","They get a 14-day free trial","When they subscribe, you get 1 month FREE"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 text-sm text-neutral-300",children:[(0,a.jsxs)("span",{className:"text-[#0066FF] font-bold",children:[t+1,"."]}),e]},t))]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalReferrals}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Invited"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#00C853]",children:e.converted}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Premium"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#FFD700]",children:e.credits}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Mo. Free"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("button",{onClick:function(){let e=encodeURIComponent("Join me on FORC3 — the best hybrid athlete training app! You get a 14-day free trial: ".concat(i));window.open("https://wa.me/?text=".concat(e),"_blank")},className:"py-3 bg-[#25D366] text-black font-bold rounded-xl text-sm",children:"Share on WhatsApp"}),(0,a.jsx)("button",{onClick:l,className:"py-3 bg-[#262626] text-white font-bold rounded-xl text-sm",children:"Copy Link"})]})]}):(0,a.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,a.jsx)("div",{className:"h-10 bg-[#262626] rounded-xl"}),(0,a.jsx)("div",{className:"h-24 bg-[#262626] rounded-xl"})]})]})}let d=[{title:"Account",items:[{label:"Edit Profile",href:"/settings/profile",icon:"\uD83D\uDC64"},{label:"Subscription & Billing",href:"/settings/upgrade",icon:"⭐"}]},{title:"Training",items:[{label:"Exercise Library",href:"/exercises",icon:"\uD83C\uDFCB️"},{label:"Body Measurements",href:"/progress/measurements",icon:"\uD83D\uDCCF"},{label:"Workout History",href:"/history",icon:"\uD83D\uDCCB"},{label:"Analytics",href:"/progress/analytics",icon:"\uD83D\uDCCA"}]},{title:"App",items:[{label:"About FORC3",href:"/about",icon:"ℹ️"}]}];function x(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(!0);async function x(){await fetch("/api/auth/logout",{method:"POST"}),e.push("/")}return(0,n.useEffect)(()=>{s("false"!==localStorage.getItem("voiceCoachEnabled"))},[]),(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white pb-10",children:[(0,a.jsxs)("header",{className:"px-6 pt-8 pb-4 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#1a1a1a] text-neutral-400 hover:text-white",children:"←"}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Settings"})]}),(0,a.jsxs)("div",{className:"px-6 space-y-6",children:[d.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-widest mb-2 px-1",children:e.title}),(0,a.jsx)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:e.items.map((t,s)=>(0,a.jsxs)(i.default,{href:t.href,className:"flex items-center gap-3 px-5 py-4 hover:bg-[#1a1a1a] transition-colors ".concat(s<e.items.length-1?"border-b border-[#1a1a1a]":""),children:[(0,a.jsx)("span",{className:"text-lg",children:t.icon}),(0,a.jsx)("span",{className:"flex-1 text-sm font-medium",children:t.label}),(0,a.jsx)("span",{className:"text-neutral-500 text-sm",children:"→"})]},t.href))})]},e.title)),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-widest mb-2 px-1",children:"Coach"}),(0,a.jsx)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:t?"\uD83D\uDD0A":"\uD83D\uDD07"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Voice Coach"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Audio cues during workouts"})]})]}),(0,a.jsx)("button",{onClick:function(){let e=!t;s(e),localStorage.setItem("voiceCoachEnabled",String(e))},className:"w-12 h-6 rounded-full transition-colors relative ".concat(t?"bg-[#0066FF]":"bg-[#333]"),children:(0,a.jsx)("span",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(t?"translate-x-6":"translate-x-0.5")})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-widest mb-2 px-1",children:"Integrations"}),(0,a.jsx)(l,{})]}),(0,a.jsx)(c,{}),(0,a.jsx)(o,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-widest mb-2 px-1",children:"Account"}),(0,a.jsx)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:(0,a.jsxs)("button",{onClick:x,className:"w-full flex items-center gap-3 px-5 py-4 text-red-400 hover:bg-[#1a1a1a] transition-colors",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]}),(0,a.jsxs)("div",{className:"text-center pt-4 pb-6",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"FORC3 \xb7 PhD-Level Coaching at App Prices"}),(0,a.jsx)("p",{className:"text-xs text-neutral-700 mt-1",children:"v1.0.0"})]})]})]})}}},function(e){e.O(0,[7138,2971,7023,1744],function(){return e(e.s=89715)}),_N_E=e.O()}]);