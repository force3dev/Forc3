(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[556],{787:function(e,t,r){Promise.resolve().then(r.bind(r,8898))},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},357:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(8081)},8081:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var o=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?o=n.concat(o):u=-1,o.length&&x())}function x(){if(!c){var e=a(d);c=!0;for(var t=o.length;t;){for(n=o,o=[];++u<t;)n&&n[u].run();u=-1,t=o.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||c||a(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}},l=!0;try{t[e](i,i.exports,n),l=!1}finally{l&&delete r[e]}return i.exports}n.ab="//";var s=n(229);e.exports=s}()},8898:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),s=r(2265),i=r(6463),l=r(357);let a={free:["plate_calculator","progression","nutrition_logging"],pro:["plate_calculator","progression","nutrition_logging","analytics","weekly_report","exercise_swap","history_unlimited","custom_plan"],elite:["plate_calculator","progression","nutrition_logging","analytics","weekly_report","exercise_swap","history_unlimited","custom_plan","export","priority_support"]},o={pro:{name:"Pro",price:9.99,interval:"month",stripePriceId:l.env.STRIPE_PRO_PRICE_ID||"",features:["Analytics & charts","Weekly adaptive engine","AI exercise swap","Unlimited history","Custom plan editing"]},elite:{name:"Elite",price:19.99,interval:"month",stripePriceId:l.env.STRIPE_ELITE_PRICE_ID||"",features:["Everything in Pro","Data export (CSV/PDF)","Priority support","Early access to new features"]}};function c(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{tier:r,isInTrial:l}=function(){let[e,t]=(0,s.useState)({tier:"free",status:"active",trialEnd:null}),[r,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{fetch("/api/user/profile").then(e=>e.json()).then(e=>{e.subscription&&t({tier:e.subscription.tier||"free",status:e.subscription.status||"active",trialEnd:e.subscription.trialEnd||null})}).catch(()=>{}).finally(()=>n(!0))},[]);let i=null!==e.trialEnd&&new Date(e.trialEnd)>new Date,l=i?"pro":e.tier;return{tier:l,status:e.status,isInTrial:i,trialEnd:e.trialEnd,loaded:r,can:e=>a[l].includes(e)}}(),[c,u]=(0,s.useState)(null),d=t.get("success"),x=t.get("cancelled");async function m(e){let t=o[e];if(!t.stripePriceId){alert("Stripe is not configured yet. Add STRIPE_PRO_PRICE_ID and STRIPE_ELITE_PRICE_ID to .env");return}u(e);try{let r=await fetch("/api/subscription/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:t.stripePriceId,tier:e})}),n=await r.json();n.url?window.location.href=n.url:alert(n.error||"Failed to start checkout")}finally{u(null)}}return(0,n.jsxs)("main",{className:"min-h-screen bg-black text-white pb-12",children:[(0,n.jsxs)("header",{className:"px-6 pt-8 pb-6 flex items-center gap-3",children:[(0,n.jsx)("button",{onClick:()=>e.back(),className:"text-neutral-500 text-sm hover:text-white",children:"← Back"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Upgrade"})]})]}),d&&(0,n.jsxs)("div",{className:"mx-6 mb-6 bg-[#00C853]/10 border border-[#00C853]/30 rounded-xl p-4 text-[#00C853] text-sm font-semibold",children:["✓ Subscription activated! Welcome to ","elite"===r?"Elite":"Pro","."]}),x&&(0,n.jsx)("div",{className:"mx-6 mb-6 bg-neutral-800 border border-neutral-700 rounded-xl p-4 text-neutral-400 text-sm",children:"Checkout cancelled. No charges were made."}),(0,n.jsxs)("div",{className:"px-6 space-y-6",children:[(0,n.jsxs)("div",{className:"text-center py-4",children:[(0,n.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDE80"}),(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Unlock Your Full Potential"}),(0,n.jsxs)("p",{className:"text-sm text-neutral-400 mt-1",children:["Try free for ",7," days — cancel anytime"]}),l&&(0,n.jsx)("div",{className:"mt-2 text-xs text-[#FFB300] font-semibold",children:"You're currently on a free trial"})]}),(0,n.jsxs)("div",{className:"bg-[#141414] border ".concat("free"!==r||l?"border-[#262626]":"border-[#0066FF]"," rounded-2xl p-5"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold",children:"Free"}),(0,n.jsx)("div",{className:"text-2xl font-bold mt-0.5",children:"$0"})]}),"free"===r&&!l&&(0,n.jsx)("span",{className:"text-xs bg-[#0066FF]/20 text-[#0066FF] px-3 py-1 rounded-full border border-[#0066FF]/30 font-semibold",children:"Current Plan"})]}),(0,n.jsx)("ul",{className:"space-y-1.5 text-sm text-neutral-400",children:["Workout tracking","Plate calculator","Progression suggestions","Basic nutrition logging"].map(e=>(0,n.jsxs)("li",{className:"flex gap-2",children:[(0,n.jsx)("span",{className:"text-neutral-600",children:"✓"})," ",e]},e))})]}),(0,n.jsxs)("div",{className:"bg-[#141414] border ".concat("pro"===r||l?"border-[#0066FF]":"border-[#262626]"," rounded-2xl p-5 relative overflow-hidden"),children:[(0,n.jsx)("div",{className:"absolute top-4 right-4",children:(0,n.jsx)("span",{className:"text-xs bg-[#0066FF] text-white px-2.5 py-1 rounded-full font-semibold",children:"Popular"})}),(0,n.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold",children:o.pro.name}),(0,n.jsxs)("div",{className:"text-2xl font-bold mt-0.5",children:["$",o.pro.price,(0,n.jsx)("span",{className:"text-sm text-neutral-500 font-normal",children:"/mo"})]})]})}),(0,n.jsx)("ul",{className:"space-y-1.5 text-sm text-neutral-400 mb-4",children:o.pro.features.map(e=>(0,n.jsxs)("li",{className:"flex gap-2",children:[(0,n.jsx)("span",{className:"text-[#0066FF]",children:"✓"})," ",e]},e))}),"pro"===r||l?(0,n.jsx)("div",{className:"w-full py-3 bg-[#0066FF]/10 text-[#0066FF] font-bold rounded-xl text-center border border-[#0066FF]/30",children:l?"In Trial":"Current Plan"}):(0,n.jsx)("button",{onClick:()=>m("pro"),disabled:"pro"===c,className:"w-full py-3 bg-[#0066FF] text-white font-bold rounded-xl hover:bg-[#0052CC] transition-colors disabled:opacity-50",children:"pro"===c?"Loading...":"Start ".concat(7,"-Day Free Trial")})]}),(0,n.jsxs)("div",{className:"bg-[#141414] border ".concat("elite"===r?"border-[#FFB300]":"border-[#262626]"," rounded-2xl p-5"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold",children:o.elite.name}),(0,n.jsxs)("div",{className:"text-2xl font-bold mt-0.5",children:["$",o.elite.price,(0,n.jsx)("span",{className:"text-sm text-neutral-500 font-normal",children:"/mo"})]})]}),"elite"===r&&(0,n.jsx)("span",{className:"text-xs bg-[#FFB300]/20 text-[#FFB300] px-3 py-1 rounded-full border border-[#FFB300]/30 font-semibold",children:"Current Plan"})]}),(0,n.jsx)("ul",{className:"space-y-1.5 text-sm text-neutral-400 mb-4",children:o.elite.features.map(e=>(0,n.jsxs)("li",{className:"flex gap-2",children:[(0,n.jsx)("span",{className:"text-[#FFB300]",children:"✓"})," ",e]},e))}),"elite"!==r&&(0,n.jsx)("button",{onClick:()=>m("elite"),disabled:"elite"===c,className:"w-full py-3 bg-[#FFB300] text-black font-bold rounded-xl hover:bg-[#E5A000] transition-colors disabled:opacity-50",children:"elite"===c?"Loading...":"Start ".concat(7,"-Day Free Trial")})]}),(0,n.jsx)("p",{className:"text-center text-xs text-neutral-600",children:"Secure payment via Stripe. Cancel anytime. No hidden fees."})]})]})}function u(){return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}),children:(0,n.jsx)(c,{})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=787)}),_N_E=e.O()}]);