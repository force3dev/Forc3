(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9133],{89613:function(e,t,a){Promise.resolve().then(a.bind(a,90267))},16463:function(e,t,a){"use strict";var r=a(71169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},90267:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(57437),n=a(2265),s=a(16463),l=a(32371);let c={"5k":1,"10k":1,half_marathon:2,marathon:3,sprint_triathlon:1,olympic_triathlon:2,half_ironman:2,ironman:3,spartan:1};function o(e,t){var a;let r=null!==(a=c[t])&&void 0!==a?a:2,n=new Date(e);n.setDate(n.getDate()-7*r);let s=[.7,.5,.3].slice(0,r);return{taperStart:n,weeksOfTaper:r,volumeReduction:s}}function i(e){var t;return null!==(t=({base:"Base Building",build:"Build Phase",peak:"Peak Week",taper:"Taper",race_week:"Race Week",race_day:"Race Day",post_race:"Recovery"})[e])&&void 0!==t?t:e}let d=["base","build","peak","taper","race_week","race_day"],u={marathon:["Book travel & accommodation","Pick up race packet","Plan nutrition strategy","Prepare race kit","Set race morning alarm","Pack gels/nutrition","Charge GPS watch"],half_marathon:["Book travel","Race packet pickup","Plan nutrition","Prepare kit","Sleep strategy"],"5k":["Warm-up routine","Pace strategy","Race kit ready"],ironman:["Transition bags packed","Wetsuit ready","Bike tuned","Nutrition per leg planned","Pacing zones set"],spartan:["Grip gloves ready","Trail shoes prepped","Obstacle practice","Pack energy gels"]};function h(){let e=(0,s.useRouter)(),[t,a]=(0,n.useState)(null),[c,h]=(0,n.useState)(!0),[m,p]=(0,n.useState)("");if((0,n.useEffect)(()=>{fetch("/api/race-planner/race-week").then(e=>e.json()).then(e=>{e.error?p(e.error):a(e)}).catch(()=>p("Failed to load race plan")).finally(()=>h(!1))},[]),c)return(0,r.jsx)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full"})});if(m||!t)return(0,r.jsx)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"text-4xl",children:"\uD83C\uDFC1"}),(0,r.jsx)("h2",{className:"text-xl font-bold",children:"No Race Goal Set"}),(0,r.jsx)("p",{className:"text-neutral-400 text-sm",children:"Add a race goal in your profile to unlock the race planner."}),(0,r.jsx)("button",{onClick:()=>e.push("/settings/profile"),className:"px-6 py-3 bg-[#0066FF] rounded-xl font-bold text-sm",children:"Set Race Goal →"})]})});let f=new Date(t.raceDate),b=function(e,t){let a=new Date,r=Math.floor((e.getTime()-a.getTime())/864e5),{weeksOfTaper:n}=o(e,t);return r<0?"post_race":0===r?"race_day":r<=7?"race_week":r<=7*n?"taper":r<=7*n+7?"peak":r<=56?"build":"base"}(f,t.raceType),k=o(f,t.raceType),v=u[t.raceType]||u.marathon,j=d.indexOf(b),g=t.daysUntilRace,N=Math.floor((f.getTime()-Date.now())/36e5)%24;return(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,r.jsxs)("header",{className:"px-6 pt-8 pb-4",children:[(0,r.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"RACE PLANNER"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-1 capitalize",children:t.raceType.replace("_"," ")}),(0,r.jsx)("p",{className:"text-neutral-400 text-sm",children:f.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),(0,r.jsxs)("div",{className:"px-6 space-y-5",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-[#0066FF]/20 to-[#00C853]/10 border border-[#0066FF]/40 rounded-2xl p-6 text-center",children:[(0,r.jsxs)("div",{className:"text-5xl font-black",children:[g,(0,r.jsx)("span",{className:"text-2xl font-bold text-neutral-400",children:"d"})," ",N,(0,r.jsx)("span",{className:"text-2xl font-bold text-neutral-400",children:"h"})]}),(0,r.jsx)("div",{className:"text-neutral-400 text-sm mt-1",children:"until race day"})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 space-y-3",children:[(0,r.jsx)("div",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"Training Phase"}),(0,r.jsx)("div",{className:"flex gap-1 overflow-x-auto pb-1",children:d.map((e,t)=>(0,r.jsx)("div",{className:"flex-shrink-0 px-2 py-1 rounded-lg text-xs font-semibold transition-colors ".concat(t===j?"bg-[#0066FF] text-white":t<j?"bg-[#00C853]/20 text-[#00C853]":"bg-[#1a1a1a] text-neutral-600"),children:i(e)},e))}),(0,r.jsxs)("div",{className:"text-sm font-semibold",children:["Current: ",(0,r.jsx)("span",{className:"text-[#0066FF]",children:i(b)})]}),"taper"===b&&(0,r.jsxs)("p",{className:"text-xs text-neutral-400",children:["Taper starts ",k.taperStart.toLocaleDateString()," \xb7 Reduce volume to ",Math.round(100*(k.volumeReduction[0]||.7)),"% this week"]})]}),t.plan&&(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5 space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"This Week's Focus"}),(0,r.jsx)("p",{className:"text-sm text-neutral-300 leading-relaxed whitespace-pre-wrap",children:t.plan})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5 space-y-3",children:[(0,r.jsx)("div",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"Race Day Checklist"}),v.map(e=>(0,r.jsx)(x,{label:e},e))]})]}),(0,r.jsx)(l.Z,{active:"home"})]})}function x(e){let{label:t}=e,[a,s]=(0,n.useState)(!1);return(0,r.jsxs)("button",{onClick:()=>s(!a),className:"flex items-center gap-3 w-full text-left",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 ".concat(a?"bg-[#00C853] border-[#00C853]":"border-[#333]"),children:a&&(0,r.jsx)("span",{className:"text-black text-xs",children:"✓"})}),(0,r.jsx)("span",{className:"text-sm ".concat(a?"line-through text-neutral-600":"text-neutral-200"),children:t})]})}},32371:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(57437),n=a(87138),s=a(16463),l=a(2265);let c=[{id:"home",label:"Home",href:"/home",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"discover",label:"Discover",href:"/discover",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{id:"workout",label:"Workout",href:"/workout",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6h2m0 0V4m0 2v2M3 6h18m-2 0V4m0 2v2m0-2h2M5 8h14m-7 4v4m0-4H9m3 0h3"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=["home","discover","workout","coach","profile"];function i(e){let{active:t}=e,a=(0,s.useRouter)(),i=o.indexOf(t);return!function(e){let{onSwipeLeft:t,onSwipeRight:a,threshold:r=60}=e,n=(0,l.useRef)(null),s=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){n.current=e.touches[0].clientX,s.current=e.touches[0].clientY}function l(e){if(null===n.current||null===s.current)return;let l=e.changedTouches[0].clientX-n.current;Math.abs(l)>Math.abs(e.changedTouches[0].clientY-s.current)&&Math.abs(l)>r&&(l<0?null==t||t():null==a||a()),n.current=null,s.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",l,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",l)}},[t,a,r])}({onSwipeLeft:()=>{i<o.length-1&&a.push(c.find(e=>e.id===o[i+1]).href)},onSwipeRight:()=>{i>0&&a.push(c.find(e=>e.id===o[i-1]).href)}}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,r.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:c.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(t===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,r.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}}},function(e){e.O(0,[7138,2971,7023,1744],function(){return e(e.s=89613)}),_N_E=e.O()}]);