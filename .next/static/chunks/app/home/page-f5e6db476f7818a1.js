(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1951],{89758:function(e,s,t){Promise.resolve().then(t.bind(t,37669))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},37669:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),r=t(2265),l=t(16463),n=t(87138),i=t(32371),d=t(93595),o=t(2359),c=t(1555);function x(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[j,f]=(0,r.useState)(0),[p,b]=(0,r.useState)(null);async function N(){try{let[t,r,l]=await Promise.all([fetch("/api/workouts/today"),fetch("/api/nutrition"),fetch("/api/user/profile")]),n=await t.json();if(n.needsOnboarding){e.push("/onboarding");return}if(u(n),r.ok){let e=await r.json();m(e)}if(l.ok){var s,a;let e=await l.json();f((null===(s=e.streak)||void 0===s?void 0:s.currentStreak)||0);let t=(null===(a=e.profile)||void 0===a?void 0:a.raceGoals)||[];if(t.length>0){let e=Date.now(),s=t.filter(e=>e.date).map(s=>({label:s.type.replace(/_/g," "),days:Math.max(0,Math.round((new Date(s.date).getTime()-e)/864e5))})).sort((e,s)=>e.days-s.days)[0];s&&b(s)}}}catch(e){console.error(e)}finally{t(!1)}}(0,r.useEffect)(()=>{N()},[e]);let v=new Date().toLocaleDateString("en-US",{weekday:"long"}),g=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"});if(s)return(0,a.jsx)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})});let w=h?Math.min(100,h.totals.calories/h.targets.calories*100):0,y=h?Math.min(100,h.totals.protein/h.targets.protein*100):0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)(d.Z,{onRefresh:N,children:(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,a.jsx)("header",{className:"px-6 pt-8 pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mt-1",children:v}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:g})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-500",children:["WEEK ",(null==x?void 0:x.currentWeek)||1]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-400 mt-0.5",children:[(null==x?void 0:x.workoutsThisWeek)||0,"/",(null==x?void 0:x.daysPerWeek)||4," this week"]})]})]})}),(0,a.jsxs)("div",{className:"px-6 space-y-5",children:[p&&(0,a.jsxs)("div",{className:"bg-[#0066FF]/10 border border-[#0066FF]/30 rounded-xl px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83C\uDFC1"}),(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:p.label})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-[#0066FF] font-bold text-lg",children:p.days}),(0,a.jsx)("span",{className:"text-neutral-500 text-xs ml-1",children:"days out"})]})]}),(null==x?void 0:x.isRestDay)?(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-6 text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDE34"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Rest Day"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:x.message||"Rest well. Growth happens here."})]}):(null==x?void 0:x.workout)?(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-5 py-4 border-b border-[#262626] flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Today"}),(0,a.jsx)("h2",{className:"text-lg font-bold mt-0.5",children:x.workout.name}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-0.5",children:[x.workout.exercises.length," exercises"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.default,{href:"/workout/edit/".concat(x.workout.id),className:"px-3 py-2 text-[#0066FF] text-sm font-semibold border border-[#0066FF]/30 rounded-xl hover:bg-[#0066FF]/10 transition-colors",children:"Edit"}),(0,a.jsx)(n.default,{href:"/workout/".concat(x.workout.id),className:"px-5 py-2.5 bg-[#0066FF] text-white text-sm font-bold rounded-xl hover:bg-[#0052CC] transition-colors",children:x.inProgressLog?"Resume":"Start"})]})]}),(0,a.jsxs)("div",{className:"px-5 py-4 space-y-3",children:[x.workout.exercises.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-neutral-200",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-neutral-500",children:[e.sets," \xd7 ",e.repsMin,"–",e.repsMax,e.lastWeight?" • ".concat(e.lastWeight," lbs"):""]})]},e.id)),x.workout.exercises.length>4&&(0,a.jsxs)("p",{className:"text-xs text-neutral-600",children:["+",x.workout.exercises.length-4," more"]})]})]}):(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-6 text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCAA"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"No workout today"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Start a free workout or check your plan."}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(n.default,{href:"/workout/create",className:"px-4 py-2 bg-[#0066FF] rounded-xl text-sm font-semibold",children:"Create Workout"}),(0,a.jsx)(n.default,{href:"/plan",className:"px-4 py-2 bg-[#1a1a1a] border border-[#262626] rounded-xl text-sm font-semibold",children:"View Plan"})]})]}),(0,a.jsx)(c.Z,{}),h&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Nutrition"}),(0,a.jsx)(n.default,{href:"/nutrition",className:"text-xs text-[#0066FF] hover:text-[#0052CC] transition-colors",children:"Log meal →"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,a.jsx)("span",{className:"text-neutral-400",children:"Calories"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-semibold",children:Math.round(h.totals.calories)}),(0,a.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(h.targets.calories)]})]})]}),(0,a.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#0066FF] rounded-full transition-all",style:{width:"".concat(w,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,a.jsx)("span",{className:"text-neutral-400",children:"Protein"}),(0,a.jsxs)("span",{children:[(0,a.jsxs)("span",{className:"font-semibold",children:[Math.round(h.totals.protein),"g"]}),(0,a.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(h.targets.protein),"g"]})]})]}),(0,a.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#00C853] rounded-full transition-all",style:{width:"".concat(y,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(n.default,{href:"/history",className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"This Week"}),(0,a.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[(null==x?void 0:x.workoutsThisWeek)||0,(0,a.jsxs)("span",{className:"text-lg text-neutral-500 font-normal",children:[" / ",(null==x?void 0:x.daysPerWeek)||4]})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"workouts"})]}),(0,a.jsxs)(n.default,{href:"/progress",className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Streak"}),(0,a.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[j,(0,a.jsx)("span",{className:"text-lg text-neutral-500 font-normal",children:" days"})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:j>=7?"\uD83D\uDD25 On fire!":"Keep going"})]})]}),(0,a.jsxs)(n.default,{href:"/discover",className:"flex items-center justify-between bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:"Community Feed"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"See what others are training"})]}),(0,a.jsx)("span",{className:"text-[#0066FF]",children:"→"})]})]}),(0,a.jsx)(i.Z,{active:"home"})]})})]})}}},function(e){e.O(0,[7138,6106,6791,2971,7023,1744],function(){return e(e.s=89758)}),_N_E=e.O()}]);