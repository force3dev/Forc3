(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7933],{19584:function(e,t,s){Promise.resolve().then(s.bind(s,20941))},20941:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(57437),l=s(2265),n=s(16463);let r=[45,35,25,10,5,2.5],i=[20,15,10,5,2.5,1.25];function c(e){let{prCount:t,newAchievements:s=[],onClose:n}=e;return(0,l.useEffect)(()=>{let e=setTimeout(n,2e3);return()=>clearTimeout(e)},[n]),(0,a.jsx)("div",{className:"fixed bottom-6 left-4 right-4 z-50 animate-in slide-in-from-bottom-4 fade-in duration-300",children:(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#00C853]/40 rounded-2xl px-5 py-4 flex items-center gap-4 shadow-lg shadow-black/60",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#00C853]/20 border border-[#00C853]/50 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-[#00C853]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-bold text-white",children:"Workout Complete! \uD83D\uDCAA"}),(0,a.jsxs)("p",{className:"text-xs text-neutral-400 mt-0.5",children:[t>0?"".concat(t," new PR").concat(1!==t?"s":""):"Great work — keep showing up",s.length>0?" \xb7 ".concat(s.length," achievement").concat(1!==s.length?"s":""):""]})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 rounded-b-2xl overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#00C853] animate-shrink",style:{animationDuration:"2s",animationTimingFunction:"linear"}})})]})})}var o=s(45348),d=s(15321);function x(e){let{primary:t,secondary:s=[]}=e,l=e=>(function(e,t,s){let a=e.toLowerCase();return t.some(e=>e.toLowerCase()===a)?"#0066FF":s.some(e=>e.toLowerCase()===a)?"#003d99":"#2a2a2a"})(e,t,s);return(0,a.jsxs)("div",{className:"flex justify-center gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[10px] text-neutral-600 mb-1 uppercase tracking-wide",children:"Front"}),(0,a.jsxs)("svg",{viewBox:"0 0 100 200",className:"w-20 h-40",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("ellipse",{cx:"50",cy:"16",rx:"12",ry:"14",fill:"#444"}),(0,a.jsx)("rect",{x:"45",y:"28",width:"10",height:"8",fill:"#444"}),(0,a.jsx)("ellipse",{cx:"50",cy:"52",rx:"22",ry:"14",fill:l("chest")}),(0,a.jsx)("ellipse",{cx:"24",cy:"46",rx:"9",ry:"8",fill:l("shoulders")}),(0,a.jsx)("ellipse",{cx:"76",cy:"46",rx:"9",ry:"8",fill:l("shoulders")}),(0,a.jsx)("rect",{x:"13",y:"55",width:"10",height:"22",rx:"5",fill:l("biceps")}),(0,a.jsx)("rect",{x:"77",y:"55",width:"10",height:"22",rx:"5",fill:l("biceps")}),(0,a.jsx)("rect",{x:"11",y:"78",width:"9",height:"20",rx:"4",fill:"#333"}),(0,a.jsx)("rect",{x:"80",y:"78",width:"9",height:"20",rx:"4",fill:"#333"}),(0,a.jsx)("rect",{x:"36",y:"66",width:"28",height:"32",rx:"4",fill:l("core")}),(0,a.jsx)("line",{x1:"50",y1:"68",x2:"50",y2:"96",stroke:"#1a1a1a",strokeWidth:"1.5"}),(0,a.jsx)("line",{x1:"36",y1:"76",x2:"64",y2:"76",stroke:"#1a1a1a",strokeWidth:"1.5"}),(0,a.jsx)("line",{x1:"36",y1:"86",x2:"64",y2:"86",stroke:"#1a1a1a",strokeWidth:"1.5"}),(0,a.jsx)("ellipse",{cx:"40",cy:"130",rx:"12",ry:"24",fill:l("quads")}),(0,a.jsx)("ellipse",{cx:"60",cy:"130",rx:"12",ry:"24",fill:l("quads")}),(0,a.jsx)("ellipse",{cx:"40",cy:"172",rx:"8",ry:"16",fill:l("calves")}),(0,a.jsx)("ellipse",{cx:"60",cy:"172",rx:"8",ry:"16",fill:l("calves")})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[10px] text-neutral-600 mb-1 uppercase tracking-wide",children:"Back"}),(0,a.jsxs)("svg",{viewBox:"0 0 100 200",className:"w-20 h-40",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("ellipse",{cx:"50",cy:"16",rx:"12",ry:"14",fill:"#444"}),(0,a.jsx)("rect",{x:"45",y:"28",width:"10",height:"8",fill:"#444"}),(0,a.jsx)("ellipse",{cx:"24",cy:"46",rx:"9",ry:"8",fill:l("shoulders")}),(0,a.jsx)("ellipse",{cx:"76",cy:"46",rx:"9",ry:"8",fill:l("shoulders")}),(0,a.jsx)("path",{d:"M28 38 Q50 36 72 38 Q72 70 64 80 Q50 84 36 80 Q28 70 28 38Z",fill:l("back")}),(0,a.jsx)("rect",{x:"13",y:"55",width:"10",height:"22",rx:"5",fill:l("triceps")}),(0,a.jsx)("rect",{x:"77",y:"55",width:"10",height:"22",rx:"5",fill:l("triceps")}),(0,a.jsx)("rect",{x:"11",y:"78",width:"9",height:"20",rx:"4",fill:"#333"}),(0,a.jsx)("rect",{x:"80",y:"78",width:"9",height:"20",rx:"4",fill:"#333"}),(0,a.jsx)("ellipse",{cx:"50",cy:"102",rx:"20",ry:"14",fill:l("glutes")}),(0,a.jsx)("ellipse",{cx:"40",cy:"130",rx:"11",ry:"22",fill:l("hamstrings")}),(0,a.jsx)("ellipse",{cx:"60",cy:"130",rx:"11",ry:"22",fill:l("hamstrings")}),(0,a.jsx)("ellipse",{cx:"40",cy:"172",rx:"8",ry:"16",fill:l("calves")}),(0,a.jsx)("ellipse",{cx:"60",cy:"172",rx:"8",ry:"16",fill:l("calves")})]})]})]})}function h(e){try{return JSON.parse(e)||[]}catch(e){return[]}}function u(e){let{exercise:t,onClose:s}=e,l=h(t.muscleGroups),n=h(t.secondaryMuscles),r=h(t.formTips),i=h(t.commonMistakes),c=h(t.coachingCues||"[]"),u=h(t.alternatives||"[]");return(0,a.jsx)(o.M,{children:(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/95 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-5 pt-8 pb-4 sticky top-0 bg-black/95 border-b border-[#1a1a1a]",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:t.name}),(0,a.jsx)("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#1a1a1a] text-neutral-400 hover:text-white",children:"✕"})]}),(0,a.jsxs)("div",{className:"px-5 py-5 space-y-6",children:[t.gifUrl&&(0,a.jsx)("div",{className:"rounded-2xl overflow-hidden bg-[#0a0a0a] border border-[#1a1a1a]",children:(0,a.jsx)("img",{src:t.gifUrl,alt:t.name,className:"w-full max-h-64 object-contain"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-[#0066FF]/20 text-[#0066FF] text-xs font-semibold rounded-full capitalize",children:t.category}),l.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-[#141414] border border-[#262626] text-xs rounded-full capitalize",children:e},e))]}),(l.length>0||n.length>0)&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-4",children:"Muscles Worked"}),(0,a.jsx)(x,{primary:l,secondary:n}),(0,a.jsxs)("div",{className:"mt-4 space-y-1.5 text-sm",children:[l.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full bg-[#0066FF] flex-shrink-0"}),(0,a.jsx)("span",{className:"text-neutral-300 capitalize",children:l.join(", ")}),(0,a.jsx)("span",{className:"text-neutral-600 text-xs",children:"(primary)"})]}),n.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full bg-[#003d99] flex-shrink-0"}),(0,a.jsx)("span",{className:"text-neutral-400 capitalize",children:n.join(", ")}),(0,a.jsx)("span",{className:"text-neutral-600 text-xs",children:"(secondary)"})]})]})]}),t.instructions&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-3",children:"How To"}),(0,a.jsx)("p",{className:"text-sm text-neutral-300 leading-relaxed",children:t.instructions})]}),r.length>0&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-3",children:"Form Tips"}),(0,a.jsx)("div",{className:"space-y-2.5",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("span",{className:"text-[#00C853] mt-0.5 flex-shrink-0",children:"✓"}),(0,a.jsx)("span",{className:"text-neutral-300",children:e})]},t))})]}),i.length>0&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-3",children:"Avoid These Mistakes"}),(0,a.jsx)("div",{className:"space-y-2.5",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("span",{className:"text-red-400 mt-0.5 flex-shrink-0",children:"✗"}),(0,a.jsx)("span",{className:"text-neutral-300",children:e})]},t))})]}),c.length>0&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-3",children:"Coaching Cues"}),(0,a.jsx)("div",{className:"space-y-2.5",children:c.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-300 mt-0.5 flex-shrink-0",children:"\uD83D\uDCA1"}),(0,a.jsxs)("span",{className:"text-neutral-300",children:['"',e,'"']})]},t))})]}),u.length>0&&(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold mb-3",children:"Similar Exercises"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:u.map((e,t)=>(0,a.jsx)("span",{className:"px-2.5 py-1 rounded-full border border-[#2c2c2c] bg-[#101010] text-xs text-neutral-300",children:e},"".concat(e,"-").concat(t)))})]})]})]})})})}async function m(e){let t;let a=document.getElementById(e);if(!a)throw Error("Element not found");try{t=(await s.e(7337).then(s.t.bind(s,81173,23))).default}catch(e){throw Error("html2canvas not installed. Run: npm install html2canvas")}let l=await t(a,{backgroundColor:"#000000",scale:2,useCORS:!0});return new Promise(e=>{l.toBlob(t=>e(t),"image/png",1)})}async function p(e,t){if(navigator.share)try{await navigator.share({text:t,files:[new File([e],"forc3-workout.png",{type:"image/png"})]});return}catch(e){}let s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="forc3-workout.png",a.click(),URL.revokeObjectURL(s)}function g(e){let{workoutName:t,date:s,exerciseCount:n,totalSets:r,totalVolume:i,durationMinutes:c,streakDays:x,onClose:h}=e,u=(0,l.useRef)(null),[g,f]=(0,l.useState)(!1);async function b(){f(!0);try{let e=await m("workout-share-card");await p(e,"Crushed it! ".concat(t," complete \uD83D\uDCAA via @forc3app"))}catch(e){console.error(e)}finally{f(!1)}}return(0,a.jsx)(o.M,{children:(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50 p-4 pb-8",onClick:h,children:(0,a.jsxs)(d.E.div,{initial:{y:60,opacity:0},animate:{y:0,opacity:1},exit:{y:60,opacity:0},transition:{type:"spring",damping:26,stiffness:300},onClick:e=>e.stopPropagation(),className:"w-full max-w-sm space-y-4",children:[(0,a.jsxs)("div",{id:"workout-share-card",ref:u,className:"bg-black border border-[#262626] rounded-2xl p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-[#0066FF] font-black text-lg tracking-widest",children:"⚡ FORC3"}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:"forc3.app"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-widest",children:"Workout Complete"}),(0,a.jsx)("h2",{className:"text-2xl font-black mt-1 text-white",children:t}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:s})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Exercises",value:String(n)},{label:"Sets",value:String(r)},{label:"Volume",value:"".concat(Math.round(i).toLocaleString()," lbs")},{label:"Duration",value:"".concat(c," min")}].map(e=>(0,a.jsxs)("div",{className:"bg-[#111] rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:e.value}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:e.label})]},e.label))}),x>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDD25"}),(0,a.jsxs)("span",{className:"text-sm font-bold text-white",children:[x," day streak"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:h,className:"flex-1 py-3 text-sm text-neutral-400 border border-[#262626] rounded-xl",children:"Skip"}),(0,a.jsx)("button",{onClick:b,disabled:g,className:"flex-[2] py-3 text-sm font-bold bg-[#0066FF] text-white rounded-xl disabled:opacity-50",children:g?"Sharing...":"Share Workout \uD83D\uDCE4"})]})]})})})}function f(e){let{exerciseName:t,weight:s,reps:n,previousWeight:r,onClose:i}=e,[c,x]=(0,l.useState)(!1);async function h(){x(!0);try{let e=await m("pr-share-card");await p(e,"New PR! ".concat(s," lbs \xd7 ").concat(n," on ").concat(t," \uD83C\uDFC6 via @forc3app"))}catch(e){console.error(e)}finally{x(!1)}}return(0,a.jsx)(o.M,{children:(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-end justify-center z-50 p-4 pb-8",onClick:i,children:(0,a.jsxs)(d.E.div,{initial:{y:60,opacity:0},animate:{y:0,opacity:1},exit:{y:60,opacity:0},transition:{type:"spring",damping:26,stiffness:300},onClick:e=>e.stopPropagation(),className:"w-full max-w-sm space-y-4",children:[(0,a.jsxs)("div",{id:"pr-share-card",className:"bg-black rounded-2xl p-6 space-y-5",style:{border:"1px solid #FFB30060"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-[#FFB300] font-black text-lg tracking-widest",children:"⚡ FORC3"}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:"forc3.app"})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83C\uDFC6"}),(0,a.jsx)("p",{className:"text-xs text-[#FFB300] font-bold uppercase tracking-widest",children:"New Personal Record"})]}),(0,a.jsxs)("div",{className:"bg-[#1a1500] border border-[#FFB300]/30 rounded-2xl p-5 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-black uppercase text-white",children:t}),(0,a.jsxs)("p",{className:"text-3xl font-black text-[#FFB300] mt-2",children:[s," lbs \xd7 ",n]}),r&&(0,a.jsxs)("div",{className:"mt-3 space-y-0.5",children:[(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:["Previous best: ",r," lbs"]}),(0,a.jsxs)("p",{className:"text-xs text-[#00C853] font-bold",children:["+",Math.round(s-r)," lbs improvement"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:i,className:"flex-1 py-3 text-sm text-neutral-400 border border-[#262626] rounded-xl",children:"Close"}),(0,a.jsx)("button",{onClick:h,disabled:c,className:"flex-[2] py-3 text-sm font-bold rounded-xl disabled:opacity-50",style:{background:"linear-gradient(135deg, #FFB300, #FF6B00)",color:"#000"},children:c?"Sharing...":"Share PR \uD83C\uDFC6"})]})]})})})}let b={light:()=>{"undefined"!=typeof navigator&&"vibrate"in navigator&&navigator.vibrate(10)},success:()=>{"undefined"!=typeof navigator&&"vibrate"in navigator&&navigator.vibrate([10,50,10,50,80])}};var j=s(74691);class y{speak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!this.synth||!this.enabled)return;this.synth.cancel();let a=new SpeechSynthesisUtterance(e);this.voice&&(a.voice=this.voice),a.rate=t,a.pitch=s,this.synth.speak(a)}stop(){var e;null===(e=this.synth)||void 0===e||e.cancel()}setEnabled(e){this.enabled=e,localStorage.setItem("voiceCoachEnabled",String(e)),e||this.stop()}isEnabled(){return this.enabled}announceWarmup(){this.speak("Alright, let's warm up. Easy effort, get your body ready.")}announceMainSet(e){this.speak("Main set. Push it now — this is what you trained for.".concat(e?" You've got ".concat(e," intervals."):""))}announceRest(e){this.speak("Rest. Recover. You've got ".concat(e," more intervals."))}announceLastInterval(){this.speak("Last one! Give everything you've got.")}announceWorkoutComplete(){this.speak("That's a wrap. Great work today.")}announceSet(e,t){this.speak("Set ".concat(e,". ").concat(t,". Let's go."))}announceRestPeriod(e){this.speak("".concat(e," seconds rest."))}announceLastSet(){this.speak("Last set. Make it count.")}constructor(){this.synth=null,this.voice=null,this.enabled=!0,this.synth=window.speechSynthesis,this.enabled="false"!==localStorage.getItem("voiceCoachEnabled");let e=()=>{let e=this.synth.getVoices();this.voice=e.find(e=>"en-US"===e.lang&&e.localService)||e.find(e=>e.lang.startsWith("en"))||e[0]||null};e(),this.synth&&(this.synth.onvoiceschanged=e)}}let N=null;function v(){return N||(N=new y),N}function w(e){let{seconds:t,onDone:s}=e,[n,r]=(0,l.useState)(t),[i,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{r(t=>t<=1?(clearInterval(e),c(!1),s(),0):t-1)},1e3);return()=>clearInterval(e)},[i,s]);let o=(t-n)/t*100;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-xs text-center space-y-6",children:[(0,a.jsx)("p",{className:"text-neutral-400 text-sm uppercase tracking-widest",children:"Rest"}),(0,a.jsxs)("div",{className:"relative w-40 h-40 mx-auto",children:[(0,a.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 160 160",children:[(0,a.jsx)("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#1a1a1a",strokeWidth:"8"}),(0,a.jsx)("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#0066FF",strokeWidth:"8",strokeDasharray:"".concat(2*Math.PI*70),strokeDashoffset:"".concat(2*Math.PI*70*(1-o/100)),strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s linear"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-4xl font-bold tabular-nums",children:[Math.floor(n/60),":",(n%60).toString().padStart(2,"0")]})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{r(e=>Math.max(0,e-30))},className:"flex-1 py-3 bg-[#1a1a1a] rounded-xl text-sm",children:"−30s"}),(0,a.jsx)("button",{onClick:()=>{c(!1),s()},className:"flex-1 py-3 bg-[#0066FF] rounded-xl font-semibold",children:"Skip"}),(0,a.jsx)("button",{onClick:()=>{r(e=>e+30)},className:"flex-1 py-3 bg-[#1a1a1a] rounded-xl text-sm",children:"+30s"})]})]})})}function k(e){let{prType:t,exerciseName:s,weight:n,reps:r,previousWeight:i,onDone:c}=e,[o,d]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(0,j.O)(),b.success()},[]),o&&s&&n&&r)?(0,a.jsx)(f,{exerciseName:s,weight:n,reps:r,previousWeight:i,onClose:c}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"text-center space-y-4 px-6",children:[(0,a.jsx)("div",{className:"text-6xl animate-bounce",children:"\uD83C\uDFC6"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#FFB300]",children:"NEW PR!"}),s&&(0,a.jsx)("p",{className:"text-white font-semibold",children:s}),n&&r&&(0,a.jsxs)("p",{className:"text-[#FFB300] text-xl font-bold",children:[n," lbs \xd7 ",r]}),(0,a.jsx)("p",{className:"text-neutral-400 text-sm",children:"1rm"===t?"New estimated 1-rep max!":"volume"===t?"New single-set volume PR!":"Personal Record Broken!"}),(0,a.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,a.jsx)("button",{onClick:c,className:"flex-1 py-3 border border-[#262626] text-neutral-400 rounded-xl text-sm",children:"Keep Going"}),s&&n&&r&&(0,a.jsx)("button",{onClick:()=>d(!0),className:"flex-[2] py-3 bg-[#FFB300] text-black font-bold rounded-xl text-sm",children:"Share PR \uD83D\uDCE4"})]})]})})}function C(e){let{weight:t,onClose:s}=e,[n,c]=(0,l.useState)(t),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lbs",s="lbs"===t?45:20,a=[],l=Math.max(0,(e-s)/2);for(let e of"lbs"===t?r:i)if(l>=e){let t=Math.floor(l/e);a.push({weight:e,count:t}),l-=e*t,l=Math.round(100*l)/100}let n=s+a.reduce((e,t)=>e+t.weight*t.count*2,0);return{bar:s,platesPerSide:a,totalWeight:n,unit:t}}(n,"lbs");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-end",children:(0,a.jsxs)("div",{className:"w-full bg-[#141414] border-t border-[#262626] rounded-t-2xl p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Plate Calculator"}),(0,a.jsx)("button",{onClick:s,className:"text-neutral-500 text-lg",children:"✕"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",value:n,onChange:e=>c(parseFloat(e.target.value)||0),className:"w-full p-4 pr-16 bg-[#0a0a0a] border border-[#262626] rounded-xl text-center text-2xl font-bold focus:border-[#0066FF] focus:outline-none",step:2.5}),(0,a.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-500",children:"lbs"})]}),(0,a.jsxs)("div",{className:"bg-[#0a0a0a] rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-3",children:[(0,a.jsxs)("span",{className:"text-neutral-400",children:["Bar: ",o.bar," lbs"]}),(0,a.jsx)("span",{className:"text-neutral-400",children:"Per side:"})]}),o.platesPerSide.length>0?(0,a.jsx)("div",{className:"space-y-2",children:o.platesPerSide.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex gap-2",children:Array.from({length:e.count}).map((t,s)=>(0,a.jsx)("div",{className:"h-8 rounded-md flex items-center justify-center text-xs font-bold text-black",style:{width:Math.max(24,.8*e.weight)+"px",background:e.weight>=45?"#FFB300":e.weight>=25?"#0066FF":e.weight>=10?"#00C853":"#A0A0A0"},children:e.weight},s))}),(0,a.jsxs)("span",{className:"text-neutral-400 text-sm",children:[e.count,"\xd7",e.weight]})]},t))}):(0,a.jsx)("p",{className:"text-neutral-500 text-sm text-center",children:"Bar only"}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-[#262626] flex justify-between text-sm font-semibold",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:[o.totalWeight," lbs"]})]})]})]})})}function F(){let e=(0,n.useRouter)(),t=(0,n.useParams)().id,[s,r]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[h,m]=(0,l.useState)(null),[p,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)(120),[F,D]=(0,l.useState)(!1),[M,R]=(0,l.useState)(135),[P,E]=(0,l.useState)(!1),[B,W]=(0,l.useState)(null),[L,T]=(0,l.useState)(null),[I,A]=(0,l.useState)(!1),[O,U]=(0,l.useState)(!1),[z,V]=(0,l.useState)(null),[G,_]=(0,l.useState)(!1),[J,Q]=(0,l.useState)(()=>"false"!==localStorage.getItem("voiceCoachEnabled")),[Z,q]=(0,l.useState)(null),Y=(0,l.useRef)(Date.now());(0,l.useEffect)(()=>{!async function(){try{let t=await fetch("/api/workouts/today"),s=await t.json();if(!s.workout){e.push("/dashboard");return}let a=s.workout,l=a.exercises.map(e=>({...e,progressionBadge:e.progressionBadge||null,progressionReason:e.progressionReason||null,loggedSets:Array.from({length:e.sets},(t,s)=>({setNumber:s+1,weight:e.suggestedWeight||e.lastWeight||45,reps:e.repsMax,logged:!1}))}));o({id:a.id,name:a.name,exercises:l,coachingNotes:a.coachingNotes||[]});let n=await fetch("/api/workouts/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"start",workoutId:a.id})}),r=await n.json();x(r.logId)}catch(e){console.error(e)}finally{r(!1)}}()},[e,t]);let H=(e,t,s)=>{o(a=>{if(!a)return a;let l=[...a.exercises],n=[...l[e].loggedSets];return n[t]={...n[t],...s},l[e]={...l[e],loggedSets:n},{...a,exercises:l}})},K=(0,l.useCallback)(async(e,t)=>{if(!i||!d)return;let s=i.exercises[e],a=s.loggedSets[t];b.light();let l=await fetch("/api/workouts/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"log_set",logId:d,exerciseId:s.exerciseId,setNumber:a.setNumber,weight:a.weight,reps:a.reps,rpe:a.rpe})}),n=await l.json();n.isPR&&(W(n.prType||null),T({name:s.name,weight:a.weight,reps:a.reps}),E(!0)),H(e,t,{logged:!0,isPR:n.isPR});let r=v(),c=s.restSeconds||120;t===s.sets-1?r.announceLastSet():r.announceRestPeriod(c),N(c),f(!0)},[i,d]),X=async()=>{if(d){A(!0);try{let e=await fetch("/api/workouts/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"complete",logId:d})}),t=await e.json();(0,j.U)(),b.success(),v().announceWorkoutComplete(),q({duration:60*t.duration,totalVolume:t.totalVolume,prCount:t.prCount||0,newAchievements:t.newAchievements||[]}),U(!0)}finally{A(!1)}}};if(s)return(0,a.jsx)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})});if(!i)return(0,a.jsx)("main",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("p",{className:"text-neutral-400",children:"Workout not found"}),(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"text-[#0066FF] underline",children:"Back to Dashboard"})]})});if(O&&Z){let t=i.exercises.reduce((e,t)=>e+t.loggedSets.filter(e=>e.logged).length,0),s=new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return G?(0,a.jsx)(g,{workoutName:i.name,date:s,exerciseCount:i.exercises.length,totalSets:t,totalVolume:Z.totalVolume,durationMinutes:Math.round(Z.duration/60),streakDays:0,onClose:()=>e.push("/home")}):(0,a.jsx)("main",{className:"min-h-screen bg-black text-white",children:(0,a.jsx)(c,{duration:Z.duration,totalVolume:Z.totalVolume,totalSets:t,prCount:Z.prCount,newAchievements:Z.newAchievements,onClose:()=>_(!0)})})}let $=i.exercises.filter(e=>e.loggedSets.every(e=>e.logged)).length;return(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white pb-6",children:[p&&(0,a.jsx)(w,{seconds:y,onDone:()=>f(!1)}),P&&(0,a.jsx)(k,{prType:B,exerciseName:null==L?void 0:L.name,weight:null==L?void 0:L.weight,reps:null==L?void 0:L.reps,onDone:()=>{E(!1),W(null),T(null)}}),z&&(0,a.jsx)(u,{exercise:{id:z.exerciseId,name:z.name,gifUrl:z.gifUrl,muscleGroups:JSON.stringify(z.muscleGroups),secondaryMuscles:z.secondaryMuscles||"[]",formTips:z.formTips||"[]",commonMistakes:z.commonMistakes||"[]",coachingCues:z.coachingCues||"[]",alternatives:z.alternatives||"[]",instructions:z.instructions,category:z.category||"strength"},onClose:()=>V(null)}),F&&(0,a.jsx)(C,{weight:M,onClose:()=>D(!1)}),(0,a.jsxs)("header",{className:"px-5 pt-6 pb-4 flex items-center justify-between border-b border-[#1a1a1a]",children:[(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"text-neutral-500 text-sm hover:text-white transition-colors",children:"← Exit"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold",children:i.name}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500",children:[$,"/",i.exercises.length," exercises"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{let e=v(),t=!J;Q(t),e.setEnabled(t),localStorage.setItem("voiceCoachEnabled",String(t))},className:"text-lg",title:J?"Voice on":"Voice off",children:J?"\uD83D\uDD0A":"\uD83D\uDD07"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 tabular-nums",children:(0,a.jsx)(S,{startTime:Y.current})})]})]}),(0,a.jsx)("div",{className:"px-5 py-3 flex gap-1.5",children:i.exercises.map((e,t)=>(0,a.jsx)("div",{className:"h-1 flex-1 rounded-full transition-colors ".concat(e.loggedSets.every(e=>e.logged)?"bg-[#0066FF]":h===t?"bg-[#0066FF]/50":"bg-[#262626]")},e.id))}),i.coachingNotes&&i.coachingNotes.length>0&&(0,a.jsxs)("div",{className:"mx-5 mb-3 bg-[#0066FF]/5 border border-[#0066FF]/20 rounded-xl p-3 space-y-1.5",children:[(0,a.jsx)("p",{className:"text-xs text-[#0066FF] font-semibold uppercase tracking-wide",children:"Coach Tips"}),i.coachingNotes.map((e,t)=>(0,a.jsx)("p",{className:"text-xs text-neutral-300",children:e},t))]}),(0,a.jsx)("div",{className:"px-5 space-y-3",children:i.exercises.map((e,t)=>{let s=h===t,l=e.loggedSets.every(e=>e.logged),n=e.loggedSets.filter(e=>e.logged).length;return(0,a.jsxs)("div",{className:"rounded-2xl border overflow-hidden transition-all ".concat(s?"border-[#0066FF]/50 bg-[#141414]":l?"border-[#262626] bg-[#0a0a0a] opacity-75":"border-[#262626] bg-[#141414]"),children:[(0,a.jsxs)("div",{className:"w-full px-5 py-4 flex items-center gap-3 text-left",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),V(e)},className:"w-12 h-12 rounded-xl overflow-hidden bg-[#0a0a0a] border border-[#262626] flex-shrink-0 flex items-center justify-center",children:e.gifUrl?(0,a.jsx)("img",{src:e.gifUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCAA"})}),(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-between text-left min-w-0",onClick:()=>m(s?null:t),children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 mr-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[l&&(0,a.jsx)("span",{className:"text-[#00C853] text-sm",children:"✓"}),(0,a.jsx)("span",{className:"font-semibold ".concat(l?"text-neutral-400":"text-white"),children:e.name}),e.progressionBadge&&!l&&(0,a.jsx)("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full bg-[#0066FF]/20 text-[#0066FF] border border-[#0066FF]/30",children:e.progressionBadge})]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 mt-0.5",children:[e.sets," sets \xd7 ",e.repsMin,"–",e.repsMax," reps",e.rpe?" @ RPE ".concat(e.rpe):"",e.lastWeight?" • Last: ".concat(e.lastWeight," lbs"):""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),V(e)},className:"w-5 h-5 rounded-full border border-[#303030] text-[10px] text-neutral-300 flex items-center justify-center","aria-label":"Open ".concat(e.name," guide"),children:"?"}),(0,a.jsxs)("span",{className:"text-xs text-neutral-600",children:[n,"/",e.sets]}),(0,a.jsx)("svg",{className:"w-4 h-4 text-neutral-600 transition-transform ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),s&&(0,a.jsxs)("div",{className:"px-5 pb-5 space-y-3 border-t border-[#1a1a1a]",children:[e.progressionReason&&(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsx)("p",{className:"text-xs text-[#0066FF]/80 bg-[#0066FF]/10 border border-[#0066FF]/20 rounded-lg px-3 py-2",children:e.progressionReason})}),e.lastSets.length>0&&(0,a.jsxs)("div",{className:"pt-3",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-1.5",children:"Last session:"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.lastSets.map((e,t)=>(0,a.jsxs)("span",{className:"text-xs bg-[#0a0a0a] border border-[#262626] px-2 py-1 rounded-lg text-neutral-400",children:[e.weight,"\xd7",e.reps]},t))})]}),(0,a.jsx)("div",{className:"pt-2 space-y-2",children:e.loggedSets.map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-xl border ".concat(e.logged?"bg-[#0066FF]/10 border-[#0066FF]/30":"bg-[#0a0a0a] border-[#262626]"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xs text-neutral-500 w-10",children:e.logged?"✓":"Set ".concat(e.setNumber)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{H(t,s,{weight:Math.max(0,e.weight-2.5)})},className:"w-8 h-8 rounded-lg bg-[#1a1a1a] flex items-center justify-center text-neutral-400 hover:text-white",children:"−"}),(0,a.jsx)("input",{type:"number",value:e.weight,onChange:e=>H(t,s,{weight:parseFloat(e.target.value)||0}),onClick:()=>{R(e.weight)},className:"flex-1 bg-transparent text-center font-bold text-lg focus:outline-none w-16",step:2.5}),(0,a.jsx)("button",{onClick:()=>H(t,s,{weight:e.weight+2.5}),className:"w-8 h-8 rounded-lg bg-[#1a1a1a] flex items-center justify-center text-neutral-400 hover:text-white",children:"+"})]}),(0,a.jsx)("div",{className:"text-center text-xs text-neutral-600",children:"lbs"})]}),(0,a.jsx)("span",{className:"text-neutral-600",children:"\xd7"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>H(t,s,{reps:Math.max(1,e.reps-1)}),className:"w-8 h-8 rounded-lg bg-[#1a1a1a] flex items-center justify-center text-neutral-400 hover:text-white",children:"−"}),(0,a.jsx)("input",{type:"number",value:e.reps,onChange:e=>H(t,s,{reps:parseInt(e.target.value)||0}),className:"flex-1 bg-transparent text-center font-bold text-lg focus:outline-none w-16"}),(0,a.jsx)("button",{onClick:()=>H(t,s,{reps:e.reps+1}),className:"w-8 h-8 rounded-lg bg-[#1a1a1a] flex items-center justify-center text-neutral-400 hover:text-white",children:"+"})]}),(0,a.jsx)("div",{className:"text-center text-xs text-neutral-600",children:"reps"})]}),!e.logged&&(0,a.jsx)("button",{onClick:()=>K(t,s),className:"w-10 h-10 rounded-xl bg-[#0066FF] flex items-center justify-center text-white font-bold text-lg hover:bg-[#0052CC] transition-colors",children:"✓"}),e.isPR&&(0,a.jsx)("span",{className:"text-[#FFB300] text-xs font-bold",children:"PR!"})]})},s))}),(0,a.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,a.jsx)("button",{onClick:()=>{var t;R((null===(t=e.loggedSets[0])||void 0===t?void 0:t.weight)||135),D(!0)},className:"flex-1 py-2.5 bg-[#0a0a0a] border border-[#262626] rounded-xl text-xs text-neutral-400 hover:text-white transition-colors",children:"\uD83D\uDD22 Plate Calc"}),(0,a.jsx)("button",{onClick:()=>{N(e.restSeconds||120),f(!0)},className:"flex-1 py-2.5 bg-[#0a0a0a] border border-[#262626] rounded-xl text-xs text-neutral-400 hover:text-white transition-colors",children:"⏱ Rest Timer"})]})]})]},e.id)})}),(0,a.jsx)("div",{className:"px-5 mt-6",children:(0,a.jsx)("button",{onClick:X,disabled:I,className:"w-full py-4 font-bold rounded-xl transition-all ".concat(I?"bg-neutral-800 text-neutral-500 cursor-not-allowed":"bg-[#0066FF] text-white hover:bg-[#0052CC]"),children:I?"Saving...":"Complete Workout"})})]})}function S(e){let{startTime:t}=e,[s,n]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(e)},[t]),(0,a.jsxs)(a.Fragment,{children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]})}},74691:function(e,t,s){"use strict";s.d(t,{O:function(){return n},U:function(){return l}});var a=s(50965);function l(){(0,a.Z)({particleCount:100,spread:70,origin:{y:.6},colors:["#22c55e","#3b82f6","#f59e0b","#ef4444"]})}function n(){let e=Date.now()+2e3,t=setInterval(()=>{if(Date.now()>e)return clearInterval(t);(0,a.Z)({particleCount:50,angle:60,spread:55,origin:{x:0},colors:["#f59e0b","#fbbf24"]}),(0,a.Z)({particleCount:50,angle:120,spread:55,origin:{x:1},colors:["#f59e0b","#fbbf24"]})},250)}}},function(e){e.O(0,[5321,7604,2971,7023,1744],function(){return e(e.s=19584)}),_N_E=e.O()}]);