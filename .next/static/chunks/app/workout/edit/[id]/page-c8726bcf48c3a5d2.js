(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2841],{50639:function(e,t,r){Promise.resolve().then(r.bind(r,57592))},92171:function(e,t,r){"use strict";r.d(t,{Dz:function(){return s},Oq:function(){return x},cv:function(){return d},dO:function(){return i},iz:function(){return m},jn:function(){return a},oc:function(){return u}});var n=r(59811),s=function(e){var t=e.top,r=e.right,n=e.bottom,s=e.left;return{top:t,right:r,bottom:n,left:s,width:r-s,height:n-t,x:s,y:t,center:{x:(r+s)/2,y:(n+t)/2}}},a=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},o=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},l={top:0,right:0,bottom:0,left:0},i=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?l:r,i=e.border,c=void 0===i?l:i,d=e.padding,u=void 0===d?l:d,x=s(a(t,n)),m=s(o(t,c)),p=s(o(m,u));return{marginBox:x,borderBox:s(t),paddingBox:m,contentBox:p,margin:n,border:c,padding:u}},c=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&(0,n.Z)(!1),r},d=function(e,t){var r=e.borderBox,n=e.border,s=e.margin,a=e.padding;return i({borderBox:{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x},border:n,margin:s,padding:a})},u=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),d(e,t)},x=function(e,t){return i({borderBox:e,margin:{top:c(t.marginTop),right:c(t.marginRight),bottom:c(t.marginBottom),left:c(t.marginLeft)},padding:{top:c(t.paddingTop),right:c(t.paddingRight),bottom:c(t.paddingBottom),left:c(t.paddingLeft)},border:{top:c(t.borderTopWidth),right:c(t.borderRightWidth),bottom:c(t.borderBottomWidth),left:c(t.borderLeftWidth)}})},m=function(e){return x(e.getBoundingClientRect(),window.getComputedStyle(e))}},5686:function(e,t){"use strict";t.Z=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];t=s,r||(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n}},57592:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(57437),s=r(2265),a=r(16463),o=r(3156);let l=["all","chest","back","shoulders","biceps","triceps","legs","core","glutes"];function i(e){let{onAdd:t,onClose:r}=e,[a,o]=(0,s.useState)(""),[i,c]=(0,s.useState)("all"),[d,u]=(0,s.useState)([]),[x,m]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1),[f,h]=(0,s.useState)(""),[g,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(!1);async function y(){if(f.trim()){N(!0);try{let e=await fetch("/api/exercises/custom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,muscleGroups:g})}),r=await e.json();t(r)}finally{N(!1)}}}return(0,s.useEffect)(()=>{m(!0);let e=new URLSearchParams;a&&e.set("q",a),"all"!==i&&e.set("muscle",i),fetch("/api/exercises?".concat(e)).then(e=>e.json()).then(e=>u(e.exercises||[])).catch(()=>{}).finally(()=>m(!1))},[a,i]),(0,n.jsxs)("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-5 pt-8 pb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Add Exercise"}),(0,n.jsx)("button",{onClick:r,className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#1a1a1a] text-neutral-400",children:"✕"})]}),p?(0,n.jsxs)("div",{className:"flex-1 px-5 overflow-y-auto",children:[(0,n.jsx)("button",{onClick:()=>b(!1),className:"text-neutral-400 text-sm mb-4",children:"← Back"}),(0,n.jsx)("h3",{className:"font-bold mb-4",children:"Create Custom Exercise"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs text-neutral-400",children:"Exercise Name"}),(0,n.jsx)("input",{type:"text",value:f,onChange:e=>h(e.target.value),placeholder:"e.g. Landmine Press",autoFocus:!0,className:"mt-1.5 w-full p-3 bg-[#0a0a0a] border border-[#262626] rounded-xl focus:border-[#0066FF] focus:outline-none text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs text-neutral-400 mb-2 block",children:"Muscle Groups (select all that apply)"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:["chest","back","shoulders","biceps","triceps","quads","hamstrings","glutes","core","calves"].map(e=>(0,n.jsx)("button",{onClick:()=>j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),className:"px-3 py-1.5 rounded-xl text-sm capitalize transition-all ".concat(g.includes(e)?"bg-[#0066FF] text-white":"bg-[#1a1a1a] text-neutral-400"),children:e},e))})]}),(0,n.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,n.jsx)("button",{onClick:()=>b(!1),className:"flex-1 py-3 bg-[#1a1a1a] border border-[#262626] rounded-xl text-sm font-semibold",children:"Cancel"}),(0,n.jsx)("button",{onClick:y,disabled:v||!f.trim(),className:"flex-1 py-3 rounded-xl text-sm font-semibold transition-all ".concat(v||!f.trim()?"bg-neutral-800 text-neutral-500":"bg-[#0066FF] text-white"),children:v?"Saving...":"Save & Add"})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-5 mb-3",children:(0,n.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Search exercises...",autoFocus:!0,className:"w-full py-3 px-4 bg-[#141414] border border-[#262626] rounded-xl focus:border-[#0066FF] focus:outline-none text-sm"})}),(0,n.jsx)("div",{className:"flex gap-2 px-5 overflow-x-auto pb-2 mb-2 scrollbar-hide",children:l.map(e=>(0,n.jsx)("button",{onClick:()=>c(e),className:"flex-shrink-0 px-3 py-1.5 rounded-xl text-sm font-medium capitalize transition-all ".concat(i===e?"bg-[#0066FF] text-white":"bg-[#1a1a1a] text-neutral-400"),children:"all"===e?"All":e},e))}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto px-5",children:[x?(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)("div",{className:"w-5 h-5 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}):0===d.length?(0,n.jsx)("p",{className:"text-neutral-500 text-sm text-center py-8",children:"No exercises found"}):(0,n.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,n.jsxs)("button",{onClick:()=>t(e),className:"w-full text-left bg-[#141414] border border-[#262626] rounded-xl p-4 hover:border-[#0066FF]/50 transition-colors flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,n.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5 truncate",children:e.muscleGroups.join(", ")})]}),(0,n.jsx)("span",{className:"text-neutral-500 text-lg",children:"+"})]},e.id))}),(0,n.jsx)("button",{onClick:()=>b(!0),className:"w-full mt-4 py-3 text-[#0066FF] text-sm font-semibold",children:"+ Create Custom Exercise"})]})]})]})}function c(){let e=(0,a.useRouter)(),t=(0,a.useParams)().id,[r,l]=(0,s.useState)(""),[c,d]=(0,s.useState)([]),[u,x]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{fetch("/api/workouts/today").then(e=>e.json()).then(t=>{let r=t.workout;if(!r){e.push("/dashboard");return}l(r.name||""),d((r.exercises||[]).map((e,t)=>({uid:e.id||"ex-".concat(t),exerciseId:e.exerciseId,name:e.name,muscleGroups:e.muscleGroups||[],order:t,sets:e.sets||3,repsMin:e.repsMin||8,repsMax:e.repsMax||12,restSeconds:e.restSeconds||120})))}).catch(()=>e.push("/dashboard")).finally(()=>x(!1))},[e]);let h=(0,s.useCallback)(e=>{e.destination&&d(t=>{let r=Array.from(t),[n]=r.splice(e.source.index,1);return r.splice(e.destination.index,0,n),r.map((e,t)=>({...e,order:t}))})},[]);function g(e,t){d(r=>r.map(r=>r.uid===e?{...r,...t}:r))}async function j(){p(!0);try{await fetch("/api/workouts/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({workoutId:t,name:r,exercises:c.map(e=>({exerciseId:e.exerciseId,order:e.order,sets:e.sets,repsMin:e.repsMin,repsMax:e.repsMax,restSeconds:e.restSeconds}))})}),e.back()}finally{p(!1)}}return u?(0,n.jsx)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"min-h-screen bg-black text-white pb-32",children:[(0,n.jsxs)("header",{className:"px-5 pt-8 pb-4 flex items-center justify-between border-b border-[#1a1a1a]",children:[(0,n.jsx)("button",{onClick:()=>e.back(),className:"text-neutral-400 text-sm",children:"← Cancel"}),(0,n.jsx)("h1",{className:"font-bold",children:"Edit Workout"}),(0,n.jsx)("button",{onClick:j,disabled:m,className:"text-sm font-bold transition-colors ".concat(m?"text-neutral-600":"text-[#0066FF]"),children:m?"Saving...":"Save"})]}),(0,n.jsxs)("div",{className:"px-5 pt-5 space-y-5",children:[(0,n.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Workout Name",className:"w-full bg-[#141414] border border-[#262626] rounded-2xl px-4 py-3 text-xl font-bold focus:border-[#0066FF] focus:outline-none"}),(0,n.jsx)(o.Z5,{onDragEnd:h,children:(0,n.jsx)(o.bK,{droppableId:"exercises",children:e=>(0,n.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-3",children:[c.map((e,t)=>(0,n.jsx)(o._l,{draggableId:e.uid,index:t,children:(t,r)=>(0,n.jsx)("div",{ref:t.innerRef,...t.draggableProps,className:"bg-[#141414] border rounded-2xl p-4 transition-all ".concat(r.isDragging?"border-[#0066FF] shadow-lg shadow-[#0066FF]/20":"border-[#262626]"),children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{...t.dragHandleProps,className:"text-neutral-600 mt-1 cursor-grab active:cursor-grabbing select-none text-lg leading-none",children:"⋮⋮"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,n.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5 truncate",children:e.muscleGroups.join(", ")}),(0,n.jsxs)("div",{className:"flex gap-4 mt-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-[10px] text-neutral-500",children:"Sets"}),(0,n.jsx)("input",{type:"number",value:e.sets,onChange:t=>g(e.uid,{sets:parseInt(t.target.value)||1}),min:1,max:10,className:"block w-14 mt-1 bg-[#0a0a0a] border border-[#262626] rounded-lg px-2 py-1.5 text-center text-sm focus:border-[#0066FF] focus:outline-none"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-[10px] text-neutral-500",children:"Reps"}),(0,n.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,n.jsx)("input",{type:"number",value:e.repsMin,onChange:t=>g(e.uid,{repsMin:parseInt(t.target.value)||1}),min:1,className:"w-12 bg-[#0a0a0a] border border-[#262626] rounded-lg px-1 py-1.5 text-center text-sm focus:border-[#0066FF] focus:outline-none"}),(0,n.jsx)("span",{className:"text-neutral-600",children:"–"}),(0,n.jsx)("input",{type:"number",value:e.repsMax,onChange:t=>g(e.uid,{repsMax:parseInt(t.target.value)||1}),min:1,className:"w-12 bg-[#0a0a0a] border border-[#262626] rounded-lg px-1 py-1.5 text-center text-sm focus:border-[#0066FF] focus:outline-none"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-[10px] text-neutral-500",children:"Rest (s)"}),(0,n.jsx)("input",{type:"number",value:e.restSeconds,onChange:t=>g(e.uid,{restSeconds:parseInt(t.target.value)||60}),step:15,min:30,className:"block w-16 mt-1 bg-[#0a0a0a] border border-[#262626] rounded-lg px-2 py-1.5 text-center text-sm focus:border-[#0066FF] focus:outline-none"})]})]})]}),(0,n.jsx)("button",{onClick:()=>{var t;return t=e.uid,void d(e=>e.filter(e=>e.uid!==t).map((e,t)=>({...e,order:t})))},className:"text-neutral-600 hover:text-red-400 transition-colors text-lg leading-none mt-0.5",children:"\xd7"})]})})},e.uid)),e.placeholder]})})}),(0,n.jsx)("button",{onClick:()=>f(!0),className:"w-full py-4 border-2 border-dashed border-[#262626] rounded-2xl text-neutral-500 hover:border-[#0066FF] hover:text-[#0066FF] transition-colors text-sm font-semibold",children:"+ Add Exercise"})]})]}),b&&(0,n.jsx)(i,{onAdd:function(e){d(t=>[...t,{uid:"new-".concat(Date.now(),"-").concat(e.id),exerciseId:e.id,name:e.name,muscleGroups:e.muscleGroups,order:t.length,sets:3,repsMin:8,repsMax:12,restSeconds:120}]),f(!1)},onClose:()=>f(!1)})]})}},22988:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}r.d(t,{Z:function(){return n}})},59811:function(e,t,r){"use strict";function n(e,t){if(!e)throw Error("Invariant failed")}r.d(t,{Z:function(){return n}})}},function(e){e.O(0,[3338,7081,2971,7023,1744],function(){return e(e.s=50639)}),_N_E=e.O()}]);