(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{94064:function(e,s,t){Promise.resolve().then(t.bind(t,22709))},22709:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return X}});var a=t(57437),l=t(2265),n=t(16463),i=t(87138),r=t(45348),c=t(15321),o=t(32371),d=t(93595),x=t(2359),u=t(1555);function m(e){let{isPremium:s,messageUsed:t}=e,i=(0,n.useRouter)(),[r,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[x,u]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{fetch("/api/coach/morning-checkin").then(e=>e.json()).then(e=>{c(e),setTimeout(()=>u(!0),50)}).catch(()=>d(!1)).finally(()=>d(!1))},[]),o)?(0,a.jsx)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#0066FF]/20 animate-pulse"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-3 bg-[#1e1e1e] rounded w-3/4 animate-pulse"}),(0,a.jsx)("div",{className:"h-3 bg-[#1e1e1e] rounded w-1/2 animate-pulse"})]})]})}):r?(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#0066FF]/30 rounded-2xl p-5 space-y-3 transition-all duration-500 ".concat(x?"opacity-100 translate-y-0":"opacity-0 translate-y-2"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#0066FF] flex items-center justify-center font-bold text-sm flex-shrink-0",children:"AI"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"COACH"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Morning Brief"})]})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-200 leading-relaxed",children:r.message}),s?(0,a.jsx)("button",{onClick:()=>i.push("/coach"),className:"text-xs text-[#0066FF] hover:text-[#4d94ff] transition-colors flex items-center gap-1",children:"Ask your coach anything →"}):t?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"1 of 1 daily coach messages used"}),(0,a.jsxs)("div",{className:"relative bg-[#0a0a0a] border border-[#1e1e1e] rounded-xl p-3 overflow-hidden",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-400 blur-sm select-none",children:"Based on your training load, I'd push the tempo run to 7 miles today and drop RPE to 6/10 on your lifts..."}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("button",{onClick:()=>i.push("/upgrade"),className:"text-xs bg-[#0066FF] text-white px-3 py-1.5 rounded-lg font-semibold hover:bg-[#0052CC] transition-colors",children:"Upgrade for unlimited coaching"})})]})]}):(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"1 of 1 daily coach messages"})]}):null}let h={excellent:"#00C853",good:"#00C853",moderate:"#FFB300",low:"#FF6D00",rest_needed:"#FF1744"},p={excellent:"Excellent",good:"Good",moderate:"Moderate",low:"Low",rest_needed:"Rest Needed"};function f(e){let{isPremium:s}=e,t=(0,n.useRouter)(),[i,r]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{fetch("/api/progress/recovery").then(e=>e.json()).then(r).catch(()=>{}).finally(()=>o(!1))},[]),c)return null;let d=i||{score:72,status:"good",recommendation:"Train as planned today."},x=h[d.status]||"#0066FF",u=2*Math.PI*36,m=u-d.score/100*u;return s?(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-3",children:"Recovery Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative w-20 h-20 flex-shrink-0",children:[(0,a.jsxs)("svg",{className:"w-20 h-20 -rotate-90",viewBox:"0 0 88 88",children:[(0,a.jsx)("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:"#1e1e1e",strokeWidth:"8"}),(0,a.jsx)("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:x,strokeWidth:"8",strokeDasharray:u,strokeDashoffset:m,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.8s ease"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:d.score})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-sm",style:{color:x},children:p[d.status]}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 mt-0.5 leading-relaxed",children:d.recommendation})]})]})]}):(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 blur-sm select-none pointer-events-none",children:[(0,a.jsxs)("div",{className:"relative w-20 h-20 flex-shrink-0",children:[(0,a.jsxs)("svg",{className:"w-20 h-20 -rotate-90",viewBox:"0 0 88 88",children:[(0,a.jsx)("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:"#1e1e1e",strokeWidth:"8"}),(0,a.jsx)("circle",{cx:"44",cy:"44",r:36,fill:"none",stroke:"#00C853",strokeWidth:"8",strokeDasharray:u,strokeDashoffset:m,strokeLinecap:"round"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:"72"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-white",children:"Good"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Train as planned today."})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-2xl",children:(0,a.jsx)("button",{onClick:()=>t.push("/upgrade"),className:"text-xs font-semibold text-[#FFB300] border border-[#FFB300]/30 bg-[#FFB300]/10 px-4 py-2 rounded-xl hover:bg-[#FFB300]/20 transition-colors",children:"\uD83D\uDD12 Unlock Recovery Score — Upgrade"})}),(0,a.jsx)("div",{className:"absolute top-3 left-5",children:(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Recovery"})})]})}function j(e){return e<=3?{emoji:"\uD83D\uDE34",label:"Poor"}:e<=6?{emoji:"\uD83D\uDE10",label:"Ok"}:e<=8?{emoji:"\uD83D\uDE0A",label:"Good"}:{emoji:"\uD83C\uDF1F",label:"Great"}}let b=["None","Mild","Moderate","Severe"];function g(){let[e,s]=(0,l.useState)(!1),[t,n]=(0,l.useState)(!1),[i,r]=(0,l.useState)(7),[c,o]=(0,l.useState)(7),[d,x]=(0,l.useState)("None"),[u,m]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{localStorage.getItem("health_checkin_date")===new Date().toDateString()&&s(!0)},[]),e)return null;async function h(){m(!0);try{await fetch("/api/health",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sleepQuality:i,energyLevel:c,soreness:d})})}catch(e){}localStorage.setItem("health_checkin_date",new Date().toDateString()),n(!0),setTimeout(()=>s(!0),500),m(!1)}let p=j(i),f=j(c);return(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-500",style:t?{opacity:0,maxHeight:0}:{opacity:1,maxHeight:600},children:(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-full bg-[#0066FF]/20 flex items-center justify-center text-lg",children:"\uD83E\uDE7A"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"MORNING CHECK-IN"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"How are you feeling today?"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-200",children:"How did you sleep?"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-white flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:p.emoji}),(0,a.jsx)("span",{className:"text-neutral-400",children:p.label}),(0,a.jsx)("span",{className:"text-[#0066FF]",children:i})]})]}),(0,a.jsx)("input",{type:"range",min:1,max:10,value:i,onChange:e=>r(Number(e.target.value)),className:"w-full h-1.5 rounded-full appearance-none cursor-pointer accent-[#0066FF] bg-[#262626]"}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px] text-neutral-600",children:[(0,a.jsx)("span",{children:"1"}),(0,a.jsx)("span",{children:"10"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-200",children:"Energy level right now?"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-white flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:f.emoji}),(0,a.jsx)("span",{className:"text-neutral-400",children:f.label}),(0,a.jsx)("span",{className:"text-[#0066FF]",children:c})]})]}),(0,a.jsx)("input",{type:"range",min:1,max:10,value:c,onChange:e=>o(Number(e.target.value)),className:"w-full h-1.5 rounded-full appearance-none cursor-pointer accent-[#0066FF] bg-[#262626]"}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px] text-neutral-600",children:[(0,a.jsx)("span",{children:"1"}),(0,a.jsx)("span",{children:"10"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-200",children:"Any soreness or pain?"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:b.map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"py-2 rounded-xl text-xs font-semibold border transition-colors ".concat(d===e?"bg-[#0066FF] border-[#0066FF] text-white":"bg-[#1a1a1a] border-[#262626] text-neutral-400 hover:border-[#0066FF]/50"),children:e},e))})]}),(0,a.jsx)("button",{onClick:h,disabled:u,className:"w-full py-3.5 bg-[#0066FF] hover:bg-[#0052CC] disabled:opacity-50 text-white font-bold rounded-xl transition-colors text-sm",children:u?"Saving…":"Update My Coach"})]})})}let v={Run:"\uD83C\uDFC3",Ride:"\uD83D\uDEB4",Swim:"\uD83C\uDFCA"},N={Run:["Great run! Keep building that base.","Solid effort out there — consistency wins!","Nice work. Every km counts. \uD83D\uDCAA"],Ride:["Nice ride! Recovery spin tomorrow.","Great time on the bike. Stay hydrated!","Solid cycling session. Keep the legs turning."],Swim:["Smooth in the water! Great swim.","Nice pool session — work on those turns.","Strong swim. Your endurance is building."]},y=["Solid session. Keep up the great work!","Every workout brings you closer to your goal.","Nice effort! Rest up and go again. \uD83D\uDCAA"];function w(){var e;let[s,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(!0);(0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/strava/sync");if(!e.ok){r(!1),t([]);return}let s=await e.json(),a=Array.isArray(s)?s:Array.isArray(s.activities)?s.activities:[];0===a.length&&!1===s.stravaConnected&&r(!1),t(a)}catch(e){r(!1),t([])}}()},[]);let c=null!==(e=null==s?void 0:s.slice(0,5))&&void 0!==e?e:[],o=!n||null!==s&&0===s.length;return(0,a.jsxs)("div",{className:"rounded-xl border flex flex-col",style:{backgroundColor:"#141414",borderColor:"#262626"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-6 py-4 border-b",style:{borderColor:"#262626"},children:[(0,a.jsx)("span",{className:"text-sm font-black tracking-widest",style:{color:"#FC4C02"},children:"STRAVA"}),(0,a.jsx)("h2",{className:"text-white font-semibold text-base",children:"Recent Activity"})]}),(0,a.jsx)("div",{className:"flex flex-col divide-y",style:{borderColor:"#262626"},children:null===s?Array.from({length:3}).map((e,s)=>(0,a.jsxs)("div",{className:"px-6 py-4 flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"h-4 w-48 animate-pulse rounded",style:{backgroundColor:"#262626"}}),(0,a.jsx)("div",{className:"h-3 w-32 animate-pulse rounded",style:{backgroundColor:"#262626"}})]},s)):o?(0,a.jsxs)("div",{className:"px-6 py-8 flex flex-col items-center gap-3 text-center",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83C\uDFC3"}),(0,a.jsx)("p",{className:"text-sm",style:{color:"#a0a0a0"},children:"No activities yet."}),(0,a.jsx)(i.default,{href:"/settings",className:"text-sm font-semibold transition-opacity hover:opacity-80",style:{color:"#0066FF"},children:"Connect Strava to see your runs here →"})]}):c.map((e,s)=>{var t,l;return(0,a.jsxs)("div",{className:"px-6 py-4 flex flex-col gap-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{className:"text-lg leading-none flex-shrink-0",children:null!==(t=v[e.type])&&void 0!==t?t:"\uD83C\uDFCB️"}),(0,a.jsx)("span",{className:"text-white text-sm font-semibold truncate",children:e.name})]}),(0,a.jsx)("span",{className:"text-xs flex-shrink-0",style:{color:"#a0a0a0"},children:function(e){let s=new Date,t=new Date(e),a=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=Math.round((a.getTime()-l.getTime())/864e5);return 0===n?"Today":1===n?"Yesterday":"".concat(n," days ago")}(e.startDate)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",style:{color:"#0066FF"},children:(e.distance/1e3).toFixed(1)+" km"}),(0,a.jsx)("span",{className:"text-xs",style:{color:"#a0a0a0"},children:(l=e.avgPace)&&!(l<=0)?"".concat(Math.floor(l/60),":").concat(Math.round(l%60).toString().padStart(2,"0")," /km"):"—"})]}),(0,a.jsx)("p",{className:"text-xs italic",style:{color:"#737373"},children:function(e,s){var t;let a=null!==(t=N[e])&&void 0!==t?t:y;return a[s%a.length]}(e.type,s)})]},e.id)})})]})}let k={info:{bg:"bg-blue-950/50",border:"border-[#0066FF]/40",icon:"ℹ️",label:"Info"},warning:{bg:"bg-yellow-950/50",border:"border-yellow-500/40",icon:"⚠️",label:"Warning"},alert:{bg:"bg-red-950/50",border:"border-red-500/40",icon:"\uD83D\uDEA8",label:"Alert"}};function F(e){let{flags:s,onDismiss:t}=e,[n,i]=(0,l.useState)(null),[r,c]=(0,l.useState)(new Set),o=s.filter(e=>!r.has(e.id));return 0===o.length?null:(0,a.jsx)("div",{className:"space-y-2",children:o.map(e=>{var s;let l=null!==(s=k[e.severity])&&void 0!==s?s:k.info,r=n===e.id;return(0,a.jsx)("div",{className:"".concat(l.bg," border ").concat(l.border," rounded-2xl p-4"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl flex-shrink-0",children:l.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-white leading-relaxed",children:r?e.message:e.message.slice(0,80)+(e.message.length>80?"...":"")}),e.message.length>80&&(0,a.jsx)("button",{onClick:()=>i(r?null:e.id),className:"text-xs text-neutral-400 mt-1",children:r?"Show less":"See recommendations"})]}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void(c(e=>new Set([...e,s])),fetch("/api/injury/acknowledge",{method:"POST",body:JSON.stringify({id:s})}).catch(()=>{}),null==t||t(s))},className:"text-neutral-600 hover:text-neutral-300 text-lg flex-shrink-0",children:"\xd7"})]})},e.id)})})}function D(e){let{className:s}=e;return(0,a.jsx)("div",{className:"rounded-lg ".concat(s),style:{background:"linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}function C(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }"}),(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-5 py-4 border-b border-[#262626] flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{className:"h-3 w-16"}),(0,a.jsx)(D,{className:"h-5 w-32"}),(0,a.jsx)(D,{className:"h-3 w-20"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(D,{className:"h-9 w-16"}),(0,a.jsx)(D,{className:"h-9 w-20"})]})]}),(0,a.jsx)("div",{className:"px-5 py-4 space-y-3",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(D,{className:"h-4 w-36"}),(0,a.jsx)(D,{className:"h-3 w-24"})]},e))})]})]})}function S(){return(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,a.jsx)("style",{children:"@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }"}),(0,a.jsx)("header",{className:"px-6 pt-8 pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{className:"h-3 w-12"}),(0,a.jsx)(D,{className:"h-7 w-40"}),(0,a.jsx)(D,{className:"h-3 w-24"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-right",children:[(0,a.jsx)(D,{className:"h-3 w-16 ml-auto"}),(0,a.jsx)(D,{className:"h-3 w-20 ml-auto"})]})]})}),(0,a.jsxs)("div",{className:"px-6 space-y-5",children:[(0,a.jsx)("div",{className:"flex gap-2 overflow-hidden",children:[1,2,3].map(e=>(0,a.jsx)(D,{className:"h-8 w-24 flex-shrink-0 rounded-full"},e))}),(0,a.jsx)(D,{className:"h-24 w-full"}),(0,a.jsx)(C,{}),(0,a.jsx)(D,{className:"h-28 w-full"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(D,{className:"h-24 w-full"}),(0,a.jsx)(D,{className:"h-24 w-full"})]})]})]})}let E=[{level:1,name:"Rookie",minXP:0,maxXP:500},{level:2,name:"Athlete",minXP:500,maxXP:1500},{level:3,name:"Competitor",minXP:1500,maxXP:3500},{level:4,name:"Elite",minXP:3500,maxXP:7e3},{level:5,name:"Champion",minXP:7e3,maxXP:15e3},{level:6,name:"Legend",minXP:15e3,maxXP:1/0}];function P(e){let s=[...E].reverse().find(s=>e>=s.minXP);return null!=s?s:E[0]}var A=t(74691),R=t(8837);function M(){var e;let s=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[h,p]=(0,l.useState)(!0),[j,b]=(0,l.useState)(null),[v,N]=(0,l.useState)(null),[y,k]=(0,l.useState)(0),[D,C]=(0,l.useState)(0),[E,M]=(0,l.useState)("Athlete"),[X,T]=(0,l.useState)(null),[W,B]=(0,l.useState)(!1),[U,I]=(0,l.useState)(!1),[L,O]=(0,l.useState)([]),[G,_]=(0,l.useState)(!1);async function Z(){try{let[i,r,c,o]=await Promise.all([fetch("/api/workouts/today"),fetch("/api/nutrition"),fetch("/api/user/profile"),fetch("/api/coach/check-limit")]),d=await i.json();if(d.needsOnboarding){s.push("/onboarding");return}if(b(d),r.ok){let e=await r.json();N(e)}if(c.ok){var e,t,a,l,n;let s=await c.json();k((null===(e=s.streak)||void 0===e?void 0:e.currentStreak)||0),C((null===(t=s.streak)||void 0===t?void 0:t.totalXP)||0),M((null===(l=s.profile)||void 0===l?void 0:null===(a=l.name)||void 0===a?void 0:a.split(" ")[0])||"Athlete"),T(s.avatarUrl||null);let i=(null===(n=s.subscription)||void 0===n?void 0:n.tier)||"free";B("free"!==i)}if(o.ok){let e=await o.json();I(0===e.remaining)}fetch("/api/injury/list").then(e=>e.ok?e.json():null).then(e=>{(null==e?void 0:e.flags)&&O(e.flags)}).catch(()=>{})}catch(e){console.error(e)}finally{p(!1)}}(0,l.useEffect)(()=>{Z()},[s]),(0,l.useEffect)(()=>{"true"===t.get("upgraded")&&(_(!0),(0,A.U)(),s.replace("/dashboard"))},[t,s]);let H=new Date().toLocaleDateString("en-US",{weekday:"long"}),z=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"});if(h)return(0,a.jsx)(S,{});let K=new Date().getHours(),Y=K<12?"Good morning, ".concat(E," ☀️"):K<17?"Good afternoon, ".concat(E," \uD83D\uDCAA"):K<21?"Evening session, ".concat(E," \uD83C\uDF19"):"Late night grind, ".concat(E," \uD83D\uDD25"),J=function(e,s){if(s)return"from-purple-950/30 via-neutral-950 to-black";if(!e)return"from-neutral-950 to-black";let t=e.toLowerCase();return t.includes("run")||t.includes("cardio")||t.includes("bike")||t.includes("swim")?"from-cyan-950/40 via-neutral-950 to-black":t.includes("push")||t.includes("chest")||t.includes("upper")||t.includes("pull")||t.includes("back")?"from-red-950/30 via-neutral-950 to-black":t.includes("leg")||t.includes("lower")||t.includes("squat")?"from-orange-950/30 via-neutral-950 to-black":"from-blue-950/30 via-neutral-950 to-black"}(null==j?void 0:null===(e=j.workout)||void 0===e?void 0:e.name,null==j?void 0:j.isRestDay),q=P(D),Q=function(e){let s=P(e);return s.maxXP===1/0?100:Math.min(100,(e-s.minXP)/(s.maxXP-s.minXP)*100)}(D),V=v?Math.min(100,v.totals.calories/v.targets.calories*100):0,$=v?Math.min(100,v.totals.protein/v.targets.protein*100):0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.M,{children:G&&(0,a.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-6",children:(0,a.jsxs)(c.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:20},className:"bg-[#141414] border border-[#00C853]/40 rounded-3xl p-8 max-w-sm w-full text-center space-y-5",children:[(0,a.jsx)("div",{className:"text-6xl",children:"\uD83C\uDF89"}),(0,a.jsx)("h2",{className:"text-2xl font-black",children:"Welcome to Premium!"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-neutral-300",children:["Unlimited AI coach chat","Adaptive program updates","Race programming + taper","Nutrition AI coach","Injury prevention alerts"].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[#00C853]",children:"✓"}),e]},e))}),(0,a.jsx)("button",{onClick:()=>_(!1),className:"w-full py-4 bg-[#00C853] text-black font-black rounded-2xl",children:"Let's Go →"})]})})}),(0,a.jsx)(x.Z,{}),(0,a.jsx)(d.Z,{onRefresh:Z,children:(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-b ".concat(J," text-white pb-24"),children:[(0,a.jsxs)("header",{className:"px-6 pt-8 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,a.jsx)(c.E.h1,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-2xl font-bold mt-1",children:Y}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:z})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-500",children:["WEEK ",(null==j?void 0:j.currentWeek)||1]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-400 mt-0.5",children:[(null==j?void 0:j.workoutsThisWeek)||0,"/",(null==j?void 0:j.daysPerWeek)||4," this week"]})]}),(0,a.jsx)(i.default,{href:"/profile",children:(0,a.jsx)(R.Z,{user:{name:E,avatarUrl:X},size:"md"})})]})]}),(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{delay:.15,duration:.4},className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsxs)("span",{className:"text-xs font-bold text-[#FFB300] tracking-wide",children:["Lv.",q.level," \xb7 ",q.name]}),(0,a.jsxs)("span",{className:"text-xs text-neutral-500",children:[D," XP"]})]}),(0,a.jsx)("div",{className:"h-1.5 bg-[#1a1a1a] rounded-full overflow-hidden",children:(0,a.jsx)(c.E.div,{initial:{width:0},animate:{width:"".concat(Q,"%")},transition:{delay:.3,duration:.8,ease:"easeOut"},className:"h-full bg-gradient-to-r from-[#FFB300] to-[#FF6B00] rounded-full"})})]})]}),(0,a.jsxs)("div",{className:"px-6 space-y-5",children:[L.length>0&&(0,a.jsx)(F,{flags:L,onDismiss:e=>O(s=>s.filter(s=>s.id!==e))}),(0,a.jsxs)(c.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2,duration:.4},className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 bg-[#1a1a1a] border border-[#262626] rounded-full px-3 py-1.5 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-sm",style:{animation:y>=3?"pulse 2s infinite":void 0},children:"\uD83D\uDD25"}),(0,a.jsx)("span",{className:"text-xs font-bold text-white",children:y}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:"streak"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 bg-[#1a1a1a] border border-[#262626] rounded-full px-3 py-1.5 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-sm",children:"\uD83D\uDCAA"}),(0,a.jsx)("span",{className:"text-xs font-bold text-white",children:(null==j?void 0:j.workoutsThisWeek)||0}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:"workouts"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 bg-[#1a1a1a] border border-[#262626] rounded-full px-3 py-1.5 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-sm",children:"\uD83D\uDCC5"}),(0,a.jsx)("span",{className:"text-xs font-bold text-white",children:H})]})]}),(0,a.jsx)(g,{}),(0,a.jsx)(m,{isPremium:W,messageUsed:U}),(0,a.jsx)(f,{isPremium:W}),(null==j?void 0:j.isRestDay)?(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.25,duration:.4},className:"bg-[#141414] border border-[#262626] rounded-2xl p-6 text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDE34"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Rest Day"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:j.message||"Rest well. Growth happens here."})]}):(null==j?void 0:j.workout)?(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.25,duration:.4},whileHover:{y:-2},className:"relative bg-[#141414] rounded-2xl overflow-hidden",style:{border:"1px solid transparent",backgroundClip:"padding-box"},children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:"linear-gradient(135deg, #0066FF40, #00C85340, #0066FF40)",backgroundSize:"200% 200%",animation:"gradientShift 4s ease infinite",zIndex:0}}),(0,a.jsx)("style",{children:"\n              @keyframes gradientShift {\n                0% { background-position: 0% 50%; }\n                50% { background-position: 100% 50%; }\n                100% { background-position: 0% 50%; }\n              }\n            "}),(0,a.jsxs)("div",{className:"relative z-10 m-px bg-[#141414] rounded-2xl",children:[(0,a.jsxs)("div",{className:"px-5 py-4 border-b border-[#262626]",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Today's Workout"}),(0,a.jsx)("h2",{className:"text-xl font-bold mt-1",children:j.workout.name}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-0.5",children:[j.workout.exercises.length," exercises"]})]}),(0,a.jsxs)("div",{className:"px-5 py-4 space-y-3",children:[j.workout.exercises.slice(0,4).map((e,s)=>(0,a.jsxs)(c.E.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:.3+.05*s},className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-neutral-200",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-neutral-500",children:[e.sets," \xd7 ",e.repsMin,"–",e.repsMax,e.lastWeight?" • ".concat(e.lastWeight," lbs"):""]})]},e.id)),j.workout.exercises.length>4&&(0,a.jsxs)("p",{className:"text-xs text-neutral-600",children:["+",j.workout.exercises.length-4," more"]})]}),(0,a.jsxs)("div",{className:"px-5 pb-5 flex gap-2",children:[(0,a.jsx)(i.default,{href:"/workout/edit/".concat(j.workout.id),className:"flex-1 py-3 text-center text-[#0066FF] text-sm font-semibold border border-[#0066FF]/30 rounded-xl hover:bg-[#0066FF]/10 transition-colors",children:"Edit"}),(0,a.jsx)(i.default,{href:"/workout/".concat(j.workout.id),className:"flex-[2] py-3 text-center bg-[#0066FF] text-white text-sm font-bold rounded-xl hover:bg-[#0052CC] transition-colors",children:j.inProgressLog?"Resume →":"Let&apos;s Go →"})]})]})]}):null,(0,a.jsx)(u.Z,{}),(0,a.jsx)(w,{}),v&&(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Nutrition"}),(0,a.jsx)(i.default,{href:"/nutrition",className:"text-xs text-[#0066FF] hover:text-[#0052CC] transition-colors",children:"Log meal →"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,a.jsx)("span",{className:"text-neutral-400",children:"Calories"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-semibold",children:Math.round(v.totals.calories)}),(0,a.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(v.targets.calories)]})]})]}),(0,a.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#0066FF] rounded-full transition-all",style:{width:"".concat(V,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,a.jsx)("span",{className:"text-neutral-400",children:"Protein"}),(0,a.jsxs)("span",{children:[(0,a.jsxs)("span",{className:"font-semibold",children:[Math.round(v.totals.protein),"g"]}),(0,a.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(v.targets.protein),"g"]})]})]}),(0,a.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-[#00C853] rounded-full transition-all",style:{width:"".concat($,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(c.E.div,{whileTap:{scale:.97},children:(0,a.jsxs)(i.default,{href:"/history",className:"block bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"This Week"}),(0,a.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[(null==j?void 0:j.workoutsThisWeek)||0,(0,a.jsxs)("span",{className:"text-lg text-neutral-500 font-normal",children:[" / ",(null==j?void 0:j.daysPerWeek)||4]})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"workouts"})]})}),(0,a.jsx)(c.E.div,{whileTap:{scale:.97},children:(0,a.jsxs)(i.default,{href:"/progress",className:"block bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#FFB300]/50 transition-colors",children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Streak"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)("span",{className:"text-3xl font-bold",children:y}),(0,a.jsx)("span",{className:"text-lg text-neutral-500 font-normal ml-1",children:"days"}),y>=3&&(0,a.jsx)("span",{className:"text-xl ml-1",children:"\uD83D\uDD25"})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:0===y?"Start your streak today!":y>=7?"On fire! \uD83C\uDFC6":"Keep going"})]})})]})]}),(0,a.jsx)(o.Z,{active:"home"})]})})]})}function X(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("main",{className:"min-h-screen bg-black"}),children:(0,a.jsx)(M,{})})}},8837:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(57437);let l={xs:"w-6 h-6 text-[10px]",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-xl",xl:"w-24 h-24 text-3xl"};function n(e){let{user:s,size:t="md",className:n=""}=e,i=s.name||"Athlete",r="rounded-full overflow-hidden border border-white/15 flex items-center justify-center font-semibold ".concat(l[t]," ").concat(n);return s.avatarUrl?(0,a.jsx)("div",{className:r,children:(0,a.jsx)("img",{src:s.avatarUrl,alt:i,className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:r,style:{backgroundColor:function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t);let t=["#14532d","#1d4ed8","#7c2d12","#4c1d95","#0f766e","#9a3412"];return t[Math.abs(s)%t.length]}(i)},children:function(e){let s=e.trim().split(/\s+/).filter(Boolean);return s.length<=1?(s[0]||"?").slice(0,2).toUpperCase():(s[0][0]+s[1][0]).toUpperCase()}(i)})}},74691:function(e,s,t){"use strict";t.d(s,{O:function(){return n},U:function(){return l}});var a=t(50965);function l(){(0,a.Z)({particleCount:100,spread:70,origin:{y:.6},colors:["#22c55e","#3b82f6","#f59e0b","#ef4444"]})}function n(){let e=Date.now()+2e3,s=setInterval(()=>{if(Date.now()>e)return clearInterval(s);(0,a.Z)({particleCount:50,angle:60,spread:55,origin:{x:0},colors:["#f59e0b","#fbbf24"]}),(0,a.Z)({particleCount:50,angle:120,spread:55,origin:{x:1},colors:["#f59e0b","#fbbf24"]})},250)}}},function(e){e.O(0,[7138,5321,7604,6106,6791,2971,7023,1744],function(){return e(e.s=94064)}),_N_E=e.O()}]);