(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4064:function(e,t,s){Promise.resolve().then(s.bind(s,7690))},7690:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),n=s(2265),l=s(6463),a=s(7138),i=s(2371),o=s(3595);function c(){let[e,t]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0);function a(){let e=new Date().toISOString().slice(0,10);localStorage.setItem("weeklySummaryShown",e),l(!0)}return((0,n.useEffect)(()=>{let e=new Date;1===e.getDay()&&localStorage.getItem("weeklySummaryShown")!==e.toISOString().slice(0,10)&&fetch("/api/progress/weekly").then(e=>e.json()).then(e=>{e.totalWorkouts>0&&(t(e),l(!1))}).catch(()=>{})},[]),s||!e)?null:(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-3xl w-full max-w-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-[#0066FF] font-bold tracking-widest",children:"WEEKLY RECAP"}),(0,r.jsx)("h2",{className:"text-xl font-bold mt-1",children:"Last Week"})]}),(0,r.jsx)("button",{onClick:a,className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#1a1a1a] text-neutral-400",children:"✕"})]}),void 0!==e.overallScore&&(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center font-bold text-2xl border-4",style:{borderColor:e.overallScore>=80?"#00C853":e.overallScore>=60?"#FFB300":"#FF4444",color:e.overallScore>=80?"#00C853":e.overallScore>=60?"#FFB300":"#FF4444"},children:e.overallScore}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:"Overall Score"}),(0,r.jsxs)("div",{className:"text-sm text-neutral-400",children:[e.totalWorkouts," workout",1!==e.totalWorkouts?"s":""," \xb7 ",Math.round(e.complianceRate),"% compliance"]})]})]}),e.motivationalNote&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-[#0066FF]/10 border border-[#0066FF]/20 rounded-xl",children:(0,r.jsxs)("p",{className:"text-sm text-[#60A5FA] italic",children:['"',e.motivationalNote,'"']})}),e.insights.length>0&&(0,r.jsxs)("div",{className:"text-sm text-neutral-300 mb-3",children:[(0,r.jsx)("span",{className:"text-neutral-500",children:"Insight: "}),e.insights[0]]}),e.recommendations.length>0&&(0,r.jsx)("div",{className:"p-3 bg-[#00C853]/10 border border-[#00C853]/20 rounded-xl text-sm text-[#00C853] mb-4",children:e.recommendations[0]})]}),(0,r.jsxs)("div",{className:"px-5 pb-5 flex gap-3",children:[(0,r.jsx)("button",{onClick:a,className:"flex-1 py-3 bg-[#0a0a0a] border border-[#262626] rounded-xl font-semibold text-sm",children:"Dismiss"}),(0,r.jsx)("button",{onClick:()=>{a(),window.location.href="/progress/weekly"},className:"flex-1 py-3 bg-[#0066FF] text-white rounded-xl font-semibold text-sm",children:"Full Report"})]})]})})}function d(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[m,f]=(0,n.useState)(0);async function v(){try{let[s,r,n]=await Promise.all([fetch("/api/workouts/today"),fetch("/api/nutrition"),fetch("/api/user/profile")]),l=await s.json();if(l.needsOnboarding){e.push("/onboarding");return}if(u(l),r.ok){let e=await r.json();h(e)}if(n.ok){var t;let e=await n.json();f((null===(t=e.streak)||void 0===t?void 0:t.currentStreak)||0)}}catch(e){console.error(e)}finally{s(!1)}}(0,n.useEffect)(()=>{v()},[e]);let j=new Date().toLocaleDateString("en-US",{weekday:"long"}),p=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"});if(t)return(0,r.jsx)("main",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})});let b=x?Math.min(100,x.totals.calories/x.targets.calories*100):0,N=x?Math.min(100,x.totals.protein/x.targets.protein*100):0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(o.Z,{onRefresh:v,children:(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,r.jsx)("header",{className:"px-6 pt-8 pb-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-1",children:j}),(0,r.jsx)("p",{className:"text-neutral-500 text-sm",children:p})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-xs text-neutral-500",children:["WEEK ",(null==d?void 0:d.currentWeek)||1]}),(0,r.jsxs)("div",{className:"text-xs text-neutral-400 mt-0.5",children:[(null==d?void 0:d.workoutsThisWeek)||0,"/",(null==d?void 0:d.daysPerWeek)||4," this week"]})]})]})}),(0,r.jsxs)("div",{className:"px-6 space-y-5",children:[(null==d?void 0:d.isRestDay)?(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-6 text-center space-y-3",children:[(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDE34"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Rest Day"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500",children:d.message||"Rest well. Growth happens here."})]}):(null==d?void 0:d.workout)?(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-5 py-4 border-b border-[#262626] flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Today"}),(0,r.jsx)("h2",{className:"text-lg font-bold mt-0.5",children:d.workout.name}),(0,r.jsxs)("p",{className:"text-xs text-neutral-500 mt-0.5",children:[d.workout.exercises.length," exercises"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(a.default,{href:"/workout/edit/".concat(d.workout.id),className:"px-3 py-2 text-[#0066FF] text-sm font-semibold border border-[#0066FF]/30 rounded-xl hover:bg-[#0066FF]/10 transition-colors",children:"Edit"}),(0,r.jsx)(a.default,{href:"/workout/".concat(d.workout.id),className:"px-5 py-2.5 bg-[#0066FF] text-white text-sm font-bold rounded-xl hover:bg-[#0052CC] transition-colors",children:d.inProgressLog?"Resume":"Start"})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4 space-y-3",children:[d.workout.exercises.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-neutral-200",children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-neutral-500",children:[e.sets," \xd7 ",e.repsMin,"–",e.repsMax,e.lastWeight?" • ".concat(e.lastWeight," lbs"):""]})]},e.id)),d.workout.exercises.length>4&&(0,r.jsxs)("p",{className:"text-xs text-neutral-600",children:["+",d.workout.exercises.length-4," more"]})]})]}):null,x&&(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Nutrition"}),(0,r.jsx)(a.default,{href:"/nutrition",className:"text-xs text-[#0066FF] hover:text-[#0052CC] transition-colors",children:"Log meal →"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,r.jsx)("span",{className:"text-neutral-400",children:"Calories"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-semibold",children:Math.round(x.totals.calories)}),(0,r.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(x.targets.calories)]})]})]}),(0,r.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-[#0066FF] rounded-full transition-all",style:{width:"".concat(b,"%")}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[(0,r.jsx)("span",{className:"text-neutral-400",children:"Protein"}),(0,r.jsxs)("span",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[Math.round(x.totals.protein),"g"]}),(0,r.jsxs)("span",{className:"text-neutral-500",children:[" / ",Math.round(x.targets.protein),"g"]})]})]}),(0,r.jsx)("div",{className:"h-2 bg-[#0a0a0a] rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-[#00C853] rounded-full transition-all",style:{width:"".concat(N,"%")}})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(a.default,{href:"/history",className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"This Week"}),(0,r.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[(null==d?void 0:d.workoutsThisWeek)||0,(0,r.jsxs)("span",{className:"text-lg text-neutral-500 font-normal",children:[" / ",(null==d?void 0:d.daysPerWeek)||4]})]}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"workouts"})]}),(0,r.jsxs)(a.default,{href:"/progress",className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 hover:border-[#0066FF]/50 transition-colors",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Streak"}),(0,r.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[m,(0,r.jsx)("span",{className:"text-lg text-neutral-500 font-normal",children:" days"})]}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:m>=7?"\uD83D\uDD25 On fire!":"Keep going"})]})]})]}),(0,r.jsx)(i.Z,{active:"home"})]})})]})}},2371:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),n=s(7138),l=s(6463),a=s(2265);let i=[{id:"home",label:"Home",href:"/dashboard",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"nutrition",label:"Nutrition",href:"/nutrition",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"progress",label:"Progress",href:"/progress",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=["home","nutrition","coach","progress","profile"];function c(e){let{active:t}=e,s=(0,l.useRouter)(),c=o.indexOf(t);return!function(e){let{onSwipeLeft:t,onSwipeRight:s,threshold:r=60}=e,n=(0,a.useRef)(null),l=(0,a.useRef)(null);(0,a.useEffect)(()=>{function e(e){n.current=e.touches[0].clientX,l.current=e.touches[0].clientY}function a(e){if(null===n.current||null===l.current)return;let a=e.changedTouches[0].clientX-n.current;Math.abs(a)>Math.abs(e.changedTouches[0].clientY-l.current)&&Math.abs(a)>r&&(a<0?null==t||t():null==s||s()),n.current=null,l.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",a,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",a)}},[t,s,r])}({onSwipeLeft:()=>{c<o.length-1&&s.push(i.find(e=>e.id===o[c+1]).href)},onSwipeRight:()=>{c>0&&s.push(i.find(e=>e.id===o[c-1]).href)}}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,r.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:i.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(t===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,r.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}},3595:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437),n=s(2265);function l(e){let{onRefresh:t,children:s}=e,{pullDistance:l,pullProgress:a,refreshing:i}=function(e){let{onRefresh:t,threshold:s=80}=e,[r,l]=(0,n.useState)(0),[a,i]=(0,n.useState)(!1),o=(0,n.useRef)(null),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=c.current||document.documentElement;function n(e){0===window.scrollY&&(o.current=e.touches[0].clientY)}function d(e){if(null===o.current||a)return;let t=e.touches[0].clientY-o.current;t>0&&0===window.scrollY&&(l(Math.min(t,1.5*s)),t>20&&e.preventDefault())}async function u(){if(null!==o.current){if(r>=s&&!a){i(!0),l(0);try{await t()}finally{i(!1)}}else l(0);o.current=null}}return e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",d,{passive:!1}),e.addEventListener("touchend",u),()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",d),e.removeEventListener("touchend",u)}},[r,a,t,s]);let d=Math.min(r/s,1);return{containerRef:c,pullDistance:r,pullProgress:d,refreshing:a}}({onRefresh:t});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{height:"".concat(Math.max(0,.5*l),"px"),overflow:"hidden",transition:0===l?"height 0.2s ease":"none"},className:"flex items-center justify-center",children:(l>0||i)&&(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 py-2",children:[i?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"}):(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-[#0066FF] border-t-transparent rounded-full",style:{transform:"rotate(".concat(360*a,"deg)"),opacity:a}}),(0,r.jsx)("span",{className:"text-[10px] text-neutral-500",children:i?"Refreshing...":a>=1?"Release to refresh":"Pull to refresh"})]})}),s]})}}},function(e){e.O(0,[291,971,23,744],function(){return e(e.s=4064)}),_N_E=e.O()}]);