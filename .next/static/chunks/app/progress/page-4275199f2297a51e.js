(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{5026:function(e,t,s){Promise.resolve().then(s.bind(s,9003))},9003:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7437),a=s(2265),l=s(6463),n=s(2371);function i(){let[e,t]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{fetch("/api/workouts/log?limit=200").then(e=>e.json()).then(e=>{let s=new Set;for(let t of e.logs||[])s.add(new Date(t.startedAt).toISOString().slice(0,10));t(s)}).catch(()=>{})},[]);let s=new Date;s.setHours(0,0,0,0);let l=s.getDay(),n=new Date(s);n.setDate(s.getDate()-83-l);let i=[],o=new Date(n);for(;o<=s;){let e=[];for(let t=0;t<7;t++)new Date(o)<=s&&e.push(new Date(o)),o.setDate(o.getDate()+1);e.length&&i.push(e)}return(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm mb-3 text-neutral-300",children:"Workout Activity"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("div",{className:"flex gap-1 min-w-max",children:[(0,r.jsx)("div",{className:"flex flex-col gap-1 mr-1",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-[8px] text-neutral-600",children:t%2==1?e:""})},t))}),i.map((t,a)=>(0,r.jsx)("div",{className:"flex flex-col gap-1",children:Array.from({length:7},(a,l)=>{let n=t[l];if(!n)return(0,r.jsx)("div",{className:"w-3 h-3"},l);let i=n.toISOString().slice(0,10),o=e.has(i),c=i===s.toISOString().slice(0,10);return(0,r.jsx)("div",{className:"w-3 h-3 rounded-sm ".concat(o?"bg-[#0066FF]":c?"bg-[#1a1a1a] border border-[#0066FF]/50":"bg-[#1a1a1a]"),title:"".concat(i).concat(o?" â€” workout":"")},l)})},a))]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-sm bg-[#1a1a1a]"}),(0,r.jsx)("span",{className:"text-[10px] text-neutral-600",children:"Rest"}),(0,r.jsx)("div",{className:"w-3 h-3 rounded-sm bg-[#0066FF] ml-2"}),(0,r.jsx)("span",{className:"text-[10px] text-neutral-600",children:"Workout"})]})]})}function o(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)({}),[o,c]=(0,a.useState)(null),[d,x]=(0,a.useState)(!0),[u,h]=(0,a.useState)(0),[m,f]=(0,a.useState)([]),[p,v]=(0,a.useState)(0);(0,a.useEffect)(()=>{!async function(){try{let[t,r,a,l]=await Promise.all([fetch("/api/progress/prs"),fetch("/api/workouts/log?limit=100"),fetch("/api/user/profile"),fetch("/api/achievements")]);if(t.ok){let e=await t.json();s(e.byExercise||{})}if(r.ok){let e=(await r.json()).logs||[],t=new Date,s=new Date(t);s.setDate(t.getDate()-(t.getDay()+6)%7),s.setHours(0,0,0,0);let a=e.filter(e=>new Date(e.startedAt)>=s).length,l=0,n=0;for(let t of e)for(let e of t.exerciseLogs||[])for(let t of e.sets||[])l+=t.weight*t.reps,n++;c({totalWorkouts:e.length,totalVolume:l,totalSets:n,thisWeek:a,daysPerWeek:4})}if(a.ok){var e;let t=await a.json();h((null===(e=t.streak)||void 0===e?void 0:e.currentStreak)||0),o&&c(e=>{var s;return e?{...e,daysPerWeek:(null===(s=t.profile)||void 0===s?void 0:s.trainingDays)||4}:e})}if(l.ok){let e=await l.json();f(e.achievements||[]),v(e.totalXP||0)}}catch(e){console.error(e)}finally{x(!1)}}()},[]);let j=Object.keys(t);return(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white pb-28",children:[(0,r.jsxs)("header",{className:"px-6 pt-8 pb-4",children:[(0,r.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-1",children:"Progress"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500",children:"Your performance data"})]}),(0,r.jsxs)("div",{className:"px-6 space-y-5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Streak"}),(0,r.jsx)("div",{className:"text-3xl font-bold mt-1 text-[#0066FF]",children:u}),(0,r.jsxs)("div",{className:"text-xs text-neutral-500 mt-0.5",children:["days ",u>=7?"\uD83D\uDD25":""]})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Workouts"}),(0,r.jsx)("div",{className:"text-3xl font-bold mt-1",children:(null==o?void 0:o.totalWorkouts)||0}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"total completed"})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Total Volume"}),(0,r.jsx)("div",{className:"text-2xl font-bold mt-1",children:(null==o?void 0:o.totalVolume)?"".concat((o.totalVolume/1e3).toFixed(1),"k"):"0"}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"lbs lifted"})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Total Sets"}),(0,r.jsx)("div",{className:"text-2xl font-bold mt-1",children:(null==o?void 0:o.totalSets)||0}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"sets logged"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/progress/weekly"),className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 text-left hover:border-[#0066FF]/50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC5"}),(0,r.jsx)("div",{className:"font-semibold text-sm",children:"Weekly"}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Report"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/progress/analytics"),className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 text-left hover:border-[#0066FF]/50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCA"}),(0,r.jsx)("div",{className:"font-semibold text-sm",children:"Analytics"}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Trends"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/progress/measurements"),className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 text-left hover:border-[#0066FF]/50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCF"}),(0,r.jsx)("div",{className:"font-semibold text-sm",children:"Body"}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Measurements"})]})]}),(0,r.jsx)(i,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-3",children:"Personal Records"}),d?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}):0===j.length?(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-8 text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDFC6"}),(0,r.jsx)("p",{className:"font-semibold",children:"No PRs yet"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500 mt-1",children:"Complete your first workout to start tracking personal records."})]}):(0,r.jsx)("div",{className:"space-y-3",children:j.map(e=>{let s=t[e],a=s[0];return(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-semibold truncate",children:e}),(0,r.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:new Date(a.achievedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,r.jsxs)("div",{className:"text-right ml-3",children:[(0,r.jsxs)("div",{className:"text-[#FFB300] font-bold text-lg",children:[Math.round(a.value)," lbs"]}),(0,r.jsxs)("div",{className:"text-xs text-neutral-500",children:["1rm"===a.type?"Est. 1RM":a.type.toUpperCase(),a.reps&&" @ ".concat(a.reps," reps")]})]})]}),s.length>1&&(0,r.jsx)("div",{className:"mt-3 flex gap-2 overflow-x-auto",children:s.slice(0,6).map((e,t)=>(0,r.jsx)("div",{className:"flex-shrink-0 px-2.5 py-1 rounded-lg text-xs ".concat(0===t?"bg-[#FFB300]/20 text-[#FFB300] border border-[#FFB300]/30":"bg-[#0a0a0a] text-neutral-500 border border-[#262626]"),children:Math.round(e.value)},e.id))})]},e)})})]}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"font-bold",children:"Achievements"}),(0,r.jsxs)("span",{className:"text-xs text-[#FFB300] font-semibold",children:[p," XP"]})]}),0===m.length?(0,r.jsx)("div",{className:"text-center py-4 text-neutral-500 text-sm",children:"Loading..."}):(0,r.jsx)("div",{className:"grid grid-cols-4 gap-3",children:m.slice(0,8).map(e=>(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-1 ".concat(e.unlocked?"":"grayscale opacity-25"),title:e.description,children:e.icon}),(0,r.jsx)("div",{className:"text-[10px] text-neutral-500 leading-tight",children:e.name})]},e.code))}),m.filter(e=>e.unlocked).length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-[#1a1a1a] text-xs text-neutral-500 text-center",children:[m.filter(e=>e.unlocked).length,"/",m.length," unlocked"]})]})]}),(0,r.jsx)(n.Z,{active:"progress"})]})}},2371:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),a=s(7138),l=s(6463),n=s(2265);let i=[{id:"home",label:"Home",href:"/dashboard",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"nutrition",label:"Nutrition",href:"/nutrition",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"progress",label:"Progress",href:"/progress",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=["home","nutrition","coach","progress","profile"];function c(e){let{active:t}=e,s=(0,l.useRouter)(),c=o.indexOf(t);return!function(e){let{onSwipeLeft:t,onSwipeRight:s,threshold:r=60}=e,a=(0,n.useRef)(null),l=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){a.current=e.touches[0].clientX,l.current=e.touches[0].clientY}function n(e){if(null===a.current||null===l.current)return;let n=e.changedTouches[0].clientX-a.current;Math.abs(n)>Math.abs(e.changedTouches[0].clientY-l.current)&&Math.abs(n)>r&&(n<0?null==t||t():null==s||s()),a.current=null,l.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",n,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",n)}},[t,s,r])}({onSwipeLeft:()=>{c<o.length-1&&s.push(i.find(e=>e.id===o[c+1]).href)},onSwipeRight:()=>{c>0&&s.push(i.find(e=>e.id===o[c-1]).href)}}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,r.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:i.map(e=>(0,r.jsxs)(a.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(t===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,r.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}}},function(e){e.O(0,[291,971,23,744],function(){return e(e.s=5026)}),_N_E=e.O()}]);