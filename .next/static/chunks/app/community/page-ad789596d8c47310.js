(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4616],{42426:function(e,t,s){Promise.resolve().then(s.bind(s,93095))},16463:function(e,t,s){"use strict";var r=s(71169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},93095:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(57437),a=s(2265),n=s(32371),l=s(8837);function o(){let[e,t]=(0,a.useState)("challenges"),[s,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,x]=(0,a.useState)("workouts"),[m,f]=(0,a.useState)(null);async function v(e){f(e),await fetch("/api/challenges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeId:e})}).catch(()=>{}),fetch("/api/challenges").then(e=>e.json()).then(e=>o(e.challenges||[])).catch(()=>{}),f(null)}return(0,a.useEffect)(()=>{"challenges"===e?fetch("/api/challenges").then(e=>e.json()).then(e=>o(e.challenges||[])).catch(()=>{}):"leaderboard"===e?fetch("/api/leaderboard?metric=".concat(h,"&type=weekly")).then(e=>e.json()).then(e=>c(e.entries||[])).catch(()=>{}):"feed"===e&&fetch("/api/social/feed").then(e=>e.json()).then(e=>u(e.activities||[])).catch(()=>{})},[e,h]),(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,r.jsxs)("header",{className:"px-6 pt-8 pb-4",children:[(0,r.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-1",children:"Community"})]}),(0,r.jsx)("div",{className:"px-6 mb-4",children:(0,r.jsx)("div",{className:"flex bg-[#141414] rounded-2xl p-1 border border-[#262626]",children:[["challenges","Challenges"],["leaderboard","Leaderboard"],["feed","Feed"]].map(s=>{let[a,n]=s;return(0,r.jsx)("button",{onClick:()=>t(a),className:"flex-1 py-2 rounded-xl text-sm font-semibold transition-colors ".concat(e===a?"bg-[#0066FF] text-white":"text-neutral-500"),children:n},a)})})}),(0,r.jsxs)("div",{className:"px-6 space-y-4",children:["challenges"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.map(e=>{let t=e.myEntry?Math.min(100,e.myEntry.progress/e.target*100):0,s=e.entries.slice(0,3);return(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 space-y-3",children:[(0,r.jsx)("div",{className:"font-semibold text-sm leading-snug",children:e.title}),(0,r.jsxs)("div",{className:"text-xs text-neutral-500",children:[e.target," ",e.unit]}),e.myEntry?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-xs text-neutral-400",children:[Math.round(e.myEntry.progress)," / ",e.target," ",e.unit]}),(0,r.jsx)("div",{className:"h-1.5 bg-[#262626] rounded-full",children:(0,r.jsx)("div",{className:"h-full bg-[#0066FF] rounded-full",style:{width:"".concat(t,"%")}})})]}):(0,r.jsx)("button",{onClick:()=>v(e.id),disabled:m===e.id,className:"w-full py-1.5 bg-[#0066FF] text-white text-xs font-bold rounded-lg disabled:opacity-50",children:m===e.id?"...":"Join"}),s.length>0&&(0,r.jsxs)("div",{className:"flex gap-1",children:[s.map((e,t)=>(0,r.jsx)("div",{children:(0,r.jsx)(l.Z,{user:{name:e.user.displayName||"Athlete",avatarUrl:e.user.avatarUrl},size:"xs"})},t)),(0,r.jsxs)("span",{className:"text-xs text-neutral-500 self-center ml-1",children:[e.entries.length," joined"]})]})]},e.id)})}),0===s.length&&(0,r.jsx)("p",{className:"text-neutral-500 text-sm text-center py-8",children:"No active challenges this week."})]}),"leaderboard"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex gap-2",children:["workouts","streak"].map(e=>(0,r.jsx)("button",{onClick:()=>x(e),className:"px-4 py-1.5 rounded-full text-xs font-bold transition-colors ".concat(h===e?"bg-[#0066FF] text-white":"bg-[#141414] border border-[#262626] text-neutral-400"),children:"workouts"===e?"\uD83D\uDCAA Workouts":"\uD83D\uDD25 Streak"},e))}),(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[i.slice(0,20).map(e=>{var t,s,a,n,o;return(0,r.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-[#1a1a1a] last:border-0",children:[(0,r.jsx)("div",{className:"w-7 text-center font-black ".concat(e.rank<=3?["text-yellow-400","text-neutral-300","text-orange-400"][e.rank-1]:"text-neutral-600"," text-sm"),children:e.rank<=3?["\uD83E\uDD47","\uD83E\uDD48","\uD83E\uDD49"][e.rank-1]:"#".concat(e.rank)}),(0,r.jsx)(l.Z,{user:{name:(null===(t=e.user)||void 0===t?void 0:t.displayName)||(null===(s=e.user)||void 0===s?void 0:s.username)||"Athlete",avatarUrl:null===(a=e.user)||void 0===a?void 0:a.avatarUrl},size:"sm"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"text-sm font-medium",children:(null===(n=e.user)||void 0===n?void 0:n.displayName)||(null===(o=e.user)||void 0===o?void 0:o.username)||"Athlete"})}),(0,r.jsxs)("div",{className:"font-black text-[#0066FF]",children:[e.value,"streak"===h?"\uD83D\uDD25":""]})]},e.rank)}),0===i.length&&(0,r.jsx)("p",{className:"text-neutral-500 text-sm text-center py-8",children:"No data yet."})]})]}),"feed"===e&&(0,r.jsxs)("div",{className:"space-y-3",children:[d.map(e=>{var t,s,a,n,o;return(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 flex items-start gap-3",children:[(0,r.jsx)(l.Z,{user:{name:(null===(t=e.user)||void 0===t?void 0:t.displayName)||(null===(s=e.user)||void 0===s?void 0:s.username)||"Athlete",avatarUrl:null===(a=e.user)||void 0===a?void 0:a.avatarUrl},size:"md"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("span",{className:"font-semibold",children:[(null===(n=e.user)||void 0===n?void 0:n.displayName)||(null===(o=e.user)||void 0===o?void 0:o.username)||"Athlete"," "]}),(0,r.jsx)("span",{className:"text-neutral-400 text-sm",children:function(e){let t=e.data;return"workout_complete"===e.type?"completed ".concat(t.workoutName||"a workout"," \uD83D\uDCAA"):"pr"===e.type?"hit a new ".concat(t.exercise," PR \uD83C\uDFC6"):"streak_milestone"===e.type?"is on a ".concat(t.days," day streak \uD83D\uDD25"):"challenge_complete"===e.type?"completed the ".concat(t.challengeTitle," challenge \uD83C\uDFAF"):"had an activity"}(e)}),(0,r.jsx)("div",{className:"text-xs text-neutral-600 mt-1",children:function(e){let t=Date.now()-new Date(e).getTime();return t<36e5?Math.floor(t/6e4)+"m ago":t<864e5?Math.floor(t/36e5)+"h ago":Math.floor(t/864e5)+"d ago"}(e.createdAt)})]})]},e.id)}),0===d.length&&(0,r.jsx)("p",{className:"text-neutral-500 text-sm text-center py-8",children:"No activity yet. Start training!"})]})]}),(0,r.jsx)(n.Z,{active:"home"})]})}},8837:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(57437);let a={xs:"w-6 h-6 text-[10px]",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-xl",xl:"w-24 h-24 text-3xl"};function n(e){let{user:t,size:s="md",className:n=""}=e,l=t.name||"Athlete",o="rounded-full overflow-hidden border border-white/15 flex items-center justify-center font-semibold ".concat(a[s]," ").concat(n);return t.avatarUrl?(0,r.jsx)("div",{className:o,children:(0,r.jsx)("img",{src:t.avatarUrl,alt:l,className:"w-full h-full object-cover"})}):(0,r.jsx)("div",{className:o,style:{backgroundColor:function(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s);let s=["#14532d","#1d4ed8","#7c2d12","#4c1d95","#0f766e","#9a3412"];return s[Math.abs(t)%s.length]}(l)},children:function(e){let t=e.trim().split(/\s+/).filter(Boolean);return t.length<=1?(t[0]||"?").slice(0,2).toUpperCase():(t[0][0]+t[1][0]).toUpperCase()}(l)})}},32371:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(57437),a=s(87138),n=s(16463),l=s(2265);let o=[{id:"home",label:"Home",href:"/home",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"discover",label:"Discover",href:"/discover",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{id:"workout",label:"Workout",href:"/workout",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6h2m0 0V4m0 2v2M3 6h18m-2 0V4m0 2v2m0-2h2M5 8h14m-7 4v4m0-4H9m3 0h3"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],i=["home","discover","workout","coach","profile"];function c(e){let{active:t}=e,s=(0,n.useRouter)(),c=i.indexOf(t);return!function(e){let{onSwipeLeft:t,onSwipeRight:s,threshold:r=60}=e,a=(0,l.useRef)(null),n=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){a.current=e.touches[0].clientX,n.current=e.touches[0].clientY}function l(e){if(null===a.current||null===n.current)return;let l=e.changedTouches[0].clientX-a.current;Math.abs(l)>Math.abs(e.changedTouches[0].clientY-n.current)&&Math.abs(l)>r&&(l<0?null==t||t():null==s||s()),a.current=null,n.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",l,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",l)}},[t,s,r])}({onSwipeLeft:()=>{c<i.length-1&&s.push(o.find(e=>e.id===i[c+1]).href)},onSwipeRight:()=>{c>0&&s.push(o.find(e=>e.id===i[c-1]).href)}}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,r.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:o.map(e=>(0,r.jsxs)(a.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(t===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,r.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}}},function(e){e.O(0,[7138,2971,7023,1744],function(){return e(e.s=42426)}),_N_E=e.O()}]);