(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6583],{47561:function(e,s,t){Promise.resolve().then(t.bind(t,73581))},16463:function(e,s,t){"use strict";var r=t(71169);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},73581:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(57437),n=t(2265),a=t(16463),l=t(32371),i=t(8837);function o(e){let{activity:s}=e,t=(0,a.useRouter)(),n=s.data,l=s.user.displayName||s.user.username||"Someone",o=(()=>{switch(s.type){case"workout_completed":return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:l})," ","completed"," ",(0,r.jsx)("span",{className:"text-[#0066FF]",children:String(n.workoutName||"a workout")})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-1.5 text-xs text-neutral-500",children:[n.duration&&(0,r.jsxs)("span",{children:[String(n.duration)," min"]}),n.exercises&&(0,r.jsxs)("span",{children:[String(n.exercises)," exercises"]}),Number(n.prs)>0&&(0,r.jsxs)("span",{className:"text-[#FFB300]",children:["\uD83C\uDFC6 ",String(n.prs)," PRs"]})]})]});case"pr_hit":return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:l})," ","hit a new PR on"," ",(0,r.jsx)("span",{className:"text-[#0066FF]",children:String(n.exercise||"")})]}),n.weight&&n.reps&&(0,r.jsxs)("p",{className:"text-xl font-bold mt-1",children:[String(n.weight)," lbs \xd7 ",String(n.reps)]})]});case"streak_milestone":return(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:l})," ","reached a"," ",(0,r.jsxs)("span",{className:"text-orange-400 font-bold",children:[String(n.days)," day streak \uD83D\uDD25"]})]});case"cardio_completed":return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:l})," ","completed a"," ",(0,r.jsx)("span",{className:"text-[#0066FF] capitalize",children:String(n.cardioType||"cardio")})," ","session"]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-1.5 text-xs text-neutral-500",children:[n.duration&&(0,r.jsxs)("span",{children:[Math.round(Number(n.duration)/60)," min"]}),n.distance&&(0,r.jsxs)("span",{children:[Number(n.distance).toFixed(1)," mi"]}),n.calories&&(0,r.jsxs)("span",{children:[Math.round(Number(n.calories))," cal"]})]})]});case"started_program":return(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:l})," ","started training on FORC3 \uD83D\uDE80"]});default:return null}})();return o?(0,r.jsx)("div",{className:"px-4 py-4 border-b border-[#1a1a1a]",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("button",{onClick:()=>s.user.username&&t.push("/user/".concat(s.user.username)),children:(0,r.jsx)(i.Z,{user:{avatarUrl:s.user.avatarUrl,name:s.user.displayName||s.user.username||"Athlete"}})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[o,(0,r.jsx)("p",{className:"text-xs text-neutral-600 mt-1.5",children:function(e){let s=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(s<1)return"just now";if(s<60)return"".concat(s,"m ago");let t=Math.floor(s/60);return t<24?"".concat(t,"h ago"):"".concat(Math.floor(t/24),"d ago")}(s.createdAt)})]})]})}):null}function c(e){let{user:s,onFollowToggle:t}=e,n=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,r.jsx)("button",{onClick:()=>s.username&&n.push("/user/".concat(s.username)),children:(0,r.jsx)(i.Z,{user:{avatarUrl:s.avatarUrl,name:s.displayName||s.username||"Athlete"}})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",onClick:()=>s.username&&n.push("/user/".concat(s.username)),children:[(0,r.jsx)("div",{className:"font-semibold text-sm truncate",children:s.displayName||s.username}),(0,r.jsxs)("div",{className:"text-xs text-neutral-500",children:[s.username?"@".concat(s.username):""," \xb7 ",s.followerCount," followers"]})]}),(0,r.jsx)("button",{onClick:()=>t(s.id),className:"px-3 py-1.5 rounded-xl text-xs font-bold transition-all ".concat(s.isFollowing?"border border-[#262626] text-neutral-400":"bg-[#0066FF] text-white"),children:s.isFollowing?"Following":s.isPrivate?"Request":"Follow"})]})}function d(e){let{workout:s}=e,t=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4 cursor-pointer hover:border-[#0066FF]/30 transition-colors",onClick:()=>t.push("/user/".concat(s.user.username)),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(i.Z,{user:{avatarUrl:s.user.avatarUrl,name:s.user.displayName||s.user.username||"Athlete"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold",children:s.user.displayName||s.user.username}),(0,r.jsx)("div",{className:"text-xs text-neutral-500",children:s.user.username?"@".concat(s.user.username):""})]})]}),(0,r.jsx)("h3",{className:"font-bold text-base mb-1",children:s.title||s.workout.name}),s.description&&(0,r.jsx)("p",{className:"text-neutral-500 text-xs mb-3 line-clamp-2",children:s.description}),(0,r.jsxs)("div",{className:"flex gap-4 text-xs text-neutral-500",children:[(0,r.jsxs)("span",{children:["❤️ ",s._count.likes]}),(0,r.jsxs)("span",{children:["\uD83D\uDCAC ",s._count.comments]}),(0,r.jsxs)("span",{children:["\uD83D\uDCCB ",s._count.copies," copies"]})]})]})}function u(){let[e,s]=(0,n.useState)(""),[t,a]=(0,n.useState)([]),[i,u]=(0,n.useState)([]),[h,x]=(0,n.useState)([]),[m,p]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1),[v,b]=(0,n.useState)("feed"),[N,g]=(0,n.useState)(!1),w=(0,n.useRef)(void 0);(0,n.useEffect)(()=>{fetch("/api/social/search?q=a").then(e=>e.json()).then(e=>x(e.users||[]))},[]),(0,n.useEffect)(()=>{"feed"===v&&0===m.length&&(j(!0),fetch("/api/social/feed").then(e=>e.json()).then(e=>p(e.activities||[])).finally(()=>j(!1)))},[v]);let k=e=>{if(s(e),clearTimeout(w.current),e.length<2){a([]);return}g(!0),w.current=setTimeout(async()=>{let s=await fetch("/api/social/search?q=".concat(encodeURIComponent(e)));a((await s.json()).users||[]),g(!1)},400)},y=async e=>{let s=[...t,...h].find(s=>s.id===e);if(s){if(s.isFollowing){await fetch("/api/social/follow",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});let s=s=>s.map(s=>s.id===e?{...s,isFollowing:!1}:s);a(s),x(s)}else{await fetch("/api/social/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});let s=s=>s.map(s=>s.id===e?{...s,isFollowing:!0}:s);a(s),x(s)}}};return(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white pb-24",children:[(0,r.jsxs)("header",{className:"px-5 pt-8 pb-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Discover"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>k(e.target.value),placeholder:"Search athletes...",className:"w-full bg-[#141414] border border-[#262626] rounded-xl pl-10 pr-4 py-3 text-sm focus:border-[#0066FF] focus:outline-none"})]})]}),e.length>1?(0,r.jsxs)("div",{className:"px-5",children:[(0,r.jsx)("p",{className:"text-xs text-neutral-500 mb-3 uppercase tracking-wide",children:"Athletes"}),N?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}):0===t.length?(0,r.jsxs)("p",{className:"text-neutral-500 text-sm py-8 text-center",children:['No athletes found for "',e,'"']}):(0,r.jsx)("div",{className:"divide-y divide-[#1a1a1a]",children:t.map(e=>(0,r.jsx)(c,{user:e,onFollowToggle:y},e.id))})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex border-b border-[#1a1a1a] mb-4",children:["feed","trending","users"].map(e=>(0,r.jsx)("button",{onClick:()=>b(e),className:"flex-1 py-3 text-sm font-semibold capitalize transition-colors ".concat(v===e?"text-white border-b-2 border-[#0066FF]":"text-neutral-500"),children:"feed"===e?"Feed":"trending"===e?"Trending":"Athletes"},e))}),(0,r.jsxs)("div",{className:"px-5",children:["feed"===v&&(f?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}):0===m.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83E\uDD1D"}),(0,r.jsx)("h2",{className:"font-bold text-lg mb-2",children:"Your feed is empty"}),(0,r.jsx)("p",{className:"text-neutral-500 text-sm mb-6",children:"Follow other athletes to see their workouts, PRs, and milestones here."}),(0,r.jsx)("button",{onClick:()=>b("users"),className:"px-6 py-3 bg-[#0066FF] text-white rounded-xl font-semibold text-sm",children:"Find People to Follow"})]}):(0,r.jsx)("div",{className:"-mx-5",children:m.map(e=>(0,r.jsx)(o,{activity:e},e.id))})),"trending"===v&&(0===i.length?(0,r.jsxs)("div",{className:"text-center py-12 text-neutral-500 text-sm",children:[(0,r.jsx)("p",{className:"text-3xl mb-3",children:"\uD83C\uDFCB️"}),(0,r.jsx)("p",{children:"No shared workouts yet."}),(0,r.jsx)("p",{className:"mt-1",children:"Be the first to share yours!"})]}):(0,r.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,r.jsx)(d,{workout:e},e.id))})),"users"===v&&(0,r.jsx)("div",{className:"divide-y divide-[#1a1a1a]",children:h.map(e=>(0,r.jsx)(c,{user:e,onFollowToggle:y},e.id))})]})]}),(0,r.jsx)(l.Z,{active:"discover"})]})}},8837:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(57437);let n={xs:"w-6 h-6 text-[10px]",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-xl",xl:"w-24 h-24 text-3xl"};function a(e){let{user:s,size:t="md",className:a=""}=e,l=s.name||"Athlete",i="rounded-full overflow-hidden border border-white/15 flex items-center justify-center font-semibold ".concat(n[t]," ").concat(a);return s.avatarUrl?(0,r.jsx)("div",{className:i,children:(0,r.jsx)("img",{src:s.avatarUrl,alt:l,className:"w-full h-full object-cover"})}):(0,r.jsx)("div",{className:i,style:{backgroundColor:function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t);let t=["#14532d","#1d4ed8","#7c2d12","#4c1d95","#0f766e","#9a3412"];return t[Math.abs(s)%t.length]}(l)},children:function(e){let s=e.trim().split(/\s+/).filter(Boolean);return s.length<=1?(s[0]||"?").slice(0,2).toUpperCase():(s[0][0]+s[1][0]).toUpperCase()}(l)})}},32371:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var r=t(57437),n=t(87138),a=t(16463),l=t(2265);let i=[{id:"home",label:"Home",href:"/home",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"discover",label:"Discover",href:"/discover",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{id:"workout",label:"Workout",href:"/workout",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6h2m0 0V4m0 2v2M3 6h18m-2 0V4m0 2v2m0-2h2M5 8h14m-7 4v4m0-4H9m3 0h3"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=["home","discover","workout","coach","profile"];function c(e){let{active:s}=e,t=(0,a.useRouter)(),c=o.indexOf(s);return!function(e){let{onSwipeLeft:s,onSwipeRight:t,threshold:r=60}=e,n=(0,l.useRef)(null),a=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){n.current=e.touches[0].clientX,a.current=e.touches[0].clientY}function l(e){if(null===n.current||null===a.current)return;let l=e.changedTouches[0].clientX-n.current;Math.abs(l)>Math.abs(e.changedTouches[0].clientY-a.current)&&Math.abs(l)>r&&(l<0?null==s||s():null==t||t()),n.current=null,a.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",l,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",l)}},[s,t,r])}({onSwipeLeft:()=>{c<o.length-1&&t.push(i.find(e=>e.id===o[c+1]).href)},onSwipeRight:()=>{c>0&&t.push(i.find(e=>e.id===o[c-1]).href)}}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,r.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:i.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(s===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,r.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}}},function(e){e.O(0,[7138,2971,7023,1744],function(){return e(e.s=47561)}),_N_E=e.O()}]);