(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8811],{38787:function(e,t,s){Promise.resolve().then(s.bind(s,24933))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},24933:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(57437),n=s(2265),r=s(16463),l=s(32371),i=s(36106);let d={easy:"bg-[#00C853]",moderate:"bg-yellow-400",hard:"bg-orange-400",max:"bg-red-400"};function c(e){let t=new Date(e),s=new Date,a=new Date;return(a.setDate(s.getDate()-1),t.toDateString()===s.toDateString())?"Today":t.toDateString()===a.toDateString()?"Yesterday":t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function o(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)([]),[o,x]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),[j,v]=(0,n.useState)("all");(0,n.useEffect)(()=>{Promise.all([fetch("/api/workouts/log?limit=100").then(e=>e.json()),fetch("/api/cardio/log").then(e=>e.json())]).then(e=>{let[t,a]=e;s((t.logs||[]).map(e=>({...e,kind:"strength"}))),x((a.activities||[]).map(e=>({...e,kind:"cardio"})))}).catch(()=>{}).finally(()=>m(!1))},[]);let f=(0,n.useMemo)(()=>{let e=new Date,s={week:new Date(e.getTime()-6048e5),month:new Date(e.getTime()-2592e6),all:new Date(0)}[j];return[...t.filter(e=>new Date(e.startedAt)>=s).map(e=>({...e,_date:new Date(e.startedAt).getTime()})),...o.filter(e=>new Date(e.createdAt)>=s).map(e=>({...e,_date:new Date(e.createdAt).getTime()}))].sort((e,t)=>{var s,a;return(null!==(s=t._date)&&void 0!==s?s:0)-(null!==(a=e._date)&&void 0!==a?a:0)})},[t,o,j]),b=(0,n.useMemo)(()=>{let e=new Date(Date.now()-6048e5),t=o.filter(t=>new Date(t.createdAt)>=e&&t.completed),s=t.reduce((e,t)=>e+t.duration,0),a=t.reduce((e,t)=>e+(t.distance||0),0),n={};return t.forEach(e=>{n[e.type]=(n[e.type]||0)+e.duration}),{totalMins:s,totalDist:a,byType:n,count:t.length}},[o]);return(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white pb-28",children:[(0,a.jsxs)("header",{className:"px-6 pt-8 pb-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-1",children:(0,a.jsx)("button",{onClick:()=>e.back(),className:"text-neutral-500 text-sm hover:text-white transition-colors",children:"← Back"})}),(0,a.jsx)("div",{className:"text-xs font-bold tracking-widest text-[#0066FF]",children:"FORC3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mt-1",children:"History"}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500",children:[f.length," sessions"]})]}),(0,a.jsx)("div",{className:"px-6 mb-4",children:(0,a.jsx)("div",{className:"flex bg-[#141414] border border-[#262626] rounded-xl p-1 gap-1",children:[{key:"week",label:"This Week"},{key:"month",label:"30 Days"},{key:"all",label:"All Time"}].map(e=>(0,a.jsx)("button",{onClick:()=>v(e.key),className:"flex-1 py-2 rounded-lg text-sm font-medium transition-all ".concat(j===e.key?"bg-[#0066FF] text-white":"text-neutral-400 hover:text-white"),children:e.label},e.key))})}),"week"===j&&b.count>0&&(0,a.jsx)("div",{className:"px-6 mb-4",children:(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl p-4",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-3",children:"This Week — Cardio Volume"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:b.count}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Sessions"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:b.totalMins}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Minutes"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:b.totalDist>0?b.totalDist.toFixed(1):"—"}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"km"})]})]}),Object.entries(b.byType).length>0&&(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:Object.entries(b.byType).map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"text-xs bg-[#0a0a0a] border border-[#262626] rounded-full px-2 py-1 text-neutral-400",children:[i.A7[t]||"\uD83C\uDFC3"," ",t," \xb7 ",s,"m"]},t)})})]})}),t.length>0&&"week"!==j&&(0,a.jsx)("div",{className:"px-6 mb-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-xl p-3 text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:t.filter(e=>{let t=new Date("month"===j?Date.now()-2592e6:0);return new Date(e.startedAt)>=t}).length}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Strength Sessions"})]}),(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-xl p-3 text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:o.filter(e=>{let t=new Date("month"===j?Date.now()-2592e6:0);return new Date(e.createdAt)>=t&&e.completed}).length}),(0,a.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:"Cardio Sessions"})]})]})}),(0,a.jsxs)("div",{className:"px-6 space-y-3",children:[h&&(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-[#0066FF] border-t-transparent rounded-full animate-spin"})}),!h&&0===f.length&&(0,a.jsxs)("div",{className:"text-center py-16 space-y-4",children:[(0,a.jsx)("div",{className:"text-5xl",children:"\uD83C\uDFCB️"}),(0,a.jsx)("p",{className:"font-semibold",children:0===t.length&&0===o.length?"No sessions yet":"No sessions in this period"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:0===t.length&&0===o.length?"Complete your first workout to see it here.":"Try a wider time range above."}),0===t.length&&0===o.length&&(0,a.jsx)("button",{onClick:()=>e.push("/home"),className:"px-6 py-3 bg-[#0066FF] text-white font-bold rounded-xl",children:"Start Today's Workout"})]}),f.map(e=>{var t;let s=u===e.id;if("cardio"===e.kind){let t=i.A7[e.type]||"\uD83C\uDFC3",n=d[e.intensity||"moderate"]||d.moderate;return(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>p(s?null:e.id),className:"w-full px-5 py-4 flex items-start justify-between text-left",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl mt-0.5",children:t}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.title||e.type}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(n)}),e.completed&&(0,a.jsx)("span",{className:"text-xs text-[#00C853]",children:"✓"})]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:[c(e.createdAt)," \xb7 ",e.duration," min",e.distance?" \xb7 ".concat(e.distance.toFixed(1)," km"):"",e.intensity&&(0,a.jsxs)("span",{className:"capitalize",children:[" \xb7 ",e.intensity]})]})]})]}),(0,a.jsx)("span",{className:"text-neutral-600 text-lg mt-1",children:s?"−":"+"})]}),s&&(0,a.jsxs)("div",{className:"px-5 pb-4 border-t border-[#1a1a1a] pt-3",children:[(0,a.jsx)("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-1",children:"Cardio Session"}),(0,a.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.duration,"m"]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Duration"})]}),e.distance&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.distance.toFixed(1)," km"]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"Distance"})]})]})]})]},e.id)}let n=e.exerciseLogs.reduce((e,t)=>e+t.sets.reduce((e,t)=>e+t.weight*t.reps,0),0),r=e.exerciseLogs.reduce((e,t)=>e+t.sets.length,0),l=e.exerciseLogs.some(e=>e.sets.some(e=>e.isPR));return(0,a.jsxs)("div",{className:"bg-[#141414] border border-[#262626] rounded-2xl overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>p(s?null:e.id),className:"w-full px-5 py-4 flex items-start justify-between text-left",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl mt-0.5",children:"\uD83C\uDFCB️"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:(null===(t=e.workout)||void 0===t?void 0:t.name)||"Workout"}),l&&(0,a.jsx)("span",{className:"text-xs bg-[#FFB300]/20 text-[#FFB300] px-2 py-0.5 rounded-full border border-[#FFB300]/30",children:"PR!"})]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 mt-1 flex items-center gap-2",children:[(0,a.jsx)("span",{children:c(e.startedAt)}),e.duration&&(0,a.jsxs)("span",{children:["\xb7 ",e.duration," min"]}),r>0&&(0,a.jsxs)("span",{children:["\xb7 ",r," sets"]}),n>0&&(0,a.jsxs)("span",{children:["\xb7 ",n>=1e3?"".concat((n/1e3).toFixed(1),"k"):Math.round(n)," lbs"]})]})]})]}),(0,a.jsx)("span",{className:"text-neutral-600 text-lg mt-1",children:s?"−":"+"})]}),s&&(0,a.jsxs)("div",{className:"border-t border-[#1a1a1a]",children:[e.exerciseLogs.length>0?(0,a.jsx)("div",{className:"divide-y divide-[#1a1a1a]",children:e.exerciseLogs.map(e=>{let t=e.sets.reduce((e,t)=>!e||t.weight>e.weight?t:e,null);return(0,a.jsxs)("div",{className:"px-5 py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.exercise.name}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 mt-0.5",children:[e.sets.length," sets"]})]}),t&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold",children:[t.weight," \xd7 ",t.reps,t.isPR&&(0,a.jsx)("span",{className:"ml-1 text-[#FFB300]",children:"\uD83C\uDFC6"})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:"best set"})]})]},e.id)})}):(0,a.jsx)("div",{className:"px-5 py-3 text-sm text-neutral-500",children:"No exercises logged"}),e.overallRpe&&(0,a.jsx)("div",{className:"px-5 py-3 border-t border-[#1a1a1a]",children:(0,a.jsxs)("span",{className:"text-xs text-neutral-500",children:["Overall RPE: ",e.overallRpe,"/10"]})})]})]},e.id)})]}),(0,a.jsx)(l.Z,{active:"home"})]})}},32371:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(57437),n=s(87138),r=s(16463),l=s(2265);let i=[{id:"home",label:"Home",href:"/home",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"discover",label:"Discover",href:"/discover",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},{id:"workout",label:"Workout",href:"/workout",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6h2m0 0V4m0 2v2M3 6h18m-2 0V4m0 2v2m0-2h2M5 8h14m-7 4v4m0-4H9m3 0h3"})})},{id:"coach",label:"Coach",href:"/coach",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"profile",label:"Profile",href:"/profile",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],d=["home","discover","workout","coach","profile"];function c(e){let{active:t}=e,s=(0,r.useRouter)(),c=d.indexOf(t);return!function(e){let{onSwipeLeft:t,onSwipeRight:s,threshold:a=60}=e,n=(0,l.useRef)(null),r=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){n.current=e.touches[0].clientX,r.current=e.touches[0].clientY}function l(e){if(null===n.current||null===r.current)return;let l=e.changedTouches[0].clientX-n.current;Math.abs(l)>Math.abs(e.changedTouches[0].clientY-r.current)&&Math.abs(l)>a&&(l<0?null==t||t():null==s||s()),n.current=null,r.current=null}return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",l,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",l)}},[t,s,a])}({onSwipeLeft:()=>{c<d.length-1&&s.push(i.find(e=>e.id===d[c+1]).href)},onSwipeRight:()=>{c>0&&s.push(i.find(e=>e.id===d[c-1]).href)}}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-[#1a1a1a] px-2 py-2 safe-area-inset-bottom z-40",children:(0,a.jsx)("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:i.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:"flex flex-col items-center gap-1 py-1.5 px-3 rounded-xl transition-colors ".concat(t===e.id?"text-[#0066FF]":"text-[#666666] hover:text-neutral-300"),children:[e.icon,(0,a.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id))})})}}},function(e){e.O(0,[7138,6106,2971,7023,1744],function(){return e(e.s=38787)}),_N_E=e.O()}]);