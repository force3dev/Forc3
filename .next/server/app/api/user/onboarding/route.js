"use strict";(()=>{var e={};e.id=326,e.ids=[326],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},67311:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>G,patchFetch:()=>x,requestAsyncStorage:()=>q,routeModule:()=>I,serverHooks:()=>v,staticGenerationAsyncStorage:()=>w});var a={};r.r(a),r.d(a,{POST:()=>g,dynamic:()=>y});var n=r(49303),u=r(88716),l=r(60670),t=r(87070),i=r(61165),o=r(20728),p=r(95456);let c={push:{compound:[{name:"Barbell Bench Press",equipment:["barbell"],avoidIfInjury:["shoulders","wrists"],muscleGroups:["chest","shoulders","triceps"]},{name:"Incline Barbell Bench Press",equipment:["barbell"],avoidIfInjury:["shoulders"],muscleGroups:["upper chest","shoulders","triceps"]},{name:"Dumbbell Bench Press",equipment:["dumbbells"],avoidIfInjury:["shoulders","wrists"],muscleGroups:["chest","shoulders","triceps"]},{name:"Incline Dumbbell Press",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["upper chest","shoulders","triceps"]},{name:"Push-Up",equipment:["bodyweight"],avoidIfInjury:["wrists"],muscleGroups:["chest","shoulders","triceps"]},{name:"Dumbbell Shoulder Press",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders","triceps"]},{name:"Machine Chest Press",equipment:["machine"],avoidIfInjury:[],muscleGroups:["chest","shoulders","triceps"]}],isolation:[{name:"Dumbbell Lateral Raise",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders"]},{name:"Cable Lateral Raise",equipment:["cable"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders"]},{name:"Tricep Pushdown",equipment:["cable"],avoidIfInjury:["elbows"],muscleGroups:["triceps"]},{name:"Overhead Tricep Extension",equipment:["cable","dumbbells"],avoidIfInjury:["elbows"],muscleGroups:["triceps"]},{name:"Pec Deck / Chest Fly",equipment:["machine","cable"],avoidIfInjury:["shoulders"],muscleGroups:["chest"]},{name:"Dumbbell Front Raise",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders"]}]},pull:{compound:[{name:"Barbell Row",equipment:["barbell"],avoidIfInjury:["lower_back","wrists"],muscleGroups:["back","biceps","rear delts"]},{name:"Pull-Up",equipment:["bodyweight","pull-up bar"],avoidIfInjury:["shoulders","elbows"],muscleGroups:["back","biceps"]},{name:"Lat Pulldown",equipment:["cable"],avoidIfInjury:["shoulders"],muscleGroups:["back","biceps"]},{name:"Seated Cable Row",equipment:["cable"],avoidIfInjury:["lower_back"],muscleGroups:["back","biceps"]},{name:"Dumbbell Row",equipment:["dumbbells"],avoidIfInjury:["lower_back","wrists"],muscleGroups:["back","biceps"]},{name:"T-Bar Row",equipment:["barbell"],avoidIfInjury:["lower_back"],muscleGroups:["back","biceps"]}],isolation:[{name:"Bicep Curl",equipment:["barbell","dumbbells","cable"],avoidIfInjury:["elbows","wrists"],muscleGroups:["biceps"]},{name:"Hammer Curl",equipment:["dumbbells","cable"],avoidIfInjury:["elbows"],muscleGroups:["biceps","brachialis"]},{name:"Face Pull",equipment:["cable"],avoidIfInjury:["shoulders"],muscleGroups:["rear delts","upper back"]},{name:"Cable Row (Close Grip)",equipment:["cable"],avoidIfInjury:["lower_back"],muscleGroups:["back"]},{name:"Rear Delt Fly",equipment:["dumbbells","cable"],avoidIfInjury:[],muscleGroups:["rear delts"]}]},legs:{compound:[{name:"Barbell Squat",equipment:["barbell"],avoidIfInjury:["knees","lower_back"],muscleGroups:["quads","glutes","hamstrings"]},{name:"Romanian Deadlift",equipment:["barbell"],avoidIfInjury:["lower_back","hamstrings"],muscleGroups:["hamstrings","glutes","lower_back"]},{name:"Leg Press",equipment:["machine"],avoidIfInjury:["knees","lower_back"],muscleGroups:["quads","glutes"]},{name:"Bulgarian Split Squat",equipment:["dumbbells","bodyweight"],avoidIfInjury:["knees"],muscleGroups:["quads","glutes","hamstrings"]},{name:"Hack Squat",equipment:["machine"],avoidIfInjury:["knees"],muscleGroups:["quads","glutes"]},{name:"Barbell Hip Thrust",equipment:["barbell"],avoidIfInjury:[],muscleGroups:["glutes","hamstrings"]},{name:"Goblet Squat",equipment:["dumbbells","kettlebell"],avoidIfInjury:["knees","lower_back"],muscleGroups:["quads","glutes"]}],isolation:[{name:"Leg Extension",equipment:["machine"],avoidIfInjury:["knees"],muscleGroups:["quads"]},{name:"Leg Curl",equipment:["machine"],avoidIfInjury:["knees","lower_back"],muscleGroups:["hamstrings"]},{name:"Standing Calf Raise",equipment:["machine","bodyweight"],avoidIfInjury:[],muscleGroups:["calves"]},{name:"Seated Calf Raise",equipment:["machine"],avoidIfInjury:[],muscleGroups:["calves"]},{name:"Hip Abduction",equipment:["machine","cable"],avoidIfInjury:[],muscleGroups:["glutes","hip abductors"]}]},upper:{push:[{name:"Barbell Bench Press",equipment:["barbell"],avoidIfInjury:["shoulders","wrists"],muscleGroups:["chest","shoulders","triceps"]},{name:"Incline Dumbbell Press",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["upper chest","shoulders","triceps"]},{name:"Dumbbell Shoulder Press",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders","triceps"]},{name:"Tricep Pushdown",equipment:["cable"],avoidIfInjury:["elbows"],muscleGroups:["triceps"]},{name:"Dumbbell Lateral Raise",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders"]}],pull:[{name:"Pull-Up",equipment:["bodyweight","pull-up bar"],avoidIfInjury:["shoulders","elbows"],muscleGroups:["back","biceps"]},{name:"Barbell Row",equipment:["barbell"],avoidIfInjury:["lower_back","wrists"],muscleGroups:["back","biceps"]},{name:"Lat Pulldown",equipment:["cable"],avoidIfInjury:["shoulders"],muscleGroups:["back","biceps"]},{name:"Face Pull",equipment:["cable"],avoidIfInjury:[],muscleGroups:["rear delts"]},{name:"Bicep Curl",equipment:["dumbbells"],avoidIfInjury:["elbows"],muscleGroups:["biceps"]}]},lower:{quad:[{name:"Barbell Squat",equipment:["barbell"],avoidIfInjury:["knees","lower_back"],muscleGroups:["quads","glutes"]},{name:"Leg Press",equipment:["machine"],avoidIfInjury:["knees"],muscleGroups:["quads","glutes"]},{name:"Bulgarian Split Squat",equipment:["dumbbells"],avoidIfInjury:["knees"],muscleGroups:["quads","glutes"]}],hinge:[{name:"Romanian Deadlift",equipment:["barbell"],avoidIfInjury:["lower_back"],muscleGroups:["hamstrings","glutes"]},{name:"Leg Curl",equipment:["machine"],avoidIfInjury:["knees"],muscleGroups:["hamstrings"]},{name:"Barbell Hip Thrust",equipment:["barbell"],avoidIfInjury:[],muscleGroups:["glutes"]}],isolation:[{name:"Leg Extension",equipment:["machine"],avoidIfInjury:["knees"],muscleGroups:["quads"]},{name:"Standing Calf Raise",equipment:["machine","bodyweight"],avoidIfInjury:[],muscleGroups:["calves"]}]},fullBody:{movements:[{name:"Barbell Squat",equipment:["barbell"],avoidIfInjury:["knees","lower_back"],muscleGroups:["quads","glutes"]},{name:"Barbell Bench Press",equipment:["barbell"],avoidIfInjury:["shoulders"],muscleGroups:["chest","triceps"]},{name:"Barbell Row",equipment:["barbell"],avoidIfInjury:["lower_back"],muscleGroups:["back","biceps"]},{name:"Romanian Deadlift",equipment:["barbell"],avoidIfInjury:["lower_back"],muscleGroups:["hamstrings","glutes"]},{name:"Overhead Press",equipment:["barbell","dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["shoulders"]},{name:"Pull-Up",equipment:["bodyweight"],avoidIfInjury:["shoulders"],muscleGroups:["back","biceps"]},{name:"Goblet Squat",equipment:["dumbbells","kettlebell"],avoidIfInjury:["knees"],muscleGroups:["quads","glutes"]},{name:"Dumbbell Bench Press",equipment:["dumbbells"],avoidIfInjury:["shoulders"],muscleGroups:["chest","triceps"]},{name:"Dumbbell Row",equipment:["dumbbells"],avoidIfInjury:["lower_back"],muscleGroups:["back","biceps"]}]}};function m(e){switch(e){case"full_gym":return["barbell","dumbbells","cable","machine","bodyweight","pull-up bar","kettlebell"];case"home_gym":return["dumbbells","barbell","bodyweight","pull-up bar","kettlebell"];case"minimal":return["dumbbells","bodyweight"];case"bodyweight":return["bodyweight","pull-up bar"];default:return["barbell","dumbbells","cable","machine","bodyweight","pull-up bar"]}}function d(e,s,r){let a=e.equipment.some(e=>s.includes(e)),n=(e.avoidIfInjury||[]).some(e=>r.includes(e));return a&&!n}function b(e,s){let r={sets:3,repsMin:8,repsMax:12,rpe:7.5,rest:90};return"beginner"===e?(r.sets=3,r.repsMin=8,r.repsMax=12,r.rest=90):"intermediate"===e?(r.sets=4,r.repsMin=6,r.repsMax=12,r.rest=120):"advanced"===e&&(r.sets=4,r.repsMin=5,r.repsMax=10,r.rest=150),"strength"===s?(r.repsMin=3,r.repsMax=6,r.rpe=8.5,r.rest=180):"endurance"===s?(r.repsMin=15,r.repsMax=20,r.rpe=6.5,r.rest=60):"muscle_gain"===s?(r.repsMin=8,r.repsMax=15,r.rpe=8,r.rest=90):"fat_loss"===s&&(r.repsMin=10,r.repsMax=15,r.rpe=7.5,r.rest=60),r}function h(e,s,r,a){return e.filter(e=>d(e,s,r)&&!a.has(e.name))[0]||null}function f(e,s,r){return{name:e.name,sets:s.sets,repsMin:s.repsMin,repsMax:s.repsMax,rpe:s.rpe,restSeconds:s.rest,muscleGroups:e.muscleGroups,equipment:[],...r}}let y="force-dynamic";async function g(e){let s=await (0,i.rc)();if(!s)return t.NextResponse.json({error:"Unauthorized"},{status:401});try{var r;let{name:a,age:n,gender:u,weight:l,height:i,goal:y,goalDescription:g,experienceLevel:I,trainingDays:q,equipment:w,injuries:v,sport:G,unitSystem:x}=await e.json(),j=(r=u||"male","male"===r?10*l+6.25*i-5*n+5:10*l+6.25*i-5*n-161),k=Math.round(j*(q<=2?1.375:q<=4?1.55:q<=5?1.725:1.9)),M=function(e,s,r){let a;switch(s){case"fat_loss":a=e-400;break;case"muscle_gain":a=e+300;break;case"strength":a=e+100;break;default:a=e}a=Math.max(a,1500);let n=Math.round(2.2046*r*1),u=Math.round(.25*a/9),l=Math.round((a-4*n-9*u)/4);return{calories:Math.round(a),protein:n,carbs:Math.max(0,l),fat:u}}(k,y,l),P=function(e){var s,r;let a,n,u;let l=(s=e.trainingDays,r=e.experienceLevel,s<=3?"full_body":4===s?"upper_lower":s>=5?"beginner"===r?"upper_lower":"ppl":"full_body");return"ppl"===l?(a=function(e){let s=m(e.equipment),r=b(e.experienceLevel,e.goal),a=new Set;function n(r){return h(r,s,e.injuries,a)}let u=c.push,l=c.pull,t=c.legs,i=[],o=n(u.compound);o&&(a.add(o.name),i.push(f(o,r,{sets:r.sets})));let p=n(u.compound);p&&(a.add(p.name),i.push(f(p,r)));let d=n(u.compound.filter(e=>e.muscleGroups.includes("shoulders")));d&&(a.add(d.name),i.push(f(d,r,{sets:3})));let y=n(u.isolation.filter(e=>e.name.includes("Lateral")));y&&(a.add(y.name),i.push(f(y,{...r,sets:3,repsMin:12,repsMax:20},{restSeconds:60})));let g=n(u.isolation.filter(e=>e.muscleGroups.includes("triceps")));g&&(a.add(g.name),i.push(f(g,{...r,sets:3,repsMin:10,repsMax:15},{restSeconds:60})));let I=n(u.isolation.filter(e=>e.muscleGroups.includes("chest")));I&&(a.add(I.name),i.push(f(I,{...r,sets:3,repsMin:12,repsMax:15},{restSeconds:60})));let q=[],w=n(l.compound);w&&(a.add(w.name),q.push(f(w,r)));let v=n(l.compound);v&&(a.add(v.name),q.push(f(v,r)));let G=n(l.isolation.filter(e=>e.name.includes("Face")));G&&(a.add(G.name),q.push(f(G,{...r,sets:3,repsMin:15,repsMax:20},{restSeconds:60})));let x=n(l.isolation.filter(e=>e.muscleGroups.includes("biceps")));x&&(a.add(x.name),q.push(f(x,{...r,sets:3,repsMin:10,repsMax:15},{restSeconds:60})));let j=n(l.isolation.filter(e=>e.name.includes("Hammer")));j&&(a.add(j.name),q.push(f(j,{...r,sets:3,repsMin:10,repsMax:15},{restSeconds:60})));let k=[],M=n(t.compound.filter(e=>e.muscleGroups.includes("quads")));M&&(a.add(M.name),k.push(f(M,{...r,repsMin:Math.max(5,r.repsMin)})));let P=n(t.compound.filter(e=>e.muscleGroups.includes("hamstrings")));P&&(a.add(P.name),k.push(f(P,r)));let S=n(t.compound.filter(e=>!e.muscleGroups.includes("hamstrings")));S&&(a.add(S.name),k.push(f(S,r,{sets:3})));let _=n(t.isolation.filter(e=>e.muscleGroups.includes("quads")));_&&(a.add(_.name),k.push(f(_,{...r,sets:3,repsMin:12,repsMax:15},{restSeconds:60})));let B=n(t.isolation.filter(e=>e.muscleGroups.includes("hamstrings")));B&&(a.add(B.name),k.push(f(B,{...r,sets:3,repsMin:10,repsMax:15},{restSeconds:60})));let R=n(t.isolation.filter(e=>e.muscleGroups.includes("calves")));R&&(a.add(R.name),k.push(f(R,{...r,sets:4,repsMin:12,repsMax:20},{restSeconds:45})));let D=[{name:"Push A",order:1,exercises:i},{name:"Pull A",order:2,exercises:q},{name:"Legs A",order:3,exercises:k}];return e.trainingDays>=6?D.push({name:"Push B",order:4,exercises:i.slice(0,4)},{name:"Pull B",order:5,exercises:q.slice(0,4)},{name:"Legs B",order:6,exercises:k.slice(0,4)}):5===e.trainingDays&&D.push({name:"Push B",order:4,exercises:i.slice(0,4)},{name:"Pull B",order:5,exercises:q.slice(0,4)}),D}(e),n="strength"===e.goal?"Strength PPL":"Hypertrophy PPL",u="strength"===e.goal?"strength":"hypertrophy"):"upper_lower"===l?(a=function(e){let s=m(e.equipment),r=b(e.experienceLevel,e.goal),a=new Set;function n(r){return h(r,s,e.injuries,a)}let u=c.upper,l=c.lower,t=[],i=n(u.push);i&&(a.add(i.name),t.push(f(i,r)));let o=n(u.pull);o&&(a.add(o.name),t.push(f(o,r)));let p=n(u.push.filter(e=>e.muscleGroups.includes("shoulders")));p&&(a.add(p.name),t.push(f(p,r,{sets:3})));let d=n(u.pull.filter(e=>e.muscleGroups.includes("back")));d&&(a.add(d.name),t.push(f(d,r,{sets:3})));let y=n(u.push.filter(e=>e.muscleGroups.includes("triceps")));y&&(a.add(y.name),t.push(f(y,{...r,sets:3,repsMin:10,repsMax:15})));let g=n(u.pull.filter(e=>e.muscleGroups.includes("biceps")));g&&(a.add(g.name),t.push(f(g,{...r,sets:3,repsMin:10,repsMax:15})));let I=[],q=n(l.quad);q&&(a.add(q.name),I.push(f(q,r)));let w=n(l.hinge);w&&(a.add(w.name),I.push(f(w,r)));let v=n(l.isolation.filter(e=>e.muscleGroups.includes("quads")));v&&(a.add(v.name),I.push(f(v,{...r,sets:3,repsMin:12,repsMax:15})));let G=n(l.isolation.filter(e=>e.muscleGroups.includes("calves")));G&&(a.add(G.name),I.push(f(G,{...r,sets:3,repsMin:15,repsMax:20})));let x=[{name:"Upper A",order:1,exercises:t},{name:"Lower A",order:2,exercises:I},{name:"Upper B",order:3,exercises:t.slice(0,5)},{name:"Lower B",order:4,exercises:I.slice(0,3)}];return 5===e.trainingDays&&x.push({name:"Upper C",order:5,exercises:t.slice(0,4)}),x}(e),n="Upper/Lower Split",u="hypertrophy"):(a=function(e){let s=m(e.equipment),r=b(e.experienceLevel,e.goal),a=new Set,n=c.fullBody.movements.filter(r=>d(r,s,e.injuries)&&!a.has(r.name)),u=[];for(let e of n.slice(0,5))a.add(e.name),u.push(f(e,{...r,sets:3}));let l=[];for(let e of[...n].reverse().filter(e=>!new Set(u.map(e=>e.name)).has(e.name)).slice(0,4))l.push(f(e,{...r,sets:3}));for(let e of u.slice(0,2))l.find(s=>s.name===e.name)||l.push({...e});let t=[{name:"Full Body A",order:1,exercises:u},{name:"Full Body B",order:2,exercises:l}];return e.trainingDays>=3&&t.push({name:"Full Body C",order:3,exercises:u.slice(0,4)}),t}(e),n="Full Body Program",u="general"),{name:n,type:u,split:l,daysPerWeek:e.trainingDays,workouts:a,notes:`${({ppl:"Push/Pull/Legs",upper_lower:"Upper/Lower",full_body:"Full Body"})[l]} split, ${e.trainingDays}x/week, optimized for ${e.goal.replace(/_/g," ")}`}}({goal:y,experienceLevel:I,trainingDays:q,equipment:w,injuries:v||[],sport:G,gender:u});await o._.$transaction(async e=>{await e.profile.upsert({where:{userId:s},update:{name:a,age:n,gender:u,weight:l,height:i,goal:y,goalDescription:g||null,experienceLevel:I,trainingDays:q,equipment:w,injuries:JSON.stringify(v||[]),sport:G,unitSystem:x,bmr:j,tdee:k,targetCalories:M.calories,targetProtein:M.protein,targetCarbs:M.carbs,targetFat:M.fat,onboardingDone:!0},create:{userId:s,name:a,age:n,gender:u,weight:l,height:i,goal:y,goalDescription:g||null,experienceLevel:I,trainingDays:q,equipment:w,injuries:JSON.stringify(v||[]),sport:G,unitSystem:x,bmr:j,tdee:k,targetCalories:M.calories,targetProtein:M.protein,targetCarbs:M.carbs,targetFat:M.fat,onboardingDone:!0}}),await e.trainingPlan.findUnique({where:{userId:s}})&&await e.trainingPlan.delete({where:{userId:s}}),await e.trainingPlan.create({data:{userId:s,name:P.name,type:P.type,split:P.split,daysPerWeek:P.daysPerWeek,currentWeek:1,mesocycleLength:4,deloadFrequency:4,workouts:{create:P.workouts.map(e=>({name:e.name,order:e.order,exercises:{create:e.exercises.map((e,s)=>({order:s+1,sets:e.sets,repsMin:e.repsMin,repsMax:e.repsMax,rpe:e.rpe,restSeconds:e.restSeconds,exercise:{connectOrCreate:{where:{name:e.name},create:{name:e.name,category:(e.sets<=5&&e.repsMin,"compound"),muscleGroups:JSON.stringify(e.muscleGroups),secondaryMuscles:JSON.stringify([]),equipment:JSON.stringify(e.equipment||[]),fatigueRating:1.5,skillLevel:"intermediate",avoidIfInjury:JSON.stringify([])}}}}))}}))}}})});let S=await (0,p.Gg)();if(S){let e=await (0,p.ed)({userId:S.userId,email:S.email,onboardingDone:!0}),s=t.NextResponse.json({success:!0,plan:{name:P.name,split:P.split,daysPerWeek:P.daysPerWeek},macros:M});return s.cookies.set((0,p.AX)(e)),s}return t.NextResponse.json({success:!0,plan:{name:P.name,split:P.split,daysPerWeek:P.daysPerWeek},macros:M})}catch(e){return console.error("Onboarding error:",e),t.NextResponse.json({error:"Failed to complete onboarding"},{status:500})}}let I=new n.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/user/onboarding/route",pathname:"/api/user/onboarding",filename:"route",bundlePath:"app/api/user/onboarding/route"},resolvedPagePath:"C:\\Users\\Geric\\Desktop\\forc3\\src\\app\\api\\user\\onboarding\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:q,staticGenerationAsyncStorage:w,serverHooks:v}=I,G="/api/user/onboarding/route";function x(){return(0,l.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:w})}},95456:(e,s,r)=>{r.d(s,{AX:()=>c,Gg:()=>p,Rf:()=>m,ed:()=>i});var a=r(86890),n=r(41463),u=r(71615);let l=new TextEncoder().encode(process.env.JWT_SECRET||process.env.NEXTAUTH_SECRET||"forc3-secret-key-change-in-production"),t="forc3_session";async function i(e){return await new a.N(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("30d").sign(l)}async function o(e){try{let{payload:s}=await (0,n._)(e,l);return s}catch{return null}}async function p(){let e=await (0,u.cookies)(),s=e.get(t)?.value;return s?o(s):null}function c(e){return{name:t,value:e,httpOnly:!0,secure:!0,sameSite:"lax",maxAge:2592e3,path:"/"}}function m(){return{name:t,value:"",httpOnly:!0,secure:!0,sameSite:"lax",maxAge:0,path:"/"}}},20728:(e,s,r)=>{r.d(s,{_:()=>n});let a=require("@prisma/client"),n=globalThis.prisma||new a.PrismaClient({log:["warn","error"]})},61165:(e,s,r)=>{r.d(s,{rc:()=>n});var a=r(95456);async function n(){let e=await (0,a.Gg)();return e?.userId??null}r(20728)}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[8948,5972,3112],()=>r(67311));module.exports=a})();