"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/coach/chat/route";
exports.ids = ["app/api/coach/chat/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoach%2Fchat%2Froute&page=%2Fapi%2Fcoach%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoach%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoach%2Fchat%2Froute&page=%2Fapi%2Fcoach%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoach%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Geric_Desktop_forc3_src_app_api_coach_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/coach/chat/route.ts */ \"(rsc)/./src/app/api/coach/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/coach/chat/route\",\n        pathname: \"/api/coach/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/coach/chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Geric\\\\Desktop\\\\forc3\\\\src\\\\app\\\\api\\\\coach\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Geric_Desktop_forc3_src_app_api_coach_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/coach/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb2FjaCUyRmNoYXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNvYWNoJTJGY2hhdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvYWNoJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNHZXJpYyU1Q0Rlc2t0b3AlNUNmb3JjMyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDR2VyaWMlNUNEZXNrdG9wJTVDZm9yYzMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9yYzMvPzEzZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcR2VyaWNcXFxcRGVza3RvcFxcXFxmb3JjM1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjb2FjaFxcXFxjaGF0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jb2FjaC9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29hY2gvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY29hY2gvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEdlcmljXFxcXERlc2t0b3BcXFxcZm9yYzNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY29hY2hcXFxcY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29hY2gvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoach%2Fchat%2Froute&page=%2Fapi%2Fcoach%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoach%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/coach/chat/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/coach/chat/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/session */ \"(rsc)/./src/lib/session.ts\");\n/* harmony import */ var _lib_ai_claude__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ai/claude */ \"(rsc)/./src/lib/ai/claude.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_subscription__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/subscription */ \"(rsc)/./src/lib/subscription.ts\");\n\n\n\n\n\nconst dynamic = \"force-dynamic\";\nfunction isSameDay(a, b) {\n    return a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();\n}\nasync function POST(req) {\n    const userId = await (0,_lib_session__WEBPACK_IMPORTED_MODULE_1__.getCurrentUserId)();\n    if (!userId) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    const { message } = await req.json();\n    if (!message?.trim()) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Message required\"\n        }, {\n            status: 400\n        });\n    }\n    // Check rate limit\n    let sub = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.subscription.findUnique({\n        where: {\n            userId\n        }\n    });\n    if (!sub) {\n        sub = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.subscription.create({\n            data: {\n                userId,\n                tier: \"free\",\n                status: \"active\"\n            }\n        });\n    }\n    const tier = (0,_lib_subscription__WEBPACK_IMPORTED_MODULE_4__.toSimpleTier)(sub.tier);\n    const now = new Date();\n    const usedToday = isSameDay(now, sub.aiMessagesResetAt) ? sub.aiMessagesUsedToday : 0;\n    const remaining = (0,_lib_subscription__WEBPACK_IMPORTED_MODULE_4__.getRemainingMessages)(tier, usedToday);\n    if (remaining <= 0 && tier === \"free\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"limit_reached\",\n            message: \"You've used your 1 daily AI message. Upgrade to Premium for unlimited coaching.\",\n            canSend: false\n        }, {\n            status: 429\n        });\n    }\n    if (!process.env.CLAUDE_API_KEY) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Coach not configured\",\n            message: \"Add CLAUDE_API_KEY to .env.local to enable the AI coach.\"\n        }, {\n            status: 503\n        });\n    }\n    // Increment count for free users\n    if (tier === \"free\") {\n        const newUsed = usedToday + 1;\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.subscription.update({\n            where: {\n                userId\n            },\n            data: {\n                aiMessagesUsedToday: newUsed,\n                aiMessagesResetAt: isSameDay(now, sub.aiMessagesResetAt) ? undefined : now\n            }\n        });\n    }\n    try {\n        const response = await (0,_lib_ai_claude__WEBPACK_IMPORTED_MODULE_2__.askCoach)(userId, message);\n        const newRemaining = tier === \"free\" ? Math.max(0, _lib_subscription__WEBPACK_IMPORTED_MODULE_4__.LIMITS.free.aiMessagesPerDay - (usedToday + 1)) : 999;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response,\n            remaining: newRemaining\n        });\n    } catch (err) {\n        console.error(\"Coach error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Coach unavailable. Try again shortly.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDO1lBQUVDLE9BQU87UUFBd0MsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDN0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvcmMzLy4vc3JjL2FwcC9hcGkvY29hY2gvY2hhdC9yb3V0ZS50cz9hOThjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgZ2V0Q3VycmVudFVzZXJJZCB9IGZyb20gXCJAL2xpYi9zZXNzaW9uXCI7XHJcbmltcG9ydCB7IGFza0NvYWNoIH0gZnJvbSBcIkAvbGliL2FpL2NsYXVkZVwiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XHJcbmltcG9ydCB7IHRvU2ltcGxlVGllciwgZ2V0UmVtYWluaW5nTWVzc2FnZXMsIExJTUlUUyB9IGZyb20gXCJAL2xpYi9zdWJzY3JpcHRpb25cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XHJcblxyXG5mdW5jdGlvbiBpc1NhbWVEYXkoYTogRGF0ZSwgYjogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoXHJcbiAgICBhLmdldEZ1bGxZZWFyKCkgPT09IGIuZ2V0RnVsbFllYXIoKSAmJlxyXG4gICAgYS5nZXRNb250aCgpID09PSBiLmdldE1vbnRoKCkgJiZcclxuICAgIGEuZ2V0RGF0ZSgpID09PSBiLmdldERhdGUoKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCB1c2VySWQgPSBhd2FpdCBnZXRDdXJyZW50VXNlcklkKCk7XHJcbiAgaWYgKCF1c2VySWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcblxyXG4gIGNvbnN0IHsgbWVzc2FnZSB9ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuXHJcbiAgaWYgKCFtZXNzYWdlPy50cmltKCkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1lc3NhZ2UgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgcmF0ZSBsaW1pdFxyXG4gIGxldCBzdWIgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRVbmlxdWUoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcclxuICBpZiAoIXN1Yikge1xyXG4gICAgc3ViID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5jcmVhdGUoeyBkYXRhOiB7IHVzZXJJZCwgdGllcjogXCJmcmVlXCIsIHN0YXR1czogXCJhY3RpdmVcIiB9IH0pO1xyXG4gIH1cclxuICBjb25zdCB0aWVyID0gdG9TaW1wbGVUaWVyKHN1Yi50aWVyKTtcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IHVzZWRUb2RheSA9IGlzU2FtZURheShub3csIHN1Yi5haU1lc3NhZ2VzUmVzZXRBdCkgPyBzdWIuYWlNZXNzYWdlc1VzZWRUb2RheSA6IDA7XHJcbiAgY29uc3QgcmVtYWluaW5nID0gZ2V0UmVtYWluaW5nTWVzc2FnZXModGllciwgdXNlZFRvZGF5KTtcclxuXHJcbiAgaWYgKHJlbWFpbmluZyA8PSAwICYmIHRpZXIgPT09IFwiZnJlZVwiKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBlcnJvcjogXCJsaW1pdF9yZWFjaGVkXCIsXHJcbiAgICAgIG1lc3NhZ2U6IFwiWW91J3ZlIHVzZWQgeW91ciAxIGRhaWx5IEFJIG1lc3NhZ2UuIFVwZ3JhZGUgdG8gUHJlbWl1bSBmb3IgdW5saW1pdGVkIGNvYWNoaW5nLlwiLFxyXG4gICAgICBjYW5TZW5kOiBmYWxzZSxcclxuICAgIH0sIHsgc3RhdHVzOiA0MjkgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXByb2Nlc3MuZW52LkNMQVVERV9BUElfS0VZKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBlcnJvcjogXCJDb2FjaCBub3QgY29uZmlndXJlZFwiLFxyXG4gICAgICBtZXNzYWdlOiBcIkFkZCBDTEFVREVfQVBJX0tFWSB0byAuZW52LmxvY2FsIHRvIGVuYWJsZSB0aGUgQUkgY29hY2guXCIsXHJcbiAgICB9LCB7IHN0YXR1czogNTAzIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5jcmVtZW50IGNvdW50IGZvciBmcmVlIHVzZXJzXHJcbiAgaWYgKHRpZXIgPT09IFwiZnJlZVwiKSB7XHJcbiAgICBjb25zdCBuZXdVc2VkID0gdXNlZFRvZGF5ICsgMTtcclxuICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24udXBkYXRlKHtcclxuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBhaU1lc3NhZ2VzVXNlZFRvZGF5OiBuZXdVc2VkLFxyXG4gICAgICAgIGFpTWVzc2FnZXNSZXNldEF0OiBpc1NhbWVEYXkobm93LCBzdWIuYWlNZXNzYWdlc1Jlc2V0QXQpID8gdW5kZWZpbmVkIDogbm93LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhc2tDb2FjaCh1c2VySWQsIG1lc3NhZ2UpO1xyXG4gICAgY29uc3QgbmV3UmVtYWluaW5nID0gdGllciA9PT0gXCJmcmVlXCIgPyBNYXRoLm1heCgwLCBMSU1JVFMuZnJlZS5haU1lc3NhZ2VzUGVyRGF5IC0gKHVzZWRUb2RheSArIDEpKSA6IDk5OTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlc3BvbnNlLCByZW1haW5pbmc6IG5ld1JlbWFpbmluZyB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJDb2FjaCBlcnJvcjpcIiwgZXJyKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkNvYWNoIHVuYXZhaWxhYmxlLiBUcnkgYWdhaW4gc2hvcnRseS5cIiB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Q3VycmVudFVzZXJJZCIsImFza0NvYWNoIiwicHJpc21hIiwidG9TaW1wbGVUaWVyIiwiZ2V0UmVtYWluaW5nTWVzc2FnZXMiLCJMSU1JVFMiLCJkeW5hbWljIiwiaXNTYW1lRGF5IiwiYSIsImIiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsIlBPU1QiLCJyZXEiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwidHJpbSIsInN1YiIsInN1YnNjcmlwdGlvbiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNyZWF0ZSIsImRhdGEiLCJ0aWVyIiwibm93IiwiRGF0ZSIsInVzZWRUb2RheSIsImFpTWVzc2FnZXNSZXNldEF0IiwiYWlNZXNzYWdlc1VzZWRUb2RheSIsInJlbWFpbmluZyIsImNhblNlbmQiLCJwcm9jZXNzIiwiZW52IiwiQ0xBVURFX0FQSV9LRVkiLCJuZXdVc2VkIiwidXBkYXRlIiwidW5kZWZpbmVkIiwicmVzcG9uc2UiLCJuZXdSZW1haW5pbmciLCJNYXRoIiwibWF4IiwiZnJlZSIsImFpTWVzc2FnZXNQZXJEYXkiLCJlcnIiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/coach/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai/claude.ts":
/*!******************************!*\
  !*** ./src/lib/ai/claude.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   askCoach: () => (/* binding */ askCoach),\n/* harmony export */   checkRecoveryStatus: () => (/* binding */ checkRecoveryStatus),\n/* harmony export */   estimateCalories: () => (/* binding */ estimateCalories),\n/* harmony export */   generateWorkoutNotes: () => (/* binding */ generateWorkoutNotes)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_program_generator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/program-generator */ \"(rsc)/./src/lib/program-generator.ts\");\n\n\n\n// ─── Client ───────────────────────────────────────────────────────────────────\nfunction getClient() {\n    const key = process.env.CLAUDE_API_KEY;\n    if (!key) throw new Error(\"CLAUDE_API_KEY not set\");\n    return new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        apiKey: key\n    });\n}\n// ─── Data Helpers ─────────────────────────────────────────────────────────────\nasync function getUserProfile(userId) {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.profile.findUnique({\n        where: {\n            userId\n        }\n    });\n}\nfunction formatRaceGoals(raceGoals) {\n    if (!raceGoals || !Array.isArray(raceGoals) || raceGoals.length === 0) return \"\";\n    const today = new Date();\n    const lines = raceGoals.map((r)=>{\n        const label = r.type?.replace(/_/g, \" \") || \"event\";\n        if (r.date) {\n            const raceDate = new Date(r.date);\n            const daysOut = Math.max(0, Math.round((raceDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)));\n            const weeksOut = Math.round(daysOut / 7);\n            return `${label} — ${weeksOut} weeks away (${raceDate.toLocaleDateString(\"en-US\", {\n                month: \"short\",\n                day: \"numeric\",\n                year: \"numeric\"\n            })})`;\n        }\n        return label;\n    });\n    return lines.join(\", \");\n}\nasync function getRecentWorkouts(userId, days) {\n    const since = new Date();\n    since.setDate(since.getDate() - days);\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.workoutLog.findMany({\n        where: {\n            userId,\n            startedAt: {\n                gte: since\n            },\n            completedAt: {\n                not: null\n            }\n        },\n        include: {\n            workout: {\n                select: {\n                    name: true\n                }\n            },\n            exerciseLogs: {\n                include: {\n                    exercise: {\n                        select: {\n                            name: true\n                        }\n                    },\n                    sets: {\n                        orderBy: {\n                            setNumber: \"asc\"\n                        }\n                    }\n                }\n            }\n        },\n        orderBy: {\n            startedAt: \"desc\"\n        },\n        take: 10\n    });\n}\nasync function getRecentNutrition(userId, days) {\n    const since = new Date();\n    since.setDate(since.getDate() - days);\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.nutritionLog.findMany({\n        where: {\n            userId,\n            date: {\n                gte: since\n            }\n        },\n        orderBy: {\n            date: \"desc\"\n        },\n        take: 30\n    });\n}\nasync function getCurrentPlan(userId) {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.trainingPlan.findUnique({\n        where: {\n            userId\n        },\n        include: {\n            workouts: {\n                include: {\n                    exercises: {\n                        include: {\n                            exercise: {\n                                select: {\n                                    name: true,\n                                    muscleGroups: true\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    });\n}\n// ─── Formatters ───────────────────────────────────────────────────────────────\nfunction formatRecentWorkouts(workouts) {\n    if (workouts.length === 0) return \"No workouts logged in this period.\";\n    return workouts.slice(0, 5).map((w)=>{\n        const totalVolume = w.exerciseLogs.reduce((s, el)=>s + el.sets.reduce((ss, set)=>ss + set.weight * set.reps, 0), 0);\n        const topSets = w.exerciseLogs.slice(0, 3).map((el)=>{\n            const best = el.sets.reduce((b, s)=>s.weight > (b?.weight || 0) ? s : b, el.sets[0]);\n            return best ? `${el.exercise.name}: ${best.weight}×${best.reps}` : \"\";\n        }).filter(Boolean).join(\", \");\n        return `${new Date(w.startedAt).toLocaleDateString(\"en-US\", {\n            weekday: \"short\",\n            month: \"short\",\n            day: \"numeric\"\n        })}: ${w.workout?.name || \"Workout\"} | ${Math.round(totalVolume)} lbs | ${topSets}`;\n    }).join(\"\\n\");\n}\nfunction formatRecentNutrition(logs) {\n    if (logs.length === 0) return \"No nutrition logged.\";\n    // Group by day\n    const byDay = {};\n    for (const l of logs){\n        const day = l.date.toISOString().slice(0, 10);\n        if (!byDay[day]) byDay[day] = {\n            cals: 0,\n            protein: 0\n        };\n        byDay[day].cals += l.calories;\n        byDay[day].protein += l.protein;\n    }\n    return Object.entries(byDay).slice(0, 5).map(([day, d])=>`${day}: ${Math.round(d.cals)} cal, ${Math.round(d.protein)}g protein`).join(\"\\n\");\n}\n// ─── System Prompt ────────────────────────────────────────────────────────────\nasync function buildCoachSystemPrompt(userId) {\n    const [profile, workouts, nutrition, plan] = await Promise.all([\n        getUserProfile(userId),\n        getRecentWorkouts(userId, 14),\n        getRecentNutrition(userId, 7),\n        getCurrentPlan(userId)\n    ]);\n    const raceGoalsStr = formatRaceGoals(profile?.raceGoals);\n    const hasRaces = !!raceGoalsStr;\n    // Calculate days to earliest race\n    let raceTaperNote = \"\";\n    if (profile?.raceGoals && Array.isArray(profile.raceGoals)) {\n        const datesGoals = profile.raceGoals.filter((r)=>r.date).map((r)=>({\n                type: r.type,\n                days: Math.max(0, Math.round((new Date(r.date).getTime() - Date.now()) / 86400000))\n            })).sort((a, b)=>a.days - b.days);\n        if (datesGoals.length > 0) {\n            const next = datesGoals[0];\n            if (next.days <= 21) {\n                raceTaperNote = `\\n⚠️ TAPER ALERT: Only ${next.days} days until ${next.type?.replace(/_/g, \" \")}. Recommend reducing volume 40-60%, maintaining some race-pace work, prioritizing sleep and fueling.`;\n            } else if (next.days <= 42) {\n                raceTaperNote = `\\nRACE APPROACHING: ${next.days} days to ${next.type?.replace(/_/g, \" \")}. Begin building race-specific fitness, practice race nutrition, reduce junk volume.`;\n            }\n        }\n    }\n    return `You are FORC3 AI Coach — a world-class personal trainer and nutrition coach with PhD-level expertise in exercise science and sports nutrition.\r\n\r\n## YOUR CLIENT\r\nName: ${profile?.name || \"Athlete\"}\r\nGoal: ${profile?.goal || \"general fitness\"}\r\nExperience: ${profile?.experienceLevel || \"intermediate\"}\r\nTraining days: ${profile?.trainingDays || 4}/week\r\nEquipment: ${profile?.equipment || \"full_gym\"}\r\nInjuries/Limitations: ${profile?.injuries ? JSON.parse(profile.injuries).join(\", \") || \"None\" : \"None\"}\r\n${profile?.sport ? `Sport focus: ${profile.sport}` : \"\"}\r\n${hasRaces ? `\\n## RACE / EVENT GOALS\\nThis athlete is training for: ${raceGoalsStr}\\nPrioritize sport-specific cardio programming and taper appropriately as the race approaches.${raceTaperNote}` : \"\"}\r\n\r\nStats:\r\n- Weight: ${profile?.weight ? `${profile.weight} ${profile?.unitSystem === \"imperial\" ? \"lbs\" : \"kg\"}` : \"not set\"}\r\n- Daily calorie target: ${profile?.targetCalories ? `${Math.round(profile.targetCalories)} cal` : \"not set\"}\r\n- Protein target: ${profile?.targetProtein ? `${Math.round(profile.targetProtein)}g` : \"not set\"}\r\n\r\n## CURRENT TRAINING PLAN\r\n${plan ? `${plan.name} — ${plan.split} split\\nWeek ${plan.currentWeek} of mesocycle\\n${plan.currentPhase ? `Phase: ${plan.currentPhase}` : \"\"}` : \"No plan yet — help them set one up.\"}\r\n\r\n## HYBRID WEEKLY SCHEDULE\r\n${(()=>{\n        try {\n            if (!profile) return \"No profile data available.\";\n            const hybridPlan = (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_2__.generateHybridWeek)({\n                goal: profile.goal || \"general\",\n                experienceLevel: profile.experienceLevel || \"intermediate\",\n                trainingDays: profile.trainingDays || 4,\n                sport: profile.sport || undefined,\n                raceGoals: Array.isArray(profile.raceGoals) ? profile.raceGoals : [],\n                trainingVolume: profile.trainingVolume || \"intermediate\"\n            });\n            return (0,_lib_program_generator__WEBPACK_IMPORTED_MODULE_2__.formatHybridWeekForCoach)(hybridPlan);\n        } catch  {\n            return \"Hybrid schedule unavailable.\";\n        }\n    })()}\r\n\r\n## RECENT PERFORMANCE (Last 2 weeks)\r\n${formatRecentWorkouts(workouts)}\r\n\r\n## RECENT NUTRITION (Last 7 days)\r\n${formatRecentNutrition(nutrition)}\r\n\r\n## YOUR COACHING STYLE\r\n- Direct and concise — they're probably at the gym or on the go\r\n- Evidence-based: cite real sports science principles when helpful\r\n- Personalized: always reference THEIR actual numbers and data\r\n- Motivating without being cheesy\r\n- Specific: \"add 5 lbs to your bench press\" not \"try going heavier\"\r\n- Flag concerning patterns (overtraining signs, undereating, etc.)\r\n${hasRaces ? \"- Reference their upcoming race when giving advice — connect today's training to their race goal\" : \"\"}\r\n\r\n## RULES\r\n1. Always reference their actual data when giving advice\r\n2. If they ask about changing their plan, explain the WHY\r\n3. Be specific with numbers — \"aim for 180g protein\" not \"eat more protein\"\r\n4. Keep responses concise — 3-5 sentences unless they ask for detail\r\n5. If you notice concerning patterns, flag them proactively`;\n}\n// ─── Main Ask Function ────────────────────────────────────────────────────────\nasync function askCoach(userId, message) {\n    const client = getClient();\n    // Load recent conversation history (last 10 messages)\n    const history = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.coachMessage.findMany({\n        where: {\n            userId\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        },\n        take: 10\n    });\n    history.reverse();\n    const systemPrompt = await buildCoachSystemPrompt(userId);\n    const messages = [\n        ...history.map((m)=>({\n                role: m.role,\n                content: m.content\n            })),\n        {\n            role: \"user\",\n            content: message\n        }\n    ];\n    const response = await client.messages.create({\n        model: \"claude-haiku-4-5-20251001\",\n        max_tokens: 1024,\n        system: systemPrompt,\n        messages\n    });\n    const responseText = response.content[0].type === \"text\" ? response.content[0].text : \"\";\n    // Save both messages\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.coachMessage.createMany({\n        data: [\n            {\n                userId,\n                role: \"user\",\n                content: message\n            },\n            {\n                userId,\n                role: \"assistant\",\n                content: responseText\n            }\n        ]\n    });\n    return responseText;\n}\n// ─── AI Calorie Estimation ────────────────────────────────────────────────────\nasync function estimateCalories(description) {\n    const client = getClient();\n    const response = await client.messages.create({\n        model: \"claude-haiku-4-5-20251001\",\n        max_tokens: 256,\n        messages: [\n            {\n                role: \"user\",\n                content: `Estimate the nutrition for this food/meal: \"${description}\"\r\n\r\nRespond in JSON only (no markdown):\r\n{\r\n  \"name\": \"cleaned up food name\",\r\n  \"servingSize\": \"estimated serving (e.g., '1 cup', '200g', '1 piece')\",\r\n  \"calories\": number,\r\n  \"protein\": number,\r\n  \"carbs\": number,\r\n  \"fat\": number,\r\n  \"confidence\": \"high\" or \"medium\" or \"low\"\r\n}\r\n\r\nBe realistic. If it's a meal, estimate the whole thing. Round to whole numbers.`\n            }\n        ]\n    });\n    const text = response.content[0].type === \"text\" ? response.content[0].text : \"{}\";\n    const cleaned = text.replace(/```json\\n?|\\n?```/g, \"\").trim();\n    return JSON.parse(cleaned);\n}\n// ─── Workout Notes ────────────────────────────────────────────────────────────\nasync function generateWorkoutNotes(userId, workoutName, exercises) {\n    const client = getClient();\n    const [profile, recentLogs] = await Promise.all([\n        getUserProfile(userId),\n        getRecentWorkouts(userId, 7)\n    ]);\n    const recentSummary = formatRecentWorkouts(recentLogs);\n    const response = await client.messages.create({\n        model: \"claude-haiku-4-5-20251001\",\n        max_tokens: 256,\n        messages: [\n            {\n                role: \"user\",\n                content: `Generate 2-3 short, personalized coaching tips for today's workout.\r\n\r\nWorkout: ${workoutName}\r\nExercises: ${exercises.join(\", \")}\r\nRecent performance: ${recentSummary}\r\nGoal: ${profile?.goal || \"general fitness\"}\r\nExperience: ${profile?.experienceLevel || \"intermediate\"}\r\n\r\nRules:\r\n- Specific to TODAY's exercises\r\n- Reference actual numbers if available\r\n- Keep each tip under 20 words\r\n- Motivating but practical\r\n\r\nRespond as JSON array only: [\"tip 1\", \"tip 2\", \"tip 3\"]`\n            }\n        ]\n    });\n    const text = response.content[0].type === \"text\" ? response.content[0].text : \"[]\";\n    const cleaned = text.replace(/```json\\n?|\\n?```/g, \"\").trim();\n    try {\n        return JSON.parse(cleaned);\n    } catch  {\n        return [\n            \"Focus on form today.\",\n            \"Push hard on your working sets.\",\n            \"Stay hydrated!\"\n        ];\n    }\n}\n// ─── Recovery Detector ────────────────────────────────────────────────────────\nasync function checkRecoveryStatus(userId) {\n    const [workouts, nutrition, profile] = await Promise.all([\n        getRecentWorkouts(userId, 14),\n        getRecentNutrition(userId, 7),\n        getUserProfile(userId)\n    ]);\n    const signals = {\n        rpeCreeping: false,\n        performanceDropping: false,\n        missedWorkouts: false,\n        nutritionLow: false\n    };\n    // Check RPE creep across sessions\n    if (workouts.length >= 4) {\n        const rpeSessions = workouts.filter((w)=>w.overallRpe !== null).map((w)=>w.overallRpe);\n        if (rpeSessions.length >= 3) {\n            const firstHalf = rpeSessions.slice(Math.floor(rpeSessions.length / 2));\n            const secondHalf = rpeSessions.slice(0, Math.floor(rpeSessions.length / 2));\n            const avg = (arr)=>arr.reduce((a, b)=>a + b, 0) / arr.length;\n            if (avg(firstHalf) - avg(secondHalf) > 1) signals.rpeCreeping = true;\n        }\n    }\n    // Check if missing workouts\n    const targetDays = profile?.trainingDays || 4;\n    const thisWeekCount = workouts.filter((w)=>{\n        const d = new Date(w.startedAt);\n        const monday = new Date();\n        monday.setDate(monday.getDate() - (monday.getDay() + 6) % 7);\n        monday.setHours(0, 0, 0, 0);\n        return d >= monday;\n    }).length;\n    if (workouts.length === 0) signals.missedWorkouts = true;\n    // Check nutrition\n    if (nutrition.length > 0 && profile?.targetCalories) {\n        const avgCals = nutrition.reduce((s, n)=>s + n.calories, 0) / Math.max(nutrition.length, 1);\n        if (avgCals < profile.targetCalories * 0.75) signals.nutritionLow = true;\n    }\n    const warningCount = Object.values(signals).filter(Boolean).length;\n    if (warningCount >= 2) {\n        return {\n            status: \"critical\",\n            signals,\n            recommendation: \"Multiple recovery signals are elevated. Prioritize sleep, eat more, and consider a light week.\"\n        };\n    } else if (warningCount === 1) {\n        return {\n            status: \"warning\",\n            signals,\n            recommendation: signals.nutritionLow ? \"You may be under-eating. Make sure to hit your calorie target.\" : \"Some fatigue signals detected. Monitor closely and don't skip rest.\"\n        };\n    }\n    return {\n        status: \"good\",\n        signals,\n        recommendation: \"Recovery looks solid. Keep the intensity up!\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUd4SixNQUFNO0lBQ1QsSUFBSStDLFNBQVMvQyxNQUFNLEtBQUssR0FBRzBJLFFBQVFHLGNBQWMsR0FBRztJQUVwRCxrQkFBa0I7SUFDbEIsSUFBSTlELFVBQVUvRSxNQUFNLEdBQUcsS0FBS1AsU0FBUzJHLGdCQUFnQjtRQUNuRCxNQUFNdUQsVUFBVTVFLFVBQVV6QixNQUFNLENBQUMsQ0FBQ0MsR0FBR3FHLElBQU1yRyxJQUFJcUcsRUFBRWxGLFFBQVEsRUFBRSxLQUFLOUQsS0FBS0MsR0FBRyxDQUFDa0UsVUFBVS9FLE1BQU0sRUFBRTtRQUMzRixJQUFJMkosVUFBVWxLLFFBQVEyRyxjQUFjLEdBQUcsTUFBTXNDLFFBQVFJLFlBQVksR0FBRztJQUN0RTtJQUVBLE1BQU1lLGVBQWVsRixPQUFPbUYsTUFBTSxDQUFDcEIsU0FBUzFFLE1BQU0sQ0FBQ0MsU0FBU2pFLE1BQU07SUFFbEUsSUFBSTZKLGdCQUFnQixHQUFHO1FBQ3JCLE9BQU87WUFDTEUsUUFBUTtZQUNSckI7WUFDQXNCLGdCQUFnQjtRQUNsQjtJQUNGLE9BQU8sSUFBSUgsaUJBQWlCLEdBQUc7UUFDN0IsT0FBTztZQUNMRSxRQUFRO1lBQ1JyQjtZQUNBc0IsZ0JBQWdCdEIsUUFBUUksWUFBWSxHQUNoQyxtRUFDQTtRQUNOO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xpQixRQUFRO1FBQ1JyQjtRQUNBc0IsZ0JBQWdCO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb3JjMy8uL3NyYy9saWIvYWkvY2xhdWRlLnRzP2ZlZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFudGhyb3BpYyBmcm9tIFwiQGFudGhyb3BpYy1haS9zZGtcIjtcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUh5YnJpZFdlZWssIGZvcm1hdEh5YnJpZFdlZWtGb3JDb2FjaCB9IGZyb20gXCJAL2xpYi9wcm9ncmFtLWdlbmVyYXRvclwiO1xyXG5cclxuLy8g4pSA4pSA4pSAIENsaWVudCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmZ1bmN0aW9uIGdldENsaWVudCgpIHtcclxuICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5DTEFVREVfQVBJX0tFWTtcclxuICBpZiAoIWtleSkgdGhyb3cgbmV3IEVycm9yKFwiQ0xBVURFX0FQSV9LRVkgbm90IHNldFwiKTtcclxuICByZXR1cm4gbmV3IEFudGhyb3BpYyh7IGFwaUtleToga2V5IH0pO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvYWNoQ29udGV4dCB7XHJcbiAgcmVjZW50V29ya291dHM/OiBudW1iZXI7XHJcbiAgY3VycmVudEV4ZXJjaXNlPzogc3RyaW5nO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgRGF0YSBIZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUodXNlcklkOiBzdHJpbmcpIHtcclxuICByZXR1cm4gcHJpc21hLnByb2ZpbGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRSYWNlR29hbHMocmFjZUdvYWxzOiB1bmtub3duKTogc3RyaW5nIHtcclxuICBpZiAoIXJhY2VHb2FscyB8fCAhQXJyYXkuaXNBcnJheShyYWNlR29hbHMpIHx8IHJhY2VHb2Fscy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBsaW5lcyA9IHJhY2VHb2Fscy5tYXAoKHI6IHsgdHlwZT86IHN0cmluZzsgZGF0ZT86IHN0cmluZyB9KSA9PiB7XHJcbiAgICBjb25zdCBsYWJlbCA9IHIudHlwZT8ucmVwbGFjZSgvXy9nLCBcIiBcIikgfHwgXCJldmVudFwiO1xyXG4gICAgaWYgKHIuZGF0ZSkge1xyXG4gICAgICBjb25zdCByYWNlRGF0ZSA9IG5ldyBEYXRlKHIuZGF0ZSk7XHJcbiAgICAgIGNvbnN0IGRheXNPdXQgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKChyYWNlRGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKSk7XHJcbiAgICAgIGNvbnN0IHdlZWtzT3V0ID0gTWF0aC5yb3VuZChkYXlzT3V0IC8gNyk7XHJcbiAgICAgIHJldHVybiBgJHtsYWJlbH0g4oCUICR7d2Vla3NPdXR9IHdlZWtzIGF3YXkgKCR7cmFjZURhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwgeyBtb250aDogXCJzaG9ydFwiLCBkYXk6IFwibnVtZXJpY1wiLCB5ZWFyOiBcIm51bWVyaWNcIiB9KX0pYDtcclxuICAgIH1cclxuICAgIHJldHVybiBsYWJlbDtcclxuICB9KTtcclxuICByZXR1cm4gbGluZXMuam9pbihcIiwgXCIpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRXb3Jrb3V0cyh1c2VySWQ6IHN0cmluZywgZGF5czogbnVtYmVyKSB7XHJcbiAgY29uc3Qgc2luY2UgPSBuZXcgRGF0ZSgpO1xyXG4gIHNpbmNlLnNldERhdGUoc2luY2UuZ2V0RGF0ZSgpIC0gZGF5cyk7XHJcbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0TG9nLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB7IHVzZXJJZCwgc3RhcnRlZEF0OiB7IGd0ZTogc2luY2UgfSwgY29tcGxldGVkQXQ6IHsgbm90OiBudWxsIH0gfSxcclxuICAgIGluY2x1ZGU6IHtcclxuICAgICAgd29ya291dDogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSB9IH0sXHJcbiAgICAgIGV4ZXJjaXNlTG9nczoge1xyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIGV4ZXJjaXNlOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfSxcclxuICAgICAgICAgIHNldHM6IHsgb3JkZXJCeTogeyBzZXROdW1iZXI6IFwiYXNjXCIgfSB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgb3JkZXJCeTogeyBzdGFydGVkQXQ6IFwiZGVzY1wiIH0sXHJcbiAgICB0YWtlOiAxMCxcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjZW50TnV0cml0aW9uKHVzZXJJZDogc3RyaW5nLCBkYXlzOiBudW1iZXIpIHtcclxuICBjb25zdCBzaW5jZSA9IG5ldyBEYXRlKCk7XHJcbiAgc2luY2Uuc2V0RGF0ZShzaW5jZS5nZXREYXRlKCkgLSBkYXlzKTtcclxuICByZXR1cm4gcHJpc21hLm51dHJpdGlvbkxvZy5maW5kTWFueSh7XHJcbiAgICB3aGVyZTogeyB1c2VySWQsIGRhdGU6IHsgZ3RlOiBzaW5jZSB9IH0sXHJcbiAgICBvcmRlckJ5OiB7IGRhdGU6IFwiZGVzY1wiIH0sXHJcbiAgICB0YWtlOiAzMCxcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFBsYW4odXNlcklkOiBzdHJpbmcpIHtcclxuICByZXR1cm4gcHJpc21hLnRyYWluaW5nUGxhbi5maW5kVW5pcXVlKHtcclxuICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxyXG4gICAgaW5jbHVkZToge1xyXG4gICAgICB3b3Jrb3V0czoge1xyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIGV4ZXJjaXNlczogeyBpbmNsdWRlOiB7IGV4ZXJjaXNlOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBtdXNjbGVHcm91cHM6IHRydWUgfSB9IH0gfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9KTtcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIEZvcm1hdHRlcnMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5mdW5jdGlvbiBmb3JtYXRSZWNlbnRXb3Jrb3V0cyh3b3Jrb3V0czogQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRSZWNlbnRXb3Jrb3V0cz4+KTogc3RyaW5nIHtcclxuICBpZiAod29ya291dHMubGVuZ3RoID09PSAwKSByZXR1cm4gXCJObyB3b3Jrb3V0cyBsb2dnZWQgaW4gdGhpcyBwZXJpb2QuXCI7XHJcbiAgcmV0dXJuIHdvcmtvdXRzLnNsaWNlKDAsIDUpLm1hcCh3ID0+IHtcclxuICAgIGNvbnN0IHRvdGFsVm9sdW1lID0gdy5leGVyY2lzZUxvZ3MucmVkdWNlKChzLCBlbCkgPT5cclxuICAgICAgcyArIGVsLnNldHMucmVkdWNlKChzcywgc2V0KSA9PiBzcyArIHNldC53ZWlnaHQgKiBzZXQucmVwcywgMCksIDBcclxuICAgICk7XHJcbiAgICBjb25zdCB0b3BTZXRzID0gdy5leGVyY2lzZUxvZ3Muc2xpY2UoMCwgMykubWFwKGVsID0+IHtcclxuICAgICAgY29uc3QgYmVzdCA9IGVsLnNldHMucmVkdWNlKChiLCBzKSA9PiBzLndlaWdodCA+IChiPy53ZWlnaHQgfHwgMCkgPyBzIDogYiwgZWwuc2V0c1swXSk7XHJcbiAgICAgIHJldHVybiBiZXN0ID8gYCR7ZWwuZXhlcmNpc2UubmFtZX06ICR7YmVzdC53ZWlnaHR9w5cke2Jlc3QucmVwc31gIDogXCJcIjtcclxuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiLCBcIik7XHJcbiAgICByZXR1cm4gYCR7bmV3IERhdGUody5zdGFydGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIsIHsgd2Vla2RheTogXCJzaG9ydFwiLCBtb250aDogXCJzaG9ydFwiLCBkYXk6IFwibnVtZXJpY1wiIH0pfTogJHt3LndvcmtvdXQ/Lm5hbWUgfHwgXCJXb3Jrb3V0XCJ9IHwgJHtNYXRoLnJvdW5kKHRvdGFsVm9sdW1lKX0gbGJzIHwgJHt0b3BTZXRzfWA7XHJcbiAgfSkuam9pbihcIlxcblwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0UmVjZW50TnV0cml0aW9uKGxvZ3M6IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0UmVjZW50TnV0cml0aW9uPj4pOiBzdHJpbmcge1xyXG4gIGlmIChsb2dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiTm8gbnV0cml0aW9uIGxvZ2dlZC5cIjtcclxuICAvLyBHcm91cCBieSBkYXlcclxuICBjb25zdCBieURheTogUmVjb3JkPHN0cmluZywgeyBjYWxzOiBudW1iZXI7IHByb3RlaW46IG51bWJlciB9PiA9IHt9O1xyXG4gIGZvciAoY29uc3QgbCBvZiBsb2dzKSB7XHJcbiAgICBjb25zdCBkYXkgPSBsLmRhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XHJcbiAgICBpZiAoIWJ5RGF5W2RheV0pIGJ5RGF5W2RheV0gPSB7IGNhbHM6IDAsIHByb3RlaW46IDAgfTtcclxuICAgIGJ5RGF5W2RheV0uY2FscyArPSBsLmNhbG9yaWVzO1xyXG4gICAgYnlEYXlbZGF5XS5wcm90ZWluICs9IGwucHJvdGVpbjtcclxuICB9XHJcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGJ5RGF5KS5zbGljZSgwLCA1KS5tYXAoKFtkYXksIGRdKSA9PlxyXG4gICAgYCR7ZGF5fTogJHtNYXRoLnJvdW5kKGQuY2Fscyl9IGNhbCwgJHtNYXRoLnJvdW5kKGQucHJvdGVpbil9ZyBwcm90ZWluYFxyXG4gICkuam9pbihcIlxcblwiKTtcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIFN5c3RlbSBQcm9tcHQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5hc3luYyBmdW5jdGlvbiBidWlsZENvYWNoU3lzdGVtUHJvbXB0KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBbcHJvZmlsZSwgd29ya291dHMsIG51dHJpdGlvbiwgcGxhbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBnZXRVc2VyUHJvZmlsZSh1c2VySWQpLFxyXG4gICAgZ2V0UmVjZW50V29ya291dHModXNlcklkLCAxNCksXHJcbiAgICBnZXRSZWNlbnROdXRyaXRpb24odXNlcklkLCA3KSxcclxuICAgIGdldEN1cnJlbnRQbGFuKHVzZXJJZCksXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IHJhY2VHb2Fsc1N0ciA9IGZvcm1hdFJhY2VHb2Fscyhwcm9maWxlPy5yYWNlR29hbHMpO1xyXG4gIGNvbnN0IGhhc1JhY2VzID0gISFyYWNlR29hbHNTdHI7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBkYXlzIHRvIGVhcmxpZXN0IHJhY2VcclxuICBsZXQgcmFjZVRhcGVyTm90ZSA9IFwiXCI7XHJcbiAgaWYgKHByb2ZpbGU/LnJhY2VHb2FscyAmJiBBcnJheS5pc0FycmF5KHByb2ZpbGUucmFjZUdvYWxzKSkge1xyXG4gICAgY29uc3QgZGF0ZXNHb2FscyA9IChwcm9maWxlLnJhY2VHb2FscyBhcyB7IHR5cGU/OiBzdHJpbmc7IGRhdGU/OiBzdHJpbmcgfVtdKVxyXG4gICAgICAuZmlsdGVyKHIgPT4gci5kYXRlKVxyXG4gICAgICAubWFwKHIgPT4gKHsgdHlwZTogci50eXBlLCBkYXlzOiBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKChuZXcgRGF0ZShyLmRhdGUhKS5nZXRUaW1lKCkgLSBEYXRlLm5vdygpKSAvIDg2NDAwMDAwKSkgfSkpXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRheXMgLSBiLmRheXMpO1xyXG5cclxuICAgIGlmIChkYXRlc0dvYWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgbmV4dCA9IGRhdGVzR29hbHNbMF07XHJcbiAgICAgIGlmIChuZXh0LmRheXMgPD0gMjEpIHtcclxuICAgICAgICByYWNlVGFwZXJOb3RlID0gYFxcbuKaoO+4jyBUQVBFUiBBTEVSVDogT25seSAke25leHQuZGF5c30gZGF5cyB1bnRpbCAke25leHQudHlwZT8ucmVwbGFjZSgvXy9nLCBcIiBcIil9LiBSZWNvbW1lbmQgcmVkdWNpbmcgdm9sdW1lIDQwLTYwJSwgbWFpbnRhaW5pbmcgc29tZSByYWNlLXBhY2Ugd29yaywgcHJpb3JpdGl6aW5nIHNsZWVwIGFuZCBmdWVsaW5nLmA7XHJcbiAgICAgIH0gZWxzZSBpZiAobmV4dC5kYXlzIDw9IDQyKSB7XHJcbiAgICAgICAgcmFjZVRhcGVyTm90ZSA9IGBcXG5SQUNFIEFQUFJPQUNISU5HOiAke25leHQuZGF5c30gZGF5cyB0byAke25leHQudHlwZT8ucmVwbGFjZSgvXy9nLCBcIiBcIil9LiBCZWdpbiBidWlsZGluZyByYWNlLXNwZWNpZmljIGZpdG5lc3MsIHByYWN0aWNlIHJhY2UgbnV0cml0aW9uLCByZWR1Y2UganVuayB2b2x1bWUuYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGBZb3UgYXJlIEZPUkMzIEFJIENvYWNoIOKAlCBhIHdvcmxkLWNsYXNzIHBlcnNvbmFsIHRyYWluZXIgYW5kIG51dHJpdGlvbiBjb2FjaCB3aXRoIFBoRC1sZXZlbCBleHBlcnRpc2UgaW4gZXhlcmNpc2Ugc2NpZW5jZSBhbmQgc3BvcnRzIG51dHJpdGlvbi5cclxuXHJcbiMjIFlPVVIgQ0xJRU5UXHJcbk5hbWU6ICR7cHJvZmlsZT8ubmFtZSB8fCBcIkF0aGxldGVcIn1cclxuR29hbDogJHtwcm9maWxlPy5nb2FsIHx8IFwiZ2VuZXJhbCBmaXRuZXNzXCJ9XHJcbkV4cGVyaWVuY2U6ICR7cHJvZmlsZT8uZXhwZXJpZW5jZUxldmVsIHx8IFwiaW50ZXJtZWRpYXRlXCJ9XHJcblRyYWluaW5nIGRheXM6ICR7cHJvZmlsZT8udHJhaW5pbmdEYXlzIHx8IDR9L3dlZWtcclxuRXF1aXBtZW50OiAke3Byb2ZpbGU/LmVxdWlwbWVudCB8fCBcImZ1bGxfZ3ltXCJ9XHJcbkluanVyaWVzL0xpbWl0YXRpb25zOiAke3Byb2ZpbGU/LmluanVyaWVzID8gSlNPTi5wYXJzZShwcm9maWxlLmluanVyaWVzKS5qb2luKFwiLCBcIikgfHwgXCJOb25lXCIgOiBcIk5vbmVcIn1cclxuJHtwcm9maWxlPy5zcG9ydCA/IGBTcG9ydCBmb2N1czogJHtwcm9maWxlLnNwb3J0fWAgOiBcIlwifVxyXG4ke2hhc1JhY2VzID8gYFxcbiMjIFJBQ0UgLyBFVkVOVCBHT0FMU1xcblRoaXMgYXRobGV0ZSBpcyB0cmFpbmluZyBmb3I6ICR7cmFjZUdvYWxzU3RyfVxcblByaW9yaXRpemUgc3BvcnQtc3BlY2lmaWMgY2FyZGlvIHByb2dyYW1taW5nIGFuZCB0YXBlciBhcHByb3ByaWF0ZWx5IGFzIHRoZSByYWNlIGFwcHJvYWNoZXMuJHtyYWNlVGFwZXJOb3RlfWAgOiBcIlwifVxyXG5cclxuU3RhdHM6XHJcbi0gV2VpZ2h0OiAke3Byb2ZpbGU/LndlaWdodCA/IGAke3Byb2ZpbGUud2VpZ2h0fSAke3Byb2ZpbGU/LnVuaXRTeXN0ZW0gPT09IFwiaW1wZXJpYWxcIiA/IFwibGJzXCIgOiBcImtnXCJ9YCA6IFwibm90IHNldFwifVxyXG4tIERhaWx5IGNhbG9yaWUgdGFyZ2V0OiAke3Byb2ZpbGU/LnRhcmdldENhbG9yaWVzID8gYCR7TWF0aC5yb3VuZChwcm9maWxlLnRhcmdldENhbG9yaWVzKX0gY2FsYCA6IFwibm90IHNldFwifVxyXG4tIFByb3RlaW4gdGFyZ2V0OiAke3Byb2ZpbGU/LnRhcmdldFByb3RlaW4gPyBgJHtNYXRoLnJvdW5kKHByb2ZpbGUudGFyZ2V0UHJvdGVpbil9Z2AgOiBcIm5vdCBzZXRcIn1cclxuXHJcbiMjIENVUlJFTlQgVFJBSU5JTkcgUExBTlxyXG4ke3BsYW4gPyBgJHtwbGFuLm5hbWV9IOKAlCAke3BsYW4uc3BsaXR9IHNwbGl0XFxuV2VlayAke3BsYW4uY3VycmVudFdlZWt9IG9mIG1lc29jeWNsZVxcbiR7cGxhbi5jdXJyZW50UGhhc2UgPyBgUGhhc2U6ICR7cGxhbi5jdXJyZW50UGhhc2V9YCA6IFwiXCJ9YCA6IFwiTm8gcGxhbiB5ZXQg4oCUIGhlbHAgdGhlbSBzZXQgb25lIHVwLlwifVxyXG5cclxuIyMgSFlCUklEIFdFRUtMWSBTQ0hFRFVMRVxyXG4keygoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcHJvZmlsZSkgcmV0dXJuIFwiTm8gcHJvZmlsZSBkYXRhIGF2YWlsYWJsZS5cIjtcclxuICAgIGNvbnN0IGh5YnJpZFBsYW4gPSBnZW5lcmF0ZUh5YnJpZFdlZWsoe1xyXG4gICAgICBnb2FsOiBwcm9maWxlLmdvYWwgfHwgXCJnZW5lcmFsXCIsXHJcbiAgICAgIGV4cGVyaWVuY2VMZXZlbDogcHJvZmlsZS5leHBlcmllbmNlTGV2ZWwgfHwgXCJpbnRlcm1lZGlhdGVcIixcclxuICAgICAgdHJhaW5pbmdEYXlzOiBwcm9maWxlLnRyYWluaW5nRGF5cyB8fCA0LFxyXG4gICAgICBzcG9ydDogcHJvZmlsZS5zcG9ydCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHJhY2VHb2FsczogQXJyYXkuaXNBcnJheShwcm9maWxlLnJhY2VHb2FscykgPyBwcm9maWxlLnJhY2VHb2FscyBhcyB7IHR5cGU6IHN0cmluZzsgZGF0ZT86IHN0cmluZyB9W10gOiBbXSxcclxuICAgICAgdHJhaW5pbmdWb2x1bWU6IHByb2ZpbGUudHJhaW5pbmdWb2x1bWUgfHwgXCJpbnRlcm1lZGlhdGVcIixcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1hdEh5YnJpZFdlZWtGb3JDb2FjaChoeWJyaWRQbGFuKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBcIkh5YnJpZCBzY2hlZHVsZSB1bmF2YWlsYWJsZS5cIjtcclxuICB9XHJcbn0pKCl9XHJcblxyXG4jIyBSRUNFTlQgUEVSRk9STUFOQ0UgKExhc3QgMiB3ZWVrcylcclxuJHtmb3JtYXRSZWNlbnRXb3Jrb3V0cyh3b3Jrb3V0cyl9XHJcblxyXG4jIyBSRUNFTlQgTlVUUklUSU9OIChMYXN0IDcgZGF5cylcclxuJHtmb3JtYXRSZWNlbnROdXRyaXRpb24obnV0cml0aW9uKX1cclxuXHJcbiMjIFlPVVIgQ09BQ0hJTkcgU1RZTEVcclxuLSBEaXJlY3QgYW5kIGNvbmNpc2Ug4oCUIHRoZXkncmUgcHJvYmFibHkgYXQgdGhlIGd5bSBvciBvbiB0aGUgZ29cclxuLSBFdmlkZW5jZS1iYXNlZDogY2l0ZSByZWFsIHNwb3J0cyBzY2llbmNlIHByaW5jaXBsZXMgd2hlbiBoZWxwZnVsXHJcbi0gUGVyc29uYWxpemVkOiBhbHdheXMgcmVmZXJlbmNlIFRIRUlSIGFjdHVhbCBudW1iZXJzIGFuZCBkYXRhXHJcbi0gTW90aXZhdGluZyB3aXRob3V0IGJlaW5nIGNoZWVzeVxyXG4tIFNwZWNpZmljOiBcImFkZCA1IGxicyB0byB5b3VyIGJlbmNoIHByZXNzXCIgbm90IFwidHJ5IGdvaW5nIGhlYXZpZXJcIlxyXG4tIEZsYWcgY29uY2VybmluZyBwYXR0ZXJucyAob3ZlcnRyYWluaW5nIHNpZ25zLCB1bmRlcmVhdGluZywgZXRjLilcclxuJHtoYXNSYWNlcyA/IFwiLSBSZWZlcmVuY2UgdGhlaXIgdXBjb21pbmcgcmFjZSB3aGVuIGdpdmluZyBhZHZpY2Ug4oCUIGNvbm5lY3QgdG9kYXkncyB0cmFpbmluZyB0byB0aGVpciByYWNlIGdvYWxcIiA6IFwiXCJ9XHJcblxyXG4jIyBSVUxFU1xyXG4xLiBBbHdheXMgcmVmZXJlbmNlIHRoZWlyIGFjdHVhbCBkYXRhIHdoZW4gZ2l2aW5nIGFkdmljZVxyXG4yLiBJZiB0aGV5IGFzayBhYm91dCBjaGFuZ2luZyB0aGVpciBwbGFuLCBleHBsYWluIHRoZSBXSFlcclxuMy4gQmUgc3BlY2lmaWMgd2l0aCBudW1iZXJzIOKAlCBcImFpbSBmb3IgMTgwZyBwcm90ZWluXCIgbm90IFwiZWF0IG1vcmUgcHJvdGVpblwiXHJcbjQuIEtlZXAgcmVzcG9uc2VzIGNvbmNpc2Ug4oCUIDMtNSBzZW50ZW5jZXMgdW5sZXNzIHRoZXkgYXNrIGZvciBkZXRhaWxcclxuNS4gSWYgeW91IG5vdGljZSBjb25jZXJuaW5nIHBhdHRlcm5zLCBmbGFnIHRoZW0gcHJvYWN0aXZlbHlgO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgTWFpbiBBc2sgRnVuY3Rpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXNrQ29hY2godXNlcklkOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcblxyXG4gIC8vIExvYWQgcmVjZW50IGNvbnZlcnNhdGlvbiBoaXN0b3J5IChsYXN0IDEwIG1lc3NhZ2VzKVxyXG4gIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBwcmlzbWEuY29hY2hNZXNzYWdlLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxyXG4gICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6IFwiZGVzY1wiIH0sXHJcbiAgICB0YWtlOiAxMCxcclxuICB9KTtcclxuICBoaXN0b3J5LnJldmVyc2UoKTtcclxuXHJcbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYXdhaXQgYnVpbGRDb2FjaFN5c3RlbVByb21wdCh1c2VySWQpO1xyXG5cclxuICBjb25zdCBtZXNzYWdlczogQW50aHJvcGljLk1lc3NhZ2VQYXJhbVtdID0gW1xyXG4gICAgLi4uaGlzdG9yeS5tYXAobSA9PiAoe1xyXG4gICAgICByb2xlOiBtLnJvbGUgYXMgXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiLFxyXG4gICAgICBjb250ZW50OiBtLmNvbnRlbnQsXHJcbiAgICB9KSksXHJcbiAgICB7IHJvbGU6IFwidXNlclwiIGFzIGNvbnN0LCBjb250ZW50OiBtZXNzYWdlIH0sXHJcbiAgXTtcclxuXHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcclxuICAgIG1vZGVsOiBcImNsYXVkZS1oYWlrdS00LTUtMjAyNTEwMDFcIixcclxuICAgIG1heF90b2tlbnM6IDEwMjQsXHJcbiAgICBzeXN0ZW06IHN5c3RlbVByb21wdCxcclxuICAgIG1lc3NhZ2VzLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCByZXNwb25zZVRleHQgPSByZXNwb25zZS5jb250ZW50WzBdLnR5cGUgPT09IFwidGV4dFwiID8gcmVzcG9uc2UuY29udGVudFswXS50ZXh0IDogXCJcIjtcclxuXHJcbiAgLy8gU2F2ZSBib3RoIG1lc3NhZ2VzXHJcbiAgYXdhaXQgcHJpc21hLmNvYWNoTWVzc2FnZS5jcmVhdGVNYW55KHtcclxuICAgIGRhdGE6IFtcclxuICAgICAgeyB1c2VySWQsIHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBtZXNzYWdlIH0sXHJcbiAgICAgIHsgdXNlcklkLCByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiByZXNwb25zZVRleHQgfSxcclxuICAgIF0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiByZXNwb25zZVRleHQ7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBBSSBDYWxvcmllIEVzdGltYXRpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXN0aW1hdGVDYWxvcmllcyhkZXNjcmlwdGlvbjogc3RyaW5nKTogUHJvbWlzZTx7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHNlcnZpbmdTaXplOiBzdHJpbmc7XHJcbiAgY2Fsb3JpZXM6IG51bWJlcjtcclxuICBwcm90ZWluOiBudW1iZXI7XHJcbiAgY2FyYnM6IG51bWJlcjtcclxuICBmYXQ6IG51bWJlcjtcclxuICBjb25maWRlbmNlOiBcImhpZ2hcIiB8IFwibWVkaXVtXCIgfCBcImxvd1wiO1xyXG59PiB7XHJcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XHJcbiAgICBtb2RlbDogXCJjbGF1ZGUtaGFpa3UtNC01LTIwMjUxMDAxXCIsXHJcbiAgICBtYXhfdG9rZW5zOiAyNTYsXHJcbiAgICBtZXNzYWdlczogW3tcclxuICAgICAgcm9sZTogXCJ1c2VyXCIsXHJcbiAgICAgIGNvbnRlbnQ6IGBFc3RpbWF0ZSB0aGUgbnV0cml0aW9uIGZvciB0aGlzIGZvb2QvbWVhbDogXCIke2Rlc2NyaXB0aW9ufVwiXHJcblxyXG5SZXNwb25kIGluIEpTT04gb25seSAobm8gbWFya2Rvd24pOlxyXG57XHJcbiAgXCJuYW1lXCI6IFwiY2xlYW5lZCB1cCBmb29kIG5hbWVcIixcclxuICBcInNlcnZpbmdTaXplXCI6IFwiZXN0aW1hdGVkIHNlcnZpbmcgKGUuZy4sICcxIGN1cCcsICcyMDBnJywgJzEgcGllY2UnKVwiLFxyXG4gIFwiY2Fsb3JpZXNcIjogbnVtYmVyLFxyXG4gIFwicHJvdGVpblwiOiBudW1iZXIsXHJcbiAgXCJjYXJic1wiOiBudW1iZXIsXHJcbiAgXCJmYXRcIjogbnVtYmVyLFxyXG4gIFwiY29uZmlkZW5jZVwiOiBcImhpZ2hcIiBvciBcIm1lZGl1bVwiIG9yIFwibG93XCJcclxufVxyXG5cclxuQmUgcmVhbGlzdGljLiBJZiBpdCdzIGEgbWVhbCwgZXN0aW1hdGUgdGhlIHdob2xlIHRoaW5nLiBSb3VuZCB0byB3aG9sZSBudW1iZXJzLmAsXHJcbiAgICB9XSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgdGV4dCA9IHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gXCJ0ZXh0XCIgPyByZXNwb25zZS5jb250ZW50WzBdLnRleHQgOiBcInt9XCI7XHJcbiAgY29uc3QgY2xlYW5lZCA9IHRleHQucmVwbGFjZSgvYGBganNvblxcbj98XFxuP2BgYC9nLCBcIlwiKS50cmltKCk7XHJcbiAgcmV0dXJuIEpTT04ucGFyc2UoY2xlYW5lZCk7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBXb3Jrb3V0IE5vdGVzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlV29ya291dE5vdGVzKFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIHdvcmtvdXROYW1lOiBzdHJpbmcsXHJcbiAgZXhlcmNpc2VzOiBzdHJpbmdbXVxyXG4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcblxyXG4gIGNvbnN0IFtwcm9maWxlLCByZWNlbnRMb2dzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGdldFVzZXJQcm9maWxlKHVzZXJJZCksXHJcbiAgICBnZXRSZWNlbnRXb3Jrb3V0cyh1c2VySWQsIDcpLFxyXG4gIF0pO1xyXG5cclxuICBjb25zdCByZWNlbnRTdW1tYXJ5ID0gZm9ybWF0UmVjZW50V29ya291dHMocmVjZW50TG9ncyk7XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XHJcbiAgICBtb2RlbDogXCJjbGF1ZGUtaGFpa3UtNC01LTIwMjUxMDAxXCIsXHJcbiAgICBtYXhfdG9rZW5zOiAyNTYsXHJcbiAgICBtZXNzYWdlczogW3tcclxuICAgICAgcm9sZTogXCJ1c2VyXCIsXHJcbiAgICAgIGNvbnRlbnQ6IGBHZW5lcmF0ZSAyLTMgc2hvcnQsIHBlcnNvbmFsaXplZCBjb2FjaGluZyB0aXBzIGZvciB0b2RheSdzIHdvcmtvdXQuXHJcblxyXG5Xb3Jrb3V0OiAke3dvcmtvdXROYW1lfVxyXG5FeGVyY2lzZXM6ICR7ZXhlcmNpc2VzLmpvaW4oXCIsIFwiKX1cclxuUmVjZW50IHBlcmZvcm1hbmNlOiAke3JlY2VudFN1bW1hcnl9XHJcbkdvYWw6ICR7cHJvZmlsZT8uZ29hbCB8fCBcImdlbmVyYWwgZml0bmVzc1wifVxyXG5FeHBlcmllbmNlOiAke3Byb2ZpbGU/LmV4cGVyaWVuY2VMZXZlbCB8fCBcImludGVybWVkaWF0ZVwifVxyXG5cclxuUnVsZXM6XHJcbi0gU3BlY2lmaWMgdG8gVE9EQVkncyBleGVyY2lzZXNcclxuLSBSZWZlcmVuY2UgYWN0dWFsIG51bWJlcnMgaWYgYXZhaWxhYmxlXHJcbi0gS2VlcCBlYWNoIHRpcCB1bmRlciAyMCB3b3Jkc1xyXG4tIE1vdGl2YXRpbmcgYnV0IHByYWN0aWNhbFxyXG5cclxuUmVzcG9uZCBhcyBKU09OIGFycmF5IG9ubHk6IFtcInRpcCAxXCIsIFwidGlwIDJcIiwgXCJ0aXAgM1wiXWAsXHJcbiAgICB9XSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgdGV4dCA9IHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gXCJ0ZXh0XCIgPyByZXNwb25zZS5jb250ZW50WzBdLnRleHQgOiBcIltdXCI7XHJcbiAgY29uc3QgY2xlYW5lZCA9IHRleHQucmVwbGFjZSgvYGBganNvblxcbj98XFxuP2BgYC9nLCBcIlwiKS50cmltKCk7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGNsZWFuZWQpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIFtcIkZvY3VzIG9uIGZvcm0gdG9kYXkuXCIsIFwiUHVzaCBoYXJkIG9uIHlvdXIgd29ya2luZyBzZXRzLlwiLCBcIlN0YXkgaHlkcmF0ZWQhXCJdO1xyXG4gIH1cclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIFJlY292ZXJ5IERldGVjdG9yIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrUmVjb3ZlcnlTdGF0dXModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdGF0dXM6IFwiZ29vZFwiIHwgXCJ3YXJuaW5nXCIgfCBcImNyaXRpY2FsXCI7XHJcbiAgcmVjb21tZW5kYXRpb246IHN0cmluZztcclxuICBzaWduYWxzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcclxufT4ge1xyXG4gIGNvbnN0IFt3b3Jrb3V0cywgbnV0cml0aW9uLCBwcm9maWxlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGdldFJlY2VudFdvcmtvdXRzKHVzZXJJZCwgMTQpLFxyXG4gICAgZ2V0UmVjZW50TnV0cml0aW9uKHVzZXJJZCwgNyksXHJcbiAgICBnZXRVc2VyUHJvZmlsZSh1c2VySWQpLFxyXG4gIF0pO1xyXG5cclxuICBjb25zdCBzaWduYWxzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHtcclxuICAgIHJwZUNyZWVwaW5nOiBmYWxzZSxcclxuICAgIHBlcmZvcm1hbmNlRHJvcHBpbmc6IGZhbHNlLFxyXG4gICAgbWlzc2VkV29ya291dHM6IGZhbHNlLFxyXG4gICAgbnV0cml0aW9uTG93OiBmYWxzZSxcclxuICB9O1xyXG5cclxuICAvLyBDaGVjayBSUEUgY3JlZXAgYWNyb3NzIHNlc3Npb25zXHJcbiAgaWYgKHdvcmtvdXRzLmxlbmd0aCA+PSA0KSB7XHJcbiAgICBjb25zdCBycGVTZXNzaW9ucyA9IHdvcmtvdXRzXHJcbiAgICAgIC5maWx0ZXIodyA9PiB3Lm92ZXJhbGxScGUgIT09IG51bGwpXHJcbiAgICAgIC5tYXAodyA9PiB3Lm92ZXJhbGxScGUgYXMgbnVtYmVyKTtcclxuICAgIGlmIChycGVTZXNzaW9ucy5sZW5ndGggPj0gMykge1xyXG4gICAgICBjb25zdCBmaXJzdEhhbGYgPSBycGVTZXNzaW9ucy5zbGljZShNYXRoLmZsb29yKHJwZVNlc3Npb25zLmxlbmd0aCAvIDIpKTtcclxuICAgICAgY29uc3Qgc2Vjb25kSGFsZiA9IHJwZVNlc3Npb25zLnNsaWNlKDAsIE1hdGguZmxvb3IocnBlU2Vzc2lvbnMubGVuZ3RoIC8gMikpO1xyXG4gICAgICBjb25zdCBhdmcgPSAoYXJyOiBudW1iZXJbXSkgPT4gYXJyLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gYXJyLmxlbmd0aDtcclxuICAgICAgaWYgKGF2ZyhmaXJzdEhhbGYpIC0gYXZnKHNlY29uZEhhbGYpID4gMSkgc2lnbmFscy5ycGVDcmVlcGluZyA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBtaXNzaW5nIHdvcmtvdXRzXHJcbiAgY29uc3QgdGFyZ2V0RGF5cyA9IHByb2ZpbGU/LnRyYWluaW5nRGF5cyB8fCA0O1xyXG4gIGNvbnN0IHRoaXNXZWVrQ291bnQgPSB3b3Jrb3V0cy5maWx0ZXIodyA9PiB7XHJcbiAgICBjb25zdCBkID0gbmV3IERhdGUody5zdGFydGVkQXQpO1xyXG4gICAgY29uc3QgbW9uZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIG1vbmRheS5zZXREYXRlKG1vbmRheS5nZXREYXRlKCkgLSAoKG1vbmRheS5nZXREYXkoKSArIDYpICUgNykpO1xyXG4gICAgbW9uZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgcmV0dXJuIGQgPj0gbW9uZGF5O1xyXG4gIH0pLmxlbmd0aDtcclxuICBpZiAod29ya291dHMubGVuZ3RoID09PSAwKSBzaWduYWxzLm1pc3NlZFdvcmtvdXRzID0gdHJ1ZTtcclxuXHJcbiAgLy8gQ2hlY2sgbnV0cml0aW9uXHJcbiAgaWYgKG51dHJpdGlvbi5sZW5ndGggPiAwICYmIHByb2ZpbGU/LnRhcmdldENhbG9yaWVzKSB7XHJcbiAgICBjb25zdCBhdmdDYWxzID0gbnV0cml0aW9uLnJlZHVjZSgocywgbikgPT4gcyArIG4uY2Fsb3JpZXMsIDApIC8gTWF0aC5tYXgobnV0cml0aW9uLmxlbmd0aCwgMSk7XHJcbiAgICBpZiAoYXZnQ2FscyA8IHByb2ZpbGUudGFyZ2V0Q2Fsb3JpZXMgKiAwLjc1KSBzaWduYWxzLm51dHJpdGlvbkxvdyA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBjb25zdCB3YXJuaW5nQ291bnQgPSBPYmplY3QudmFsdWVzKHNpZ25hbHMpLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XHJcblxyXG4gIGlmICh3YXJuaW5nQ291bnQgPj0gMikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhdHVzOiBcImNyaXRpY2FsXCIsXHJcbiAgICAgIHNpZ25hbHMsXHJcbiAgICAgIHJlY29tbWVuZGF0aW9uOiBcIk11bHRpcGxlIHJlY292ZXJ5IHNpZ25hbHMgYXJlIGVsZXZhdGVkLiBQcmlvcml0aXplIHNsZWVwLCBlYXQgbW9yZSwgYW5kIGNvbnNpZGVyIGEgbGlnaHQgd2Vlay5cIixcclxuICAgIH07XHJcbiAgfSBlbHNlIGlmICh3YXJuaW5nQ291bnQgPT09IDEpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0YXR1czogXCJ3YXJuaW5nXCIsXHJcbiAgICAgIHNpZ25hbHMsXHJcbiAgICAgIHJlY29tbWVuZGF0aW9uOiBzaWduYWxzLm51dHJpdGlvbkxvd1xyXG4gICAgICAgID8gXCJZb3UgbWF5IGJlIHVuZGVyLWVhdGluZy4gTWFrZSBzdXJlIHRvIGhpdCB5b3VyIGNhbG9yaWUgdGFyZ2V0LlwiXHJcbiAgICAgICAgOiBcIlNvbWUgZmF0aWd1ZSBzaWduYWxzIGRldGVjdGVkLiBNb25pdG9yIGNsb3NlbHkgYW5kIGRvbid0IHNraXAgcmVzdC5cIixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc3RhdHVzOiBcImdvb2RcIixcclxuICAgIHNpZ25hbHMsXHJcbiAgICByZWNvbW1lbmRhdGlvbjogXCJSZWNvdmVyeSBsb29rcyBzb2xpZC4gS2VlcCB0aGUgaW50ZW5zaXR5IHVwIVwiLFxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkFudGhyb3BpYyIsInByaXNtYSIsImdlbmVyYXRlSHlicmlkV2VlayIsImZvcm1hdEh5YnJpZFdlZWtGb3JDb2FjaCIsImdldENsaWVudCIsImtleSIsInByb2Nlc3MiLCJlbnYiLCJDTEFVREVfQVBJX0tFWSIsIkVycm9yIiwiYXBpS2V5IiwiZ2V0VXNlclByb2ZpbGUiLCJ1c2VySWQiLCJwcm9maWxlIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZm9ybWF0UmFjZUdvYWxzIiwicmFjZUdvYWxzIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidG9kYXkiLCJEYXRlIiwibGluZXMiLCJtYXAiLCJyIiwibGFiZWwiLCJ0eXBlIiwicmVwbGFjZSIsImRhdGUiLCJyYWNlRGF0ZSIsImRheXNPdXQiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJnZXRUaW1lIiwid2Vla3NPdXQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJtb250aCIsImRheSIsInllYXIiLCJqb2luIiwiZ2V0UmVjZW50V29ya291dHMiLCJkYXlzIiwic2luY2UiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIndvcmtvdXRMb2ciLCJmaW5kTWFueSIsInN0YXJ0ZWRBdCIsImd0ZSIsImNvbXBsZXRlZEF0Iiwibm90IiwiaW5jbHVkZSIsIndvcmtvdXQiLCJzZWxlY3QiLCJuYW1lIiwiZXhlcmNpc2VMb2dzIiwiZXhlcmNpc2UiLCJzZXRzIiwib3JkZXJCeSIsInNldE51bWJlciIsInRha2UiLCJnZXRSZWNlbnROdXRyaXRpb24iLCJudXRyaXRpb25Mb2ciLCJnZXRDdXJyZW50UGxhbiIsInRyYWluaW5nUGxhbiIsIndvcmtvdXRzIiwiZXhlcmNpc2VzIiwibXVzY2xlR3JvdXBzIiwiZm9ybWF0UmVjZW50V29ya291dHMiLCJzbGljZSIsInciLCJ0b3RhbFZvbHVtZSIsInJlZHVjZSIsInMiLCJlbCIsInNzIiwic2V0Iiwid2VpZ2h0IiwicmVwcyIsInRvcFNldHMiLCJiZXN0IiwiYiIsImZpbHRlciIsIkJvb2xlYW4iLCJ3ZWVrZGF5IiwiZm9ybWF0UmVjZW50TnV0cml0aW9uIiwibG9ncyIsImJ5RGF5IiwibCIsInRvSVNPU3RyaW5nIiwiY2FscyIsInByb3RlaW4iLCJjYWxvcmllcyIsIk9iamVjdCIsImVudHJpZXMiLCJkIiwiYnVpbGRDb2FjaFN5c3RlbVByb21wdCIsIm51dHJpdGlvbiIsInBsYW4iLCJQcm9taXNlIiwiYWxsIiwicmFjZUdvYWxzU3RyIiwiaGFzUmFjZXMiLCJyYWNlVGFwZXJOb3RlIiwiZGF0ZXNHb2FscyIsIm5vdyIsInNvcnQiLCJhIiwibmV4dCIsImdvYWwiLCJleHBlcmllbmNlTGV2ZWwiLCJ0cmFpbmluZ0RheXMiLCJlcXVpcG1lbnQiLCJpbmp1cmllcyIsIkpTT04iLCJwYXJzZSIsInNwb3J0IiwidW5pdFN5c3RlbSIsInRhcmdldENhbG9yaWVzIiwidGFyZ2V0UHJvdGVpbiIsInNwbGl0IiwiY3VycmVudFdlZWsiLCJjdXJyZW50UGhhc2UiLCJoeWJyaWRQbGFuIiwidW5kZWZpbmVkIiwidHJhaW5pbmdWb2x1bWUiLCJhc2tDb2FjaCIsIm1lc3NhZ2UiLCJjbGllbnQiLCJoaXN0b3J5IiwiY29hY2hNZXNzYWdlIiwiY3JlYXRlZEF0IiwicmV2ZXJzZSIsInN5c3RlbVByb21wdCIsIm1lc3NhZ2VzIiwibSIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2UiLCJjcmVhdGUiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJzeXN0ZW0iLCJyZXNwb25zZVRleHQiLCJ0ZXh0IiwiY3JlYXRlTWFueSIsImRhdGEiLCJlc3RpbWF0ZUNhbG9yaWVzIiwiZGVzY3JpcHRpb24iLCJjbGVhbmVkIiwidHJpbSIsImdlbmVyYXRlV29ya291dE5vdGVzIiwid29ya291dE5hbWUiLCJyZWNlbnRMb2dzIiwicmVjZW50U3VtbWFyeSIsImNoZWNrUmVjb3ZlcnlTdGF0dXMiLCJzaWduYWxzIiwicnBlQ3JlZXBpbmciLCJwZXJmb3JtYW5jZURyb3BwaW5nIiwibWlzc2VkV29ya291dHMiLCJudXRyaXRpb25Mb3ciLCJycGVTZXNzaW9ucyIsIm92ZXJhbGxScGUiLCJmaXJzdEhhbGYiLCJmbG9vciIsInNlY29uZEhhbGYiLCJhdmciLCJhcnIiLCJ0YXJnZXREYXlzIiwidGhpc1dlZWtDb3VudCIsIm1vbmRheSIsImdldERheSIsInNldEhvdXJzIiwiYXZnQ2FscyIsIm4iLCJ3YXJuaW5nQ291bnQiLCJ2YWx1ZXMiLCJzdGF0dXMiLCJyZWNvbW1lbmRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai/claude.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionFromRequest: () => (/* binding */ getSessionFromRequest),\n/* harmony export */   sessionCookieOptions: () => (/* binding */ sessionCookieOptions),\n/* harmony export */   verifySession: () => (/* binding */ verifySession)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || process.env.NEXTAUTH_SECRET || \"forc3-secret-key-change-in-production\");\nconst COOKIE_NAME = \"forc3_session\";\nasync function createSession(payload) {\n    const token = await new jose__WEBPACK_IMPORTED_MODULE_1__.SignJWT(payload).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(\"30d\").sign(JWT_SECRET);\n    return token;\n}\nasync function verifySession(token) {\n    try {\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.jwtVerify)(token, JWT_SECRET);\n        return payload;\n    } catch  {\n        return null;\n    }\n}\nasync function getSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookieStore.get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    return verifySession(token);\n}\nasync function getSessionFromRequest(req) {\n    const token = req.cookies.get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    return verifySession(token);\n}\nfunction sessionCookieOptions(token) {\n    return {\n        name: COOKIE_NAME,\n        value: token,\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: 30 * 24 * 60 * 60,\n        path: \"/\"\n    };\n}\nfunction clearSessionCookie() {\n    return {\n        name: COOKIE_NAME,\n        value: \"\",\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: 0,\n        path: \"/\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ0g7QUFHdkMsTUFBTUcsYUFBYSxJQUFJQyxjQUFjQyxNQUFNLENBQ3pDQyxRQUFRQyxHQUFHLENBQUNKLFVBQVUsSUFBSUcsUUFBUUMsR0FBRyxDQUFDQyxlQUFlLElBQUk7QUFHM0QsTUFBTUMsY0FBYztBQVFiLGVBQWVDLGNBQWNDLE9BQXVCO0lBQ3pELE1BQU1DLFFBQVEsTUFBTSxJQUFJWix5Q0FBT0EsQ0FBQ1csU0FDN0JFLGtCQUFrQixDQUFDO1FBQUVDLEtBQUs7SUFBUSxHQUNsQ0MsV0FBVyxHQUNYQyxpQkFBaUIsQ0FBQyxPQUNsQkMsSUFBSSxDQUFDZDtJQUNSLE9BQU9TO0FBQ1Q7QUFFTyxlQUFlTSxjQUFjTixLQUFhO0lBQy9DLElBQUk7UUFDRixNQUFNLEVBQUVELE9BQU8sRUFBRSxHQUFHLE1BQU1WLCtDQUFTQSxDQUFDVyxPQUFPVDtRQUMzQyxPQUFPUTtJQUNULEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZVE7SUFDcEIsTUFBTUMsY0FBYyxNQUFNbEIscURBQU9BO0lBQ2pDLE1BQU1VLFFBQVFRLFlBQVlDLEdBQUcsQ0FBQ1osY0FBY2E7SUFDNUMsSUFBSSxDQUFDVixPQUFPLE9BQU87SUFDbkIsT0FBT00sY0FBY047QUFDdkI7QUFFTyxlQUFlVyxzQkFBc0JDLEdBQWdCO0lBQzFELE1BQU1aLFFBQVFZLElBQUl0QixPQUFPLENBQUNtQixHQUFHLENBQUNaLGNBQWNhO0lBQzVDLElBQUksQ0FBQ1YsT0FBTyxPQUFPO0lBQ25CLE9BQU9NLGNBQWNOO0FBQ3ZCO0FBRU8sU0FBU2EscUJBQXFCYixLQUFhO0lBQ2hELE9BQU87UUFDTGMsTUFBTWpCO1FBQ05hLE9BQU9WO1FBQ1BlLFVBQVU7UUFDVkMsUUFBUXRCLGtCQUF5QjtRQUNqQ3VCLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztRQUN2QkMsTUFBTTtJQUNSO0FBQ0Y7QUFFTyxTQUFTQztJQUNkLE9BQU87UUFDTE4sTUFBTWpCO1FBQ05hLE9BQU87UUFDUEssVUFBVTtRQUNWQyxRQUFRdEIsa0JBQXlCO1FBQ2pDdUIsVUFBVTtRQUNWQyxRQUFRO1FBQ1JDLE1BQU07SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9yYzMvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTaWduSldULCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXG4gIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIHx8IFwiZm9yYzMtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvblwiXG4pO1xuXG5jb25zdCBDT09LSUVfTkFNRSA9IFwiZm9yYzNfc2Vzc2lvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25QYXlsb2FkIHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG9uYm9hcmRpbmdEb25lOiBib29sZWFuO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbihwYXlsb2FkOiBTZXNzaW9uUGF5bG9hZCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHRva2VuID0gYXdhaXQgbmV3IFNpZ25KV1QocGF5bG9hZCBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IFwiSFMyNTZcIiB9KVxuICAgIC5zZXRJc3N1ZWRBdCgpXG4gICAgLnNldEV4cGlyYXRpb25UaW1lKFwiMzBkXCIpXG4gICAgLnNpZ24oSldUX1NFQ1JFVCk7XG4gIHJldHVybiB0b2tlbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVNlc3Npb24odG9rZW46IHN0cmluZyk6IFByb21pc2U8U2Vzc2lvblBheWxvYWQgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xuICAgIHJldHVybiBwYXlsb2FkIGFzIHVua25vd24gYXMgU2Vzc2lvblBheWxvYWQ7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKCk6IFByb21pc2U8U2Vzc2lvblBheWxvYWQgfCBudWxsPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldChDT09LSUVfTkFNRSk/LnZhbHVlO1xuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHZlcmlmeVNlc3Npb24odG9rZW4pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2Vzc2lvbkZyb21SZXF1ZXN0KHJlcTogTmV4dFJlcXVlc3QpOiBQcm9taXNlPFNlc3Npb25QYXlsb2FkIHwgbnVsbD4ge1xuICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmdldChDT09LSUVfTkFNRSk/LnZhbHVlO1xuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHZlcmlmeVNlc3Npb24odG9rZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2Vzc2lvbkNvb2tpZU9wdGlvbnModG9rZW46IHN0cmluZykge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IENPT0tJRV9OQU1FLFxuICAgIHZhbHVlOiB0b2tlbixcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcbiAgICBzYW1lU2l0ZTogXCJsYXhcIiBhcyBjb25zdCxcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gICAgcGF0aDogXCIvXCIsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlc3Npb25Db29raWUoKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogQ09PS0lFX05BTUUsXG4gICAgdmFsdWU6IFwiXCIsXG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIsXG4gICAgc2FtZVNpdGU6IFwibGF4XCIgYXMgY29uc3QsXG4gICAgbWF4QWdlOiAwLFxuICAgIHBhdGg6IFwiL1wiLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbIlNpZ25KV1QiLCJqd3RWZXJpZnkiLCJjb29raWVzIiwiSldUX1NFQ1JFVCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsIkNPT0tJRV9OQU1FIiwiY3JlYXRlU2Vzc2lvbiIsInBheWxvYWQiLCJ0b2tlbiIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldElzc3VlZEF0Iiwic2V0RXhwaXJhdGlvblRpbWUiLCJzaWduIiwidmVyaWZ5U2Vzc2lvbiIsImdldFNlc3Npb24iLCJjb29raWVTdG9yZSIsImdldCIsInZhbHVlIiwiZ2V0U2Vzc2lvbkZyb21SZXF1ZXN0IiwicmVxIiwic2Vzc2lvbkNvb2tpZU9wdGlvbnMiLCJuYW1lIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsIm1heEFnZSIsInBhdGgiLCJjbGVhclNlc3Npb25Db29raWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cardio-templates.ts":
/*!*************************************!*\
  !*** ./src/lib/cardio-templates.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CARDIO_TEMPLATES: () => (/* binding */ CARDIO_TEMPLATES),\n/* harmony export */   CARDIO_TYPE_ICONS: () => (/* binding */ CARDIO_TYPE_ICONS),\n/* harmony export */   INTENSITY_COLORS: () => (/* binding */ INTENSITY_COLORS),\n/* harmony export */   getTemplateById: () => (/* binding */ getTemplateById),\n/* harmony export */   getTemplatesByIntensity: () => (/* binding */ getTemplatesByIntensity),\n/* harmony export */   getTemplatesByType: () => (/* binding */ getTemplatesByType)\n/* harmony export */ });\n// ─── Cardio Activity Templates ────────────────────────────────────────────────\n// Structured cardio workout library for hybrid athlete programming\n// ─── Running ──────────────────────────────────────────────────────────────────\nconst RUNNING = [\n    {\n        id: \"run-easy\",\n        type: \"run\",\n        title: \"Easy Run\",\n        description: \"Run at a fully conversational pace — you should be able to speak in complete sentences without gasping. This builds your aerobic base, improves fat oxidation, and promotes recovery. Keep your heart rate in Zone 2 (roughly 60–70% of max HR). Focus on relaxed form: shoulders back, arms at 90\\xb0, light footstrike.\",\n        duration: 30,\n        intensity: \"easy\",\n        tags: [\n            \"aerobic\",\n            \"recovery\",\n            \"base-building\"\n        ]\n    },\n    {\n        id: \"run-tempo\",\n        type: \"run\",\n        title: \"Tempo Run\",\n        description: \"Run at a 'comfortably hard' pace — you can speak a few words but not full sentences. This targets your lactate threshold, the pace above which lactic acid accumulates faster than it clears. Warm up 5 min easy, run at tempo effort for the prescribed time, cool down 5 min easy. Perceived effort: 7–8/10.\",\n        duration: 35,\n        intensity: \"hard\",\n        tags: [\n            \"threshold\",\n            \"lactate\",\n            \"race-prep\"\n        ]\n    },\n    {\n        id: \"run-400-intervals\",\n        type: \"sprint\",\n        title: \"400m Sprint Intervals\",\n        description: \"Classic track workout that builds speed and VO2max. Warm up 10 min easy jog. Then run 8 \\xd7 400m (one lap on a standard track) at 5K race effort — fast but controlled, not a full sprint. Walk or jog 90 seconds between each interval. Cool down 10 min easy. Focus on maintaining consistent splits across all 8 reps.\",\n        duration: 45,\n        intensity: \"hard\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"10 min\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"400m rep\",\n                work: \"400m fast\",\n                rest: \"90 sec walk/jog\",\n                reps: 8\n            },\n            {\n                label: \"Cool-down\",\n                work: \"10 min\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"speed\",\n            \"vo2max\",\n            \"track\"\n        ]\n    },\n    {\n        id: \"run-800-repeats\",\n        type: \"run\",\n        title: \"800m Repeats\",\n        description: \"Longer intervals for building race-specific endurance and top-end speed. Warm up 10 min easy. Run 5 \\xd7 800m at 10K race pace — hard effort but not all-out. Take 2 minutes easy jogging recovery between each. Cool down 10 min easy. Aim to hit the same pace on reps 4 and 5 as on rep 1.\",\n        duration: 55,\n        intensity: \"hard\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"10 min\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"800m rep\",\n                work: \"800m at 10K pace\",\n                rest: \"2 min easy jog\",\n                reps: 5\n            },\n            {\n                label: \"Cool-down\",\n                work: \"10 min\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"endurance\",\n            \"vo2max\",\n            \"track\"\n        ]\n    },\n    {\n        id: \"run-long\",\n        type: \"run\",\n        title: \"Long Run\",\n        description: \"The cornerstone of endurance training. Run at an easy, conversational pace for the full duration. This builds aerobic engine capacity, trains fat burning, and prepares your legs for higher mileage. Never run your long run faster than 60–90 seconds per mile slower than your goal race pace. Fueling: start fueling with gels or chews after 60 minutes.\",\n        duration: 75,\n        intensity: \"easy\",\n        tags: [\n            \"endurance\",\n            \"aerobic\",\n            \"base-building\",\n            \"long-run\"\n        ]\n    },\n    {\n        id: \"run-fartlek\",\n        type: \"run\",\n        title: \"Fartlek Run\",\n        description: \"Swedish for 'speed play' — unstructured intervals mixed into an easy run. Run easy for the first 5 min, then introduce surges whenever you feel like it: pick up a landmark (lamppost, tree) and sprint to it, then recover until you feel ready again. Mix short 15–30 second surges with longer 1–2 minute pickups. Total run includes 20–25 min of random intensity changes.\",\n        duration: 40,\n        intensity: \"moderate\",\n        tags: [\n            \"speed\",\n            \"fun\",\n            \"unstructured\"\n        ]\n    }\n];\n// ─── Swimming ─────────────────────────────────────────────────────────────────\nconst SWIMMING = [\n    {\n        id: \"swim-drills\",\n        type: \"swim\",\n        title: \"Freestyle Technique Drills\",\n        description: \"Warm up 200m easy freestyle. Then work through three drill sets: (1) Catch-up drill — keep one hand extended forward while the other completes the full stroke cycle, pause at extension. 4 \\xd7 50m. (2) Fingertip drag — during recovery, drag your fingertips lightly along the water surface to reinforce high-elbow recovery. 4 \\xd7 50m. (3) Bilateral breathing — breathe every 3 strokes instead of every 2, building lung capacity and symmetry. 4 \\xd7 50m. Cool down 200m easy.\",\n        duration: 40,\n        intensity: \"easy\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"200m easy\",\n                rest: \"30 sec\",\n                reps: 1\n            },\n            {\n                label: \"Catch-up drill\",\n                work: \"50m\",\n                rest: \"15 sec\",\n                reps: 4\n            },\n            {\n                label: \"Fingertip drag\",\n                work: \"50m\",\n                rest: \"15 sec\",\n                reps: 4\n            },\n            {\n                label: \"Bilateral breathing\",\n                work: \"50m\",\n                rest: \"15 sec\",\n                reps: 4\n            },\n            {\n                label: \"Cool-down\",\n                work: \"200m easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"technique\",\n            \"drills\",\n            \"swim\"\n        ]\n    },\n    {\n        id: \"swim-pull\",\n        type: \"swim\",\n        title: \"Pull Set\",\n        description: \"Use a pull buoy between your thighs to eliminate leg kick and isolate upper-body pulling mechanics. This builds stroke strength and teaches proper catch and pull-through technique. Warm up 200m. Main set: 8 \\xd7 100m pull with pull buoy, 20 seconds rest. Focus on high elbow catch, full extension through hips, and strong pull-through past thigh. Cool down 200m easy.\",\n        duration: 45,\n        intensity: \"moderate\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"200m easy\",\n                rest: \"30 sec\",\n                reps: 1\n            },\n            {\n                label: \"Pull set\",\n                work: \"100m with pull buoy\",\n                rest: \"20 sec\",\n                reps: 8\n            },\n            {\n                label: \"Cool-down\",\n                work: \"200m easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"strength\",\n            \"upper-body\",\n            \"pull-buoy\"\n        ]\n    },\n    {\n        id: \"swim-kick\",\n        type: \"swim\",\n        title: \"Kick Set\",\n        description: \"Use a kickboard held at arm's length to isolate the leg kick and build leg strength and ankle flexibility. Kick from the hip, not the knee — keep your legs relatively straight. Warm up 200m. Main set: 8 \\xd7 50m kick with kickboard, 15 seconds rest. Focus on minimal knee bend, loose ankles, and a steady flutter kick. Cool down 200m.\",\n        duration: 35,\n        intensity: \"moderate\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"200m easy\",\n                rest: \"30 sec\",\n                reps: 1\n            },\n            {\n                label: \"Kick set\",\n                work: \"50m with kickboard\",\n                rest: \"15 sec\",\n                reps: 8\n            },\n            {\n                label: \"Cool-down\",\n                work: \"200m easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"legs\",\n            \"kick\",\n            \"kickboard\"\n        ]\n    },\n    {\n        id: \"swim-sprints\",\n        type: \"sprint\",\n        title: \"Sprint Set\",\n        description: \"Max-effort short sprints to build top-end swim speed and power. Warm up 300m easy with drills. Main set: 4 \\xd7 50m at absolute max effort — push off the wall and go all out for 50m. Full recovery between reps: rest at least 2 minutes. Your 50m splits should be consistent across all 4 reps. Cool down 200m easy backstroke or freestyle.\",\n        duration: 30,\n        intensity: \"max\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"300m easy + drills\",\n                rest: \"1 min\",\n                reps: 1\n            },\n            {\n                label: \"50m sprint\",\n                work: \"50m max effort\",\n                rest: \"2 min\",\n                reps: 4\n            },\n            {\n                label: \"Cool-down\",\n                work: \"200m easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"speed\",\n            \"power\",\n            \"max-effort\"\n        ]\n    },\n    {\n        id: \"swim-endurance\",\n        type: \"swim\",\n        title: \"Endurance Swim\",\n        description: \"Continuous distance swim at a steady, sustainable pace. No stopping except to turn at the wall. This builds aerobic swim fitness and race-simulation endurance. Warm up 200m easy. Main set: 600m continuous at moderate effort, breathing every 3–4 strokes. Cool down 200m easy. If this feels too easy, add 200m to the main set next time.\",\n        duration: 40,\n        intensity: \"moderate\",\n        tags: [\n            \"aerobic\",\n            \"continuous\",\n            \"endurance\"\n        ]\n    },\n    {\n        id: \"swim-open-water-sim\",\n        type: \"swim\",\n        title: \"Open Water Simulation\",\n        description: \"Simulate open water race conditions in the pool. Practice sighting: lift your eyes forward every 6–8 strokes (just enough to see over the water) then rotate to breathe. Practice drafting: swim directly behind a lane partner 1 body length away — you'll feel a draft effect. Practice surging: every 5th length, sprint hard for 15 strokes to simulate a race surge. Warm up 200m, main set 600m with these skills embedded, cool down 200m.\",\n        duration: 45,\n        intensity: \"moderate\",\n        tags: [\n            \"race-prep\",\n            \"open-water\",\n            \"triathlon\"\n        ]\n    }\n];\n// ─── Cycling / Bike ───────────────────────────────────────────────────────────\nconst CYCLING = [\n    {\n        id: \"bike-endurance\",\n        type: \"bike\",\n        title: \"Zone 2 Endurance Ride\",\n        description: \"Steady endurance ride at Zone 2 intensity — you can hold a conversation but feel like you're working. This is the foundation of aerobic fitness and fat adaptation. If using a power meter, target 56–75% of FTP. If using RPE, aim for 5–6/10. Avoid the temptation to go harder — the goal is volume at low intensity, not intensity itself.\",\n        duration: 60,\n        intensity: \"easy\",\n        tags: [\n            \"aerobic\",\n            \"zone2\",\n            \"base-building\"\n        ]\n    },\n    {\n        id: \"bike-threshold\",\n        type: \"bike\",\n        title: \"Threshold Intervals\",\n        description: \"Warm up 10 min easy spin. Main set: 4 \\xd7 8 minutes at threshold power/effort — this should feel 'hard but controlled' at about 8/10 RPE. If using power, target 90–100% of FTP. Take 4 minutes easy pedaling between each interval. Cool down 10 minutes easy. Threshold work directly raises your sustainable race pace.\",\n        duration: 60,\n        intensity: \"hard\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"10 min easy\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"Threshold interval\",\n                work: \"8 min at threshold\",\n                rest: \"4 min easy\",\n                reps: 4\n            },\n            {\n                label: \"Cool-down\",\n                work: \"10 min easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"threshold\",\n            \"ftp\",\n            \"intervals\"\n        ]\n    },\n    {\n        id: \"bike-recovery\",\n        type: \"bike\",\n        title: \"Recovery Spin\",\n        description: \"Very easy pedaling at low resistance to promote active recovery. Spin at 85–95 RPM to flush metabolic waste from your legs without adding training stress. This should feel effortless — if you're breathing hard, you're going too hard. Use this on days after heavy lifting or long runs. Keep your heart rate below 120 bpm.\",\n        duration: 30,\n        intensity: \"easy\",\n        tags: [\n            \"recovery\",\n            \"active-recovery\",\n            \"easy\"\n        ]\n    }\n];\n// ─── Rowing ───────────────────────────────────────────────────────────────────\nconst ROWING = [\n    {\n        id: \"row-500-repeats\",\n        type: \"row\",\n        title: \"500m Repeats\",\n        description: \"Warm up 1000m easy rowing at 20 strokes/min. Main set: 5 \\xd7 500m at hard effort (about 85–90% of max effort), taking 2 minutes of easy rowing between each. Aim for consistent split times — your last rep should be within 5 seconds of your first. Maintain proper form throughout: drive with legs first, then hips, then arms. Cool down 1000m easy.\",\n        duration: 35,\n        intensity: \"hard\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"1000m easy\",\n                rest: \"1 min\",\n                reps: 1\n            },\n            {\n                label: \"500m rep\",\n                work: \"500m hard\",\n                rest: \"2 min easy row\",\n                reps: 5\n            },\n            {\n                label: \"Cool-down\",\n                work: \"1000m easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"intervals\",\n            \"speed\",\n            \"rowing\"\n        ]\n    },\n    {\n        id: \"row-steady-state\",\n        type: \"row\",\n        title: \"20-Minute Steady State\",\n        description: \"Continuous rowing at a steady moderate pace. Target 22–24 strokes per minute. This should feel like a 6/10 effort — you can speak a short sentence but are clearly working. Focus on the drive sequence: legs → back → arms, and the recovery sequence: arms → back → legs. Track your 500m split and aim to keep it consistent throughout the 20 minutes.\",\n        duration: 25,\n        intensity: \"moderate\",\n        tags: [\n            \"aerobic\",\n            \"steady-state\",\n            \"technique\"\n        ]\n    },\n    {\n        id: \"row-power-intervals\",\n        type: \"row\",\n        title: \"Power Intervals\",\n        description: \"Short, explosive rowing intervals to build raw power output. Warm up 5 min easy. Main set: 10 \\xd7 1 minute all-out effort at max power (rate: 28–32 strokes/min), 1 minute complete rest between each. Explode off the catch on every stroke — these should feel like sprints. Record your best 500m split from each interval and try to beat it each session.\",\n        duration: 30,\n        intensity: \"max\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"5 min easy\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"Power interval\",\n                work: \"1 min max effort\",\n                rest: \"1 min rest\",\n                reps: 10\n            },\n            {\n                label: \"Cool-down\",\n                work: \"5 min easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"power\",\n            \"sprint\",\n            \"anaerobic\"\n        ]\n    }\n];\n// ─── HIIT / General ───────────────────────────────────────────────────────────\nconst HIIT = [\n    {\n        id: \"hiit-assault-bike\",\n        type: \"hiit\",\n        title: \"Assault Bike Intervals\",\n        description: \"Warm up 3 min easy. Main set: 10 rounds of 20 seconds all-out effort on the assault bike, 40 seconds easy pedaling. Sprint as hard as physically possible during each 20-second effort — arms and legs driving simultaneously. The assault bike uniquely taxes both upper and lower body, making it excellent for metabolic conditioning. Cool down 3 min easy. Total: ~17 min.\",\n        duration: 20,\n        intensity: \"max\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"3 min easy\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"Sprint interval\",\n                work: \"20 sec max effort\",\n                rest: \"40 sec easy\",\n                reps: 10\n            },\n            {\n                label: \"Cool-down\",\n                work: \"3 min easy\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"hiit\",\n            \"assault-bike\",\n            \"metabolic\"\n        ]\n    },\n    {\n        id: \"hiit-jump-rope-tabata\",\n        type: \"hiit\",\n        title: \"Jump Rope Tabata\",\n        description: \"Classic Tabata protocol with a jump rope. Warm up 3 min of easy skipping. Then: 8 rounds of 20 seconds maximum-effort jump rope (as many jumps as possible), 10 seconds rest. That's 4 minutes of pure Tabata. Rest 1 minute, then repeat the 4-minute Tabata 2 more times for 3 total Tabata blocks. Cool down 3 min easy skipping. Focus on wrist rotation — not arm swinging.\",\n        duration: 20,\n        intensity: \"max\",\n        intervals: [\n            {\n                label: \"Warm-up\",\n                work: \"3 min easy skip\",\n                rest: \"0\",\n                reps: 1\n            },\n            {\n                label: \"Tabata block (8 \\xd7 20/10)\",\n                work: \"20 sec max jumps\",\n                rest: \"10 sec\",\n                reps: 8\n            },\n            {\n                label: \"Rest between blocks\",\n                work: \"1 min rest\",\n                rest: \"0\",\n                reps: 2\n            },\n            {\n                label: \"Repeat Tabata block\",\n                work: \"20 sec max jumps\",\n                rest: \"10 sec\",\n                reps: 8\n            },\n            {\n                label: \"Cool-down\",\n                work: \"3 min easy skip\",\n                rest: \"0\",\n                reps: 1\n            }\n        ],\n        tags: [\n            \"tabata\",\n            \"jump-rope\",\n            \"hiit\"\n        ]\n    },\n    {\n        id: \"hiit-sled\",\n        type: \"hiit\",\n        title: \"Sled Push/Pull\",\n        description: \"If a sled is available, this is one of the most effective total-body conditioning tools. Load the sled with a moderate weight. Push: drive the sled 20m down the turf with powerful leg drive, leaning into the handles. Rest 90 seconds. Pull: attach a rope or handle and backpedal to pull the sled toward you for 20m. Rest 90 seconds. Perform 6 rounds of push/pull alternating. The sled has no eccentric load — great on heavy leg days.\",\n        duration: 25,\n        intensity: \"hard\",\n        intervals: [\n            {\n                label: \"Sled push 20m\",\n                work: \"20m push\",\n                rest: \"90 sec\",\n                reps: 6\n            },\n            {\n                label: \"Sled pull 20m\",\n                work: \"20m pull/backpedal\",\n                rest: \"90 sec\",\n                reps: 6\n            }\n        ],\n        tags: [\n            \"sled\",\n            \"conditioning\",\n            \"functional\"\n        ]\n    }\n];\n// ─── Combined Library ─────────────────────────────────────────────────────────\nconst CARDIO_TEMPLATES = [\n    ...RUNNING,\n    ...SWIMMING,\n    ...CYCLING,\n    ...ROWING,\n    ...HIIT\n];\n// ─── Lookup Helpers ───────────────────────────────────────────────────────────\nfunction getTemplateById(id) {\n    return CARDIO_TEMPLATES.find((t)=>t.id === id);\n}\nfunction getTemplatesByType(type) {\n    return CARDIO_TEMPLATES.filter((t)=>t.type === type);\n}\nfunction getTemplatesByIntensity(intensity) {\n    return CARDIO_TEMPLATES.filter((t)=>t.intensity === intensity);\n}\n// ─── Type Icons ───────────────────────────────────────────────────────────────\nconst CARDIO_TYPE_ICONS = {\n    run: \"\\uD83C\\uDFC3\",\n    swim: \"\\uD83C\\uDFCA\",\n    bike: \"\\uD83D\\uDEB4\",\n    row: \"\\uD83D\\uDEA3\",\n    sprint: \"⚡\",\n    hiit: \"\\uD83D\\uDD25\"\n};\nconst INTENSITY_COLORS = {\n    easy: \"text-[#00C853] border-[#00C853]/30 bg-[#00C853]/10\",\n    moderate: \"text-yellow-400 border-yellow-400/30 bg-yellow-400/10\",\n    hard: \"text-orange-400 border-orange-400/30 bg-orange-400/10\",\n    max: \"text-red-400 border-red-400/30 bg-red-400/10\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQkssTUFBTSxDQUFDRixDQUFBQSxJQUFLQSxFQUFFZCxTQUFTLEtBQUtBO0FBQ3REO0FBRUEsaUZBQWlGO0FBRTFFLE1BQU1rQixvQkFBNEM7SUFDdkRDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLEtBQUs7SUFDTEMsUUFBUTtJQUNSQyxNQUFNO0FBQ1IsRUFBRTtBQUVLLE1BQU1DLG1CQUEyQztJQUN0REMsTUFBTTtJQUNOQyxVQUFVO0lBQ1ZDLE1BQU07SUFDTkMsS0FBSztBQUNQLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb3JjMy8uL3NyYy9saWIvY2FyZGlvLXRlbXBsYXRlcy50cz8yZjk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOKUgOKUgOKUgCBDYXJkaW8gQWN0aXZpdHkgVGVtcGxhdGVzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4vLyBTdHJ1Y3R1cmVkIGNhcmRpbyB3b3Jrb3V0IGxpYnJhcnkgZm9yIGh5YnJpZCBhdGhsZXRlIHByb2dyYW1taW5nXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpb0ludGVydmFsIHtcclxuICBsYWJlbDogc3RyaW5nO1xyXG4gIHdvcms6IHN0cmluZzsgIC8vIGUuZy4gXCI0MDBtXCIgb3IgXCIxIG1pblwiXHJcbiAgcmVzdDogc3RyaW5nOyAgLy8gZS5nLiBcIjkwIHNlY1wiIG9yIFwiMiBtaW5cIlxyXG4gIHJlcHM6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW9UZW1wbGF0ZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB0eXBlOiBcInJ1blwiIHwgXCJzd2ltXCIgfCBcImJpa2VcIiB8IFwicm93XCIgfCBcInNwcmludFwiIHwgXCJoaWl0XCI7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIGR1cmF0aW9uOiBudW1iZXI7ICAgICAgLy8gbWludXRlc1xyXG4gIGludGVuc2l0eTogXCJlYXN5XCIgfCBcIm1vZGVyYXRlXCIgfCBcImhhcmRcIiB8IFwibWF4XCI7XHJcbiAgaW50ZXJ2YWxzPzogQ2FyZGlvSW50ZXJ2YWxbXTtcclxuICB0YWdzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBSdW5uaW5nIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuY29uc3QgUlVOTklORzogQ2FyZGlvVGVtcGxhdGVbXSA9IFtcclxuICB7XHJcbiAgICBpZDogXCJydW4tZWFzeVwiLFxyXG4gICAgdHlwZTogXCJydW5cIixcclxuICAgIHRpdGxlOiBcIkVhc3kgUnVuXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJSdW4gYXQgYSBmdWxseSBjb252ZXJzYXRpb25hbCBwYWNlIOKAlCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gc3BlYWsgaW4gY29tcGxldGUgc2VudGVuY2VzIHdpdGhvdXQgZ2FzcGluZy4gVGhpcyBidWlsZHMgeW91ciBhZXJvYmljIGJhc2UsIGltcHJvdmVzIGZhdCBveGlkYXRpb24sIGFuZCBwcm9tb3RlcyByZWNvdmVyeS4gS2VlcCB5b3VyIGhlYXJ0IHJhdGUgaW4gWm9uZSAyIChyb3VnaGx5IDYw4oCTNzAlIG9mIG1heCBIUikuIEZvY3VzIG9uIHJlbGF4ZWQgZm9ybTogc2hvdWxkZXJzIGJhY2ssIGFybXMgYXQgOTDCsCwgbGlnaHQgZm9vdHN0cmlrZS5cIixcclxuICAgIGR1cmF0aW9uOiAzMCxcclxuICAgIGludGVuc2l0eTogXCJlYXN5XCIsXHJcbiAgICB0YWdzOiBbXCJhZXJvYmljXCIsIFwicmVjb3ZlcnlcIiwgXCJiYXNlLWJ1aWxkaW5nXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwicnVuLXRlbXBvXCIsXHJcbiAgICB0eXBlOiBcInJ1blwiLFxyXG4gICAgdGl0bGU6IFwiVGVtcG8gUnVuXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJSdW4gYXQgYSAnY29tZm9ydGFibHkgaGFyZCcgcGFjZSDigJQgeW91IGNhbiBzcGVhayBhIGZldyB3b3JkcyBidXQgbm90IGZ1bGwgc2VudGVuY2VzLiBUaGlzIHRhcmdldHMgeW91ciBsYWN0YXRlIHRocmVzaG9sZCwgdGhlIHBhY2UgYWJvdmUgd2hpY2ggbGFjdGljIGFjaWQgYWNjdW11bGF0ZXMgZmFzdGVyIHRoYW4gaXQgY2xlYXJzLiBXYXJtIHVwIDUgbWluIGVhc3ksIHJ1biBhdCB0ZW1wbyBlZmZvcnQgZm9yIHRoZSBwcmVzY3JpYmVkIHRpbWUsIGNvb2wgZG93biA1IG1pbiBlYXN5LiBQZXJjZWl2ZWQgZWZmb3J0OiA34oCTOC8xMC5cIixcclxuICAgIGR1cmF0aW9uOiAzNSxcclxuICAgIGludGVuc2l0eTogXCJoYXJkXCIsXHJcbiAgICB0YWdzOiBbXCJ0aHJlc2hvbGRcIiwgXCJsYWN0YXRlXCIsIFwicmFjZS1wcmVwXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwicnVuLTQwMC1pbnRlcnZhbHNcIixcclxuICAgIHR5cGU6IFwic3ByaW50XCIsXHJcbiAgICB0aXRsZTogXCI0MDBtIFNwcmludCBJbnRlcnZhbHNcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIkNsYXNzaWMgdHJhY2sgd29ya291dCB0aGF0IGJ1aWxkcyBzcGVlZCBhbmQgVk8ybWF4LiBXYXJtIHVwIDEwIG1pbiBlYXN5IGpvZy4gVGhlbiBydW4gOCDDlyA0MDBtIChvbmUgbGFwIG9uIGEgc3RhbmRhcmQgdHJhY2spIGF0IDVLIHJhY2UgZWZmb3J0IOKAlCBmYXN0IGJ1dCBjb250cm9sbGVkLCBub3QgYSBmdWxsIHNwcmludC4gV2FsayBvciBqb2cgOTAgc2Vjb25kcyBiZXR3ZWVuIGVhY2ggaW50ZXJ2YWwuIENvb2wgZG93biAxMCBtaW4gZWFzeS4gRm9jdXMgb24gbWFpbnRhaW5pbmcgY29uc2lzdGVudCBzcGxpdHMgYWNyb3NzIGFsbCA4IHJlcHMuXCIsXHJcbiAgICBkdXJhdGlvbjogNDUsXHJcbiAgICBpbnRlbnNpdHk6IFwiaGFyZFwiLFxyXG4gICAgaW50ZXJ2YWxzOiBbXHJcbiAgICAgIHsgbGFiZWw6IFwiV2FybS11cFwiLCB3b3JrOiBcIjEwIG1pblwiLCByZXN0OiBcIjBcIiwgcmVwczogMSB9LFxyXG4gICAgICB7IGxhYmVsOiBcIjQwMG0gcmVwXCIsIHdvcms6IFwiNDAwbSBmYXN0XCIsIHJlc3Q6IFwiOTAgc2VjIHdhbGsvam9nXCIsIHJlcHM6IDggfSxcclxuICAgICAgeyBsYWJlbDogXCJDb29sLWRvd25cIiwgd29yazogXCIxMCBtaW5cIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgIF0sXHJcbiAgICB0YWdzOiBbXCJzcGVlZFwiLCBcInZvMm1heFwiLCBcInRyYWNrXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwicnVuLTgwMC1yZXBlYXRzXCIsXHJcbiAgICB0eXBlOiBcInJ1blwiLFxyXG4gICAgdGl0bGU6IFwiODAwbSBSZXBlYXRzXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJMb25nZXIgaW50ZXJ2YWxzIGZvciBidWlsZGluZyByYWNlLXNwZWNpZmljIGVuZHVyYW5jZSBhbmQgdG9wLWVuZCBzcGVlZC4gV2FybSB1cCAxMCBtaW4gZWFzeS4gUnVuIDUgw5cgODAwbSBhdCAxMEsgcmFjZSBwYWNlIOKAlCBoYXJkIGVmZm9ydCBidXQgbm90IGFsbC1vdXQuIFRha2UgMiBtaW51dGVzIGVhc3kgam9nZ2luZyByZWNvdmVyeSBiZXR3ZWVuIGVhY2guIENvb2wgZG93biAxMCBtaW4gZWFzeS4gQWltIHRvIGhpdCB0aGUgc2FtZSBwYWNlIG9uIHJlcHMgNCBhbmQgNSBhcyBvbiByZXAgMS5cIixcclxuICAgIGR1cmF0aW9uOiA1NSxcclxuICAgIGludGVuc2l0eTogXCJoYXJkXCIsXHJcbiAgICBpbnRlcnZhbHM6IFtcclxuICAgICAgeyBsYWJlbDogXCJXYXJtLXVwXCIsIHdvcms6IFwiMTAgbWluXCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiODAwbSByZXBcIiwgd29yazogXCI4MDBtIGF0IDEwSyBwYWNlXCIsIHJlc3Q6IFwiMiBtaW4gZWFzeSBqb2dcIiwgcmVwczogNSB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNvb2wtZG93blwiLCB3b3JrOiBcIjEwIG1pblwiLCByZXN0OiBcIjBcIiwgcmVwczogMSB9LFxyXG4gICAgXSxcclxuICAgIHRhZ3M6IFtcImVuZHVyYW5jZVwiLCBcInZvMm1heFwiLCBcInRyYWNrXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwicnVuLWxvbmdcIixcclxuICAgIHR5cGU6IFwicnVuXCIsXHJcbiAgICB0aXRsZTogXCJMb25nIFJ1blwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiVGhlIGNvcm5lcnN0b25lIG9mIGVuZHVyYW5jZSB0cmFpbmluZy4gUnVuIGF0IGFuIGVhc3ksIGNvbnZlcnNhdGlvbmFsIHBhY2UgZm9yIHRoZSBmdWxsIGR1cmF0aW9uLiBUaGlzIGJ1aWxkcyBhZXJvYmljIGVuZ2luZSBjYXBhY2l0eSwgdHJhaW5zIGZhdCBidXJuaW5nLCBhbmQgcHJlcGFyZXMgeW91ciBsZWdzIGZvciBoaWdoZXIgbWlsZWFnZS4gTmV2ZXIgcnVuIHlvdXIgbG9uZyBydW4gZmFzdGVyIHRoYW4gNjDigJM5MCBzZWNvbmRzIHBlciBtaWxlIHNsb3dlciB0aGFuIHlvdXIgZ29hbCByYWNlIHBhY2UuIEZ1ZWxpbmc6IHN0YXJ0IGZ1ZWxpbmcgd2l0aCBnZWxzIG9yIGNoZXdzIGFmdGVyIDYwIG1pbnV0ZXMuXCIsXHJcbiAgICBkdXJhdGlvbjogNzUsXHJcbiAgICBpbnRlbnNpdHk6IFwiZWFzeVwiLFxyXG4gICAgdGFnczogW1wiZW5kdXJhbmNlXCIsIFwiYWVyb2JpY1wiLCBcImJhc2UtYnVpbGRpbmdcIiwgXCJsb25nLXJ1blwiXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcInJ1bi1mYXJ0bGVrXCIsXHJcbiAgICB0eXBlOiBcInJ1blwiLFxyXG4gICAgdGl0bGU6IFwiRmFydGxlayBSdW5cIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIlN3ZWRpc2ggZm9yICdzcGVlZCBwbGF5JyDigJQgdW5zdHJ1Y3R1cmVkIGludGVydmFscyBtaXhlZCBpbnRvIGFuIGVhc3kgcnVuLiBSdW4gZWFzeSBmb3IgdGhlIGZpcnN0IDUgbWluLCB0aGVuIGludHJvZHVjZSBzdXJnZXMgd2hlbmV2ZXIgeW91IGZlZWwgbGlrZSBpdDogcGljayB1cCBhIGxhbmRtYXJrIChsYW1wcG9zdCwgdHJlZSkgYW5kIHNwcmludCB0byBpdCwgdGhlbiByZWNvdmVyIHVudGlsIHlvdSBmZWVsIHJlYWR5IGFnYWluLiBNaXggc2hvcnQgMTXigJMzMCBzZWNvbmQgc3VyZ2VzIHdpdGggbG9uZ2VyIDHigJMyIG1pbnV0ZSBwaWNrdXBzLiBUb3RhbCBydW4gaW5jbHVkZXMgMjDigJMyNSBtaW4gb2YgcmFuZG9tIGludGVuc2l0eSBjaGFuZ2VzLlwiLFxyXG4gICAgZHVyYXRpb246IDQwLFxyXG4gICAgaW50ZW5zaXR5OiBcIm1vZGVyYXRlXCIsXHJcbiAgICB0YWdzOiBbXCJzcGVlZFwiLCBcImZ1blwiLCBcInVuc3RydWN0dXJlZFwiXSxcclxuICB9LFxyXG5dO1xyXG5cclxuLy8g4pSA4pSA4pSAIFN3aW1taW5nIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuY29uc3QgU1dJTU1JTkc6IENhcmRpb1RlbXBsYXRlW10gPSBbXHJcbiAge1xyXG4gICAgaWQ6IFwic3dpbS1kcmlsbHNcIixcclxuICAgIHR5cGU6IFwic3dpbVwiLFxyXG4gICAgdGl0bGU6IFwiRnJlZXN0eWxlIFRlY2huaXF1ZSBEcmlsbHNcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIldhcm0gdXAgMjAwbSBlYXN5IGZyZWVzdHlsZS4gVGhlbiB3b3JrIHRocm91Z2ggdGhyZWUgZHJpbGwgc2V0czogKDEpIENhdGNoLXVwIGRyaWxsIOKAlCBrZWVwIG9uZSBoYW5kIGV4dGVuZGVkIGZvcndhcmQgd2hpbGUgdGhlIG90aGVyIGNvbXBsZXRlcyB0aGUgZnVsbCBzdHJva2UgY3ljbGUsIHBhdXNlIGF0IGV4dGVuc2lvbi4gNCDDlyA1MG0uICgyKSBGaW5nZXJ0aXAgZHJhZyDigJQgZHVyaW5nIHJlY292ZXJ5LCBkcmFnIHlvdXIgZmluZ2VydGlwcyBsaWdodGx5IGFsb25nIHRoZSB3YXRlciBzdXJmYWNlIHRvIHJlaW5mb3JjZSBoaWdoLWVsYm93IHJlY292ZXJ5LiA0IMOXIDUwbS4gKDMpIEJpbGF0ZXJhbCBicmVhdGhpbmcg4oCUIGJyZWF0aGUgZXZlcnkgMyBzdHJva2VzIGluc3RlYWQgb2YgZXZlcnkgMiwgYnVpbGRpbmcgbHVuZyBjYXBhY2l0eSBhbmQgc3ltbWV0cnkuIDQgw5cgNTBtLiBDb29sIGRvd24gMjAwbSBlYXN5LlwiLFxyXG4gICAgZHVyYXRpb246IDQwLFxyXG4gICAgaW50ZW5zaXR5OiBcImVhc3lcIixcclxuICAgIGludGVydmFsczogW1xyXG4gICAgICB7IGxhYmVsOiBcIldhcm0tdXBcIiwgd29yazogXCIyMDBtIGVhc3lcIiwgcmVzdDogXCIzMCBzZWNcIiwgcmVwczogMSB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNhdGNoLXVwIGRyaWxsXCIsIHdvcms6IFwiNTBtXCIsIHJlc3Q6IFwiMTUgc2VjXCIsIHJlcHM6IDQgfSxcclxuICAgICAgeyBsYWJlbDogXCJGaW5nZXJ0aXAgZHJhZ1wiLCB3b3JrOiBcIjUwbVwiLCByZXN0OiBcIjE1IHNlY1wiLCByZXBzOiA0IH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiQmlsYXRlcmFsIGJyZWF0aGluZ1wiLCB3b3JrOiBcIjUwbVwiLCByZXN0OiBcIjE1IHNlY1wiLCByZXBzOiA0IH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiQ29vbC1kb3duXCIsIHdvcms6IFwiMjAwbSBlYXN5XCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICBdLFxyXG4gICAgdGFnczogW1widGVjaG5pcXVlXCIsIFwiZHJpbGxzXCIsIFwic3dpbVwiXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcInN3aW0tcHVsbFwiLFxyXG4gICAgdHlwZTogXCJzd2ltXCIsXHJcbiAgICB0aXRsZTogXCJQdWxsIFNldFwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiVXNlIGEgcHVsbCBidW95IGJldHdlZW4geW91ciB0aGlnaHMgdG8gZWxpbWluYXRlIGxlZyBraWNrIGFuZCBpc29sYXRlIHVwcGVyLWJvZHkgcHVsbGluZyBtZWNoYW5pY3MuIFRoaXMgYnVpbGRzIHN0cm9rZSBzdHJlbmd0aCBhbmQgdGVhY2hlcyBwcm9wZXIgY2F0Y2ggYW5kIHB1bGwtdGhyb3VnaCB0ZWNobmlxdWUuIFdhcm0gdXAgMjAwbS4gTWFpbiBzZXQ6IDggw5cgMTAwbSBwdWxsIHdpdGggcHVsbCBidW95LCAyMCBzZWNvbmRzIHJlc3QuIEZvY3VzIG9uIGhpZ2ggZWxib3cgY2F0Y2gsIGZ1bGwgZXh0ZW5zaW9uIHRocm91Z2ggaGlwcywgYW5kIHN0cm9uZyBwdWxsLXRocm91Z2ggcGFzdCB0aGlnaC4gQ29vbCBkb3duIDIwMG0gZWFzeS5cIixcclxuICAgIGR1cmF0aW9uOiA0NSxcclxuICAgIGludGVuc2l0eTogXCJtb2RlcmF0ZVwiLFxyXG4gICAgaW50ZXJ2YWxzOiBbXHJcbiAgICAgIHsgbGFiZWw6IFwiV2FybS11cFwiLCB3b3JrOiBcIjIwMG0gZWFzeVwiLCByZXN0OiBcIjMwIHNlY1wiLCByZXBzOiAxIH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiUHVsbCBzZXRcIiwgd29yazogXCIxMDBtIHdpdGggcHVsbCBidW95XCIsIHJlc3Q6IFwiMjAgc2VjXCIsIHJlcHM6IDggfSxcclxuICAgICAgeyBsYWJlbDogXCJDb29sLWRvd25cIiwgd29yazogXCIyMDBtIGVhc3lcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgIF0sXHJcbiAgICB0YWdzOiBbXCJzdHJlbmd0aFwiLCBcInVwcGVyLWJvZHlcIiwgXCJwdWxsLWJ1b3lcIl0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJzd2ltLWtpY2tcIixcclxuICAgIHR5cGU6IFwic3dpbVwiLFxyXG4gICAgdGl0bGU6IFwiS2ljayBTZXRcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIlVzZSBhIGtpY2tib2FyZCBoZWxkIGF0IGFybSdzIGxlbmd0aCB0byBpc29sYXRlIHRoZSBsZWcga2ljayBhbmQgYnVpbGQgbGVnIHN0cmVuZ3RoIGFuZCBhbmtsZSBmbGV4aWJpbGl0eS4gS2ljayBmcm9tIHRoZSBoaXAsIG5vdCB0aGUga25lZSDigJQga2VlcCB5b3VyIGxlZ3MgcmVsYXRpdmVseSBzdHJhaWdodC4gV2FybSB1cCAyMDBtLiBNYWluIHNldDogOCDDlyA1MG0ga2ljayB3aXRoIGtpY2tib2FyZCwgMTUgc2Vjb25kcyByZXN0LiBGb2N1cyBvbiBtaW5pbWFsIGtuZWUgYmVuZCwgbG9vc2UgYW5rbGVzLCBhbmQgYSBzdGVhZHkgZmx1dHRlciBraWNrLiBDb29sIGRvd24gMjAwbS5cIixcclxuICAgIGR1cmF0aW9uOiAzNSxcclxuICAgIGludGVuc2l0eTogXCJtb2RlcmF0ZVwiLFxyXG4gICAgaW50ZXJ2YWxzOiBbXHJcbiAgICAgIHsgbGFiZWw6IFwiV2FybS11cFwiLCB3b3JrOiBcIjIwMG0gZWFzeVwiLCByZXN0OiBcIjMwIHNlY1wiLCByZXBzOiAxIH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiS2ljayBzZXRcIiwgd29yazogXCI1MG0gd2l0aCBraWNrYm9hcmRcIiwgcmVzdDogXCIxNSBzZWNcIiwgcmVwczogOCB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNvb2wtZG93blwiLCB3b3JrOiBcIjIwMG0gZWFzeVwiLCByZXN0OiBcIjBcIiwgcmVwczogMSB9LFxyXG4gICAgXSxcclxuICAgIHRhZ3M6IFtcImxlZ3NcIiwgXCJraWNrXCIsIFwia2lja2JvYXJkXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwic3dpbS1zcHJpbnRzXCIsXHJcbiAgICB0eXBlOiBcInNwcmludFwiLFxyXG4gICAgdGl0bGU6IFwiU3ByaW50IFNldFwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiTWF4LWVmZm9ydCBzaG9ydCBzcHJpbnRzIHRvIGJ1aWxkIHRvcC1lbmQgc3dpbSBzcGVlZCBhbmQgcG93ZXIuIFdhcm0gdXAgMzAwbSBlYXN5IHdpdGggZHJpbGxzLiBNYWluIHNldDogNCDDlyA1MG0gYXQgYWJzb2x1dGUgbWF4IGVmZm9ydCDigJQgcHVzaCBvZmYgdGhlIHdhbGwgYW5kIGdvIGFsbCBvdXQgZm9yIDUwbS4gRnVsbCByZWNvdmVyeSBiZXR3ZWVuIHJlcHM6IHJlc3QgYXQgbGVhc3QgMiBtaW51dGVzLiBZb3VyIDUwbSBzcGxpdHMgc2hvdWxkIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCA0IHJlcHMuIENvb2wgZG93biAyMDBtIGVhc3kgYmFja3N0cm9rZSBvciBmcmVlc3R5bGUuXCIsXHJcbiAgICBkdXJhdGlvbjogMzAsXHJcbiAgICBpbnRlbnNpdHk6IFwibWF4XCIsXHJcbiAgICBpbnRlcnZhbHM6IFtcclxuICAgICAgeyBsYWJlbDogXCJXYXJtLXVwXCIsIHdvcms6IFwiMzAwbSBlYXN5ICsgZHJpbGxzXCIsIHJlc3Q6IFwiMSBtaW5cIiwgcmVwczogMSB9LFxyXG4gICAgICB7IGxhYmVsOiBcIjUwbSBzcHJpbnRcIiwgd29yazogXCI1MG0gbWF4IGVmZm9ydFwiLCByZXN0OiBcIjIgbWluXCIsIHJlcHM6IDQgfSxcclxuICAgICAgeyBsYWJlbDogXCJDb29sLWRvd25cIiwgd29yazogXCIyMDBtIGVhc3lcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgIF0sXHJcbiAgICB0YWdzOiBbXCJzcGVlZFwiLCBcInBvd2VyXCIsIFwibWF4LWVmZm9ydFwiXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcInN3aW0tZW5kdXJhbmNlXCIsXHJcbiAgICB0eXBlOiBcInN3aW1cIixcclxuICAgIHRpdGxlOiBcIkVuZHVyYW5jZSBTd2ltXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJDb250aW51b3VzIGRpc3RhbmNlIHN3aW0gYXQgYSBzdGVhZHksIHN1c3RhaW5hYmxlIHBhY2UuIE5vIHN0b3BwaW5nIGV4Y2VwdCB0byB0dXJuIGF0IHRoZSB3YWxsLiBUaGlzIGJ1aWxkcyBhZXJvYmljIHN3aW0gZml0bmVzcyBhbmQgcmFjZS1zaW11bGF0aW9uIGVuZHVyYW5jZS4gV2FybSB1cCAyMDBtIGVhc3kuIE1haW4gc2V0OiA2MDBtIGNvbnRpbnVvdXMgYXQgbW9kZXJhdGUgZWZmb3J0LCBicmVhdGhpbmcgZXZlcnkgM+KAkzQgc3Ryb2tlcy4gQ29vbCBkb3duIDIwMG0gZWFzeS4gSWYgdGhpcyBmZWVscyB0b28gZWFzeSwgYWRkIDIwMG0gdG8gdGhlIG1haW4gc2V0IG5leHQgdGltZS5cIixcclxuICAgIGR1cmF0aW9uOiA0MCxcclxuICAgIGludGVuc2l0eTogXCJtb2RlcmF0ZVwiLFxyXG4gICAgdGFnczogW1wiYWVyb2JpY1wiLCBcImNvbnRpbnVvdXNcIiwgXCJlbmR1cmFuY2VcIl0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJzd2ltLW9wZW4td2F0ZXItc2ltXCIsXHJcbiAgICB0eXBlOiBcInN3aW1cIixcclxuICAgIHRpdGxlOiBcIk9wZW4gV2F0ZXIgU2ltdWxhdGlvblwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiU2ltdWxhdGUgb3BlbiB3YXRlciByYWNlIGNvbmRpdGlvbnMgaW4gdGhlIHBvb2wuIFByYWN0aWNlIHNpZ2h0aW5nOiBsaWZ0IHlvdXIgZXllcyBmb3J3YXJkIGV2ZXJ5IDbigJM4IHN0cm9rZXMgKGp1c3QgZW5vdWdoIHRvIHNlZSBvdmVyIHRoZSB3YXRlcikgdGhlbiByb3RhdGUgdG8gYnJlYXRoZS4gUHJhY3RpY2UgZHJhZnRpbmc6IHN3aW0gZGlyZWN0bHkgYmVoaW5kIGEgbGFuZSBwYXJ0bmVyIDEgYm9keSBsZW5ndGggYXdheSDigJQgeW91J2xsIGZlZWwgYSBkcmFmdCBlZmZlY3QuIFByYWN0aWNlIHN1cmdpbmc6IGV2ZXJ5IDV0aCBsZW5ndGgsIHNwcmludCBoYXJkIGZvciAxNSBzdHJva2VzIHRvIHNpbXVsYXRlIGEgcmFjZSBzdXJnZS4gV2FybSB1cCAyMDBtLCBtYWluIHNldCA2MDBtIHdpdGggdGhlc2Ugc2tpbGxzIGVtYmVkZGVkLCBjb29sIGRvd24gMjAwbS5cIixcclxuICAgIGR1cmF0aW9uOiA0NSxcclxuICAgIGludGVuc2l0eTogXCJtb2RlcmF0ZVwiLFxyXG4gICAgdGFnczogW1wicmFjZS1wcmVwXCIsIFwib3Blbi13YXRlclwiLCBcInRyaWF0aGxvblwiXSxcclxuICB9LFxyXG5dO1xyXG5cclxuLy8g4pSA4pSA4pSAIEN5Y2xpbmcgLyBCaWtlIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuY29uc3QgQ1lDTElORzogQ2FyZGlvVGVtcGxhdGVbXSA9IFtcclxuICB7XHJcbiAgICBpZDogXCJiaWtlLWVuZHVyYW5jZVwiLFxyXG4gICAgdHlwZTogXCJiaWtlXCIsXHJcbiAgICB0aXRsZTogXCJab25lIDIgRW5kdXJhbmNlIFJpZGVcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIlN0ZWFkeSBlbmR1cmFuY2UgcmlkZSBhdCBab25lIDIgaW50ZW5zaXR5IOKAlCB5b3UgY2FuIGhvbGQgYSBjb252ZXJzYXRpb24gYnV0IGZlZWwgbGlrZSB5b3UncmUgd29ya2luZy4gVGhpcyBpcyB0aGUgZm91bmRhdGlvbiBvZiBhZXJvYmljIGZpdG5lc3MgYW5kIGZhdCBhZGFwdGF0aW9uLiBJZiB1c2luZyBhIHBvd2VyIG1ldGVyLCB0YXJnZXQgNTbigJM3NSUgb2YgRlRQLiBJZiB1c2luZyBSUEUsIGFpbSBmb3IgNeKAkzYvMTAuIEF2b2lkIHRoZSB0ZW1wdGF0aW9uIHRvIGdvIGhhcmRlciDigJQgdGhlIGdvYWwgaXMgdm9sdW1lIGF0IGxvdyBpbnRlbnNpdHksIG5vdCBpbnRlbnNpdHkgaXRzZWxmLlwiLFxyXG4gICAgZHVyYXRpb246IDYwLFxyXG4gICAgaW50ZW5zaXR5OiBcImVhc3lcIixcclxuICAgIHRhZ3M6IFtcImFlcm9iaWNcIiwgXCJ6b25lMlwiLCBcImJhc2UtYnVpbGRpbmdcIl0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJiaWtlLXRocmVzaG9sZFwiLFxyXG4gICAgdHlwZTogXCJiaWtlXCIsXHJcbiAgICB0aXRsZTogXCJUaHJlc2hvbGQgSW50ZXJ2YWxzXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJXYXJtIHVwIDEwIG1pbiBlYXN5IHNwaW4uIE1haW4gc2V0OiA0IMOXIDggbWludXRlcyBhdCB0aHJlc2hvbGQgcG93ZXIvZWZmb3J0IOKAlCB0aGlzIHNob3VsZCBmZWVsICdoYXJkIGJ1dCBjb250cm9sbGVkJyBhdCBhYm91dCA4LzEwIFJQRS4gSWYgdXNpbmcgcG93ZXIsIHRhcmdldCA5MOKAkzEwMCUgb2YgRlRQLiBUYWtlIDQgbWludXRlcyBlYXN5IHBlZGFsaW5nIGJldHdlZW4gZWFjaCBpbnRlcnZhbC4gQ29vbCBkb3duIDEwIG1pbnV0ZXMgZWFzeS4gVGhyZXNob2xkIHdvcmsgZGlyZWN0bHkgcmFpc2VzIHlvdXIgc3VzdGFpbmFibGUgcmFjZSBwYWNlLlwiLFxyXG4gICAgZHVyYXRpb246IDYwLFxyXG4gICAgaW50ZW5zaXR5OiBcImhhcmRcIixcclxuICAgIGludGVydmFsczogW1xyXG4gICAgICB7IGxhYmVsOiBcIldhcm0tdXBcIiwgd29yazogXCIxMCBtaW4gZWFzeVwiLCByZXN0OiBcIjBcIiwgcmVwczogMSB9LFxyXG4gICAgICB7IGxhYmVsOiBcIlRocmVzaG9sZCBpbnRlcnZhbFwiLCB3b3JrOiBcIjggbWluIGF0IHRocmVzaG9sZFwiLCByZXN0OiBcIjQgbWluIGVhc3lcIiwgcmVwczogNCB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNvb2wtZG93blwiLCB3b3JrOiBcIjEwIG1pbiBlYXN5XCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICBdLFxyXG4gICAgdGFnczogW1widGhyZXNob2xkXCIsIFwiZnRwXCIsIFwiaW50ZXJ2YWxzXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiYmlrZS1yZWNvdmVyeVwiLFxyXG4gICAgdHlwZTogXCJiaWtlXCIsXHJcbiAgICB0aXRsZTogXCJSZWNvdmVyeSBTcGluXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJWZXJ5IGVhc3kgcGVkYWxpbmcgYXQgbG93IHJlc2lzdGFuY2UgdG8gcHJvbW90ZSBhY3RpdmUgcmVjb3ZlcnkuIFNwaW4gYXQgODXigJM5NSBSUE0gdG8gZmx1c2ggbWV0YWJvbGljIHdhc3RlIGZyb20geW91ciBsZWdzIHdpdGhvdXQgYWRkaW5nIHRyYWluaW5nIHN0cmVzcy4gVGhpcyBzaG91bGQgZmVlbCBlZmZvcnRsZXNzIOKAlCBpZiB5b3UncmUgYnJlYXRoaW5nIGhhcmQsIHlvdSdyZSBnb2luZyB0b28gaGFyZC4gVXNlIHRoaXMgb24gZGF5cyBhZnRlciBoZWF2eSBsaWZ0aW5nIG9yIGxvbmcgcnVucy4gS2VlcCB5b3VyIGhlYXJ0IHJhdGUgYmVsb3cgMTIwIGJwbS5cIixcclxuICAgIGR1cmF0aW9uOiAzMCxcclxuICAgIGludGVuc2l0eTogXCJlYXN5XCIsXHJcbiAgICB0YWdzOiBbXCJyZWNvdmVyeVwiLCBcImFjdGl2ZS1yZWNvdmVyeVwiLCBcImVhc3lcIl0sXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIOKUgOKUgOKUgCBSb3dpbmcg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5jb25zdCBST1dJTkc6IENhcmRpb1RlbXBsYXRlW10gPSBbXHJcbiAge1xyXG4gICAgaWQ6IFwicm93LTUwMC1yZXBlYXRzXCIsXHJcbiAgICB0eXBlOiBcInJvd1wiLFxyXG4gICAgdGl0bGU6IFwiNTAwbSBSZXBlYXRzXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJXYXJtIHVwIDEwMDBtIGVhc3kgcm93aW5nIGF0IDIwIHN0cm9rZXMvbWluLiBNYWluIHNldDogNSDDlyA1MDBtIGF0IGhhcmQgZWZmb3J0IChhYm91dCA4NeKAkzkwJSBvZiBtYXggZWZmb3J0KSwgdGFraW5nIDIgbWludXRlcyBvZiBlYXN5IHJvd2luZyBiZXR3ZWVuIGVhY2guIEFpbSBmb3IgY29uc2lzdGVudCBzcGxpdCB0aW1lcyDigJQgeW91ciBsYXN0IHJlcCBzaG91bGQgYmUgd2l0aGluIDUgc2Vjb25kcyBvZiB5b3VyIGZpcnN0LiBNYWludGFpbiBwcm9wZXIgZm9ybSB0aHJvdWdob3V0OiBkcml2ZSB3aXRoIGxlZ3MgZmlyc3QsIHRoZW4gaGlwcywgdGhlbiBhcm1zLiBDb29sIGRvd24gMTAwMG0gZWFzeS5cIixcclxuICAgIGR1cmF0aW9uOiAzNSxcclxuICAgIGludGVuc2l0eTogXCJoYXJkXCIsXHJcbiAgICBpbnRlcnZhbHM6IFtcclxuICAgICAgeyBsYWJlbDogXCJXYXJtLXVwXCIsIHdvcms6IFwiMTAwMG0gZWFzeVwiLCByZXN0OiBcIjEgbWluXCIsIHJlcHM6IDEgfSxcclxuICAgICAgeyBsYWJlbDogXCI1MDBtIHJlcFwiLCB3b3JrOiBcIjUwMG0gaGFyZFwiLCByZXN0OiBcIjIgbWluIGVhc3kgcm93XCIsIHJlcHM6IDUgfSxcclxuICAgICAgeyBsYWJlbDogXCJDb29sLWRvd25cIiwgd29yazogXCIxMDAwbSBlYXN5XCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICBdLFxyXG4gICAgdGFnczogW1wiaW50ZXJ2YWxzXCIsIFwic3BlZWRcIiwgXCJyb3dpbmdcIl0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJyb3ctc3RlYWR5LXN0YXRlXCIsXHJcbiAgICB0eXBlOiBcInJvd1wiLFxyXG4gICAgdGl0bGU6IFwiMjAtTWludXRlIFN0ZWFkeSBTdGF0ZVwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiQ29udGludW91cyByb3dpbmcgYXQgYSBzdGVhZHkgbW9kZXJhdGUgcGFjZS4gVGFyZ2V0IDIy4oCTMjQgc3Ryb2tlcyBwZXIgbWludXRlLiBUaGlzIHNob3VsZCBmZWVsIGxpa2UgYSA2LzEwIGVmZm9ydCDigJQgeW91IGNhbiBzcGVhayBhIHNob3J0IHNlbnRlbmNlIGJ1dCBhcmUgY2xlYXJseSB3b3JraW5nLiBGb2N1cyBvbiB0aGUgZHJpdmUgc2VxdWVuY2U6IGxlZ3Mg4oaSIGJhY2sg4oaSIGFybXMsIGFuZCB0aGUgcmVjb3Zlcnkgc2VxdWVuY2U6IGFybXMg4oaSIGJhY2sg4oaSIGxlZ3MuIFRyYWNrIHlvdXIgNTAwbSBzcGxpdCBhbmQgYWltIHRvIGtlZXAgaXQgY29uc2lzdGVudCB0aHJvdWdob3V0IHRoZSAyMCBtaW51dGVzLlwiLFxyXG4gICAgZHVyYXRpb246IDI1LFxyXG4gICAgaW50ZW5zaXR5OiBcIm1vZGVyYXRlXCIsXHJcbiAgICB0YWdzOiBbXCJhZXJvYmljXCIsIFwic3RlYWR5LXN0YXRlXCIsIFwidGVjaG5pcXVlXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwicm93LXBvd2VyLWludGVydmFsc1wiLFxyXG4gICAgdHlwZTogXCJyb3dcIixcclxuICAgIHRpdGxlOiBcIlBvd2VyIEludGVydmFsc1wiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiU2hvcnQsIGV4cGxvc2l2ZSByb3dpbmcgaW50ZXJ2YWxzIHRvIGJ1aWxkIHJhdyBwb3dlciBvdXRwdXQuIFdhcm0gdXAgNSBtaW4gZWFzeS4gTWFpbiBzZXQ6IDEwIMOXIDEgbWludXRlIGFsbC1vdXQgZWZmb3J0IGF0IG1heCBwb3dlciAocmF0ZTogMjjigJMzMiBzdHJva2VzL21pbiksIDEgbWludXRlIGNvbXBsZXRlIHJlc3QgYmV0d2VlbiBlYWNoLiBFeHBsb2RlIG9mZiB0aGUgY2F0Y2ggb24gZXZlcnkgc3Ryb2tlIOKAlCB0aGVzZSBzaG91bGQgZmVlbCBsaWtlIHNwcmludHMuIFJlY29yZCB5b3VyIGJlc3QgNTAwbSBzcGxpdCBmcm9tIGVhY2ggaW50ZXJ2YWwgYW5kIHRyeSB0byBiZWF0IGl0IGVhY2ggc2Vzc2lvbi5cIixcclxuICAgIGR1cmF0aW9uOiAzMCxcclxuICAgIGludGVuc2l0eTogXCJtYXhcIixcclxuICAgIGludGVydmFsczogW1xyXG4gICAgICB7IGxhYmVsOiBcIldhcm0tdXBcIiwgd29yazogXCI1IG1pbiBlYXN5XCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiUG93ZXIgaW50ZXJ2YWxcIiwgd29yazogXCIxIG1pbiBtYXggZWZmb3J0XCIsIHJlc3Q6IFwiMSBtaW4gcmVzdFwiLCByZXBzOiAxMCB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNvb2wtZG93blwiLCB3b3JrOiBcIjUgbWluIGVhc3lcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgIF0sXHJcbiAgICB0YWdzOiBbXCJwb3dlclwiLCBcInNwcmludFwiLCBcImFuYWVyb2JpY1wiXSxcclxuICB9LFxyXG5dO1xyXG5cclxuLy8g4pSA4pSA4pSAIEhJSVQgLyBHZW5lcmFsIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuY29uc3QgSElJVDogQ2FyZGlvVGVtcGxhdGVbXSA9IFtcclxuICB7XHJcbiAgICBpZDogXCJoaWl0LWFzc2F1bHQtYmlrZVwiLFxyXG4gICAgdHlwZTogXCJoaWl0XCIsXHJcbiAgICB0aXRsZTogXCJBc3NhdWx0IEJpa2UgSW50ZXJ2YWxzXCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJXYXJtIHVwIDMgbWluIGVhc3kuIE1haW4gc2V0OiAxMCByb3VuZHMgb2YgMjAgc2Vjb25kcyBhbGwtb3V0IGVmZm9ydCBvbiB0aGUgYXNzYXVsdCBiaWtlLCA0MCBzZWNvbmRzIGVhc3kgcGVkYWxpbmcuIFNwcmludCBhcyBoYXJkIGFzIHBoeXNpY2FsbHkgcG9zc2libGUgZHVyaW5nIGVhY2ggMjAtc2Vjb25kIGVmZm9ydCDigJQgYXJtcyBhbmQgbGVncyBkcml2aW5nIHNpbXVsdGFuZW91c2x5LiBUaGUgYXNzYXVsdCBiaWtlIHVuaXF1ZWx5IHRheGVzIGJvdGggdXBwZXIgYW5kIGxvd2VyIGJvZHksIG1ha2luZyBpdCBleGNlbGxlbnQgZm9yIG1ldGFib2xpYyBjb25kaXRpb25pbmcuIENvb2wgZG93biAzIG1pbiBlYXN5LiBUb3RhbDogfjE3IG1pbi5cIixcclxuICAgIGR1cmF0aW9uOiAyMCxcclxuICAgIGludGVuc2l0eTogXCJtYXhcIixcclxuICAgIGludGVydmFsczogW1xyXG4gICAgICB7IGxhYmVsOiBcIldhcm0tdXBcIiwgd29yazogXCIzIG1pbiBlYXN5XCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiU3ByaW50IGludGVydmFsXCIsIHdvcms6IFwiMjAgc2VjIG1heCBlZmZvcnRcIiwgcmVzdDogXCI0MCBzZWMgZWFzeVwiLCByZXBzOiAxMCB9LFxyXG4gICAgICB7IGxhYmVsOiBcIkNvb2wtZG93blwiLCB3b3JrOiBcIjMgbWluIGVhc3lcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgIF0sXHJcbiAgICB0YWdzOiBbXCJoaWl0XCIsIFwiYXNzYXVsdC1iaWtlXCIsIFwibWV0YWJvbGljXCJdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiaGlpdC1qdW1wLXJvcGUtdGFiYXRhXCIsXHJcbiAgICB0eXBlOiBcImhpaXRcIixcclxuICAgIHRpdGxlOiBcIkp1bXAgUm9wZSBUYWJhdGFcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIkNsYXNzaWMgVGFiYXRhIHByb3RvY29sIHdpdGggYSBqdW1wIHJvcGUuIFdhcm0gdXAgMyBtaW4gb2YgZWFzeSBza2lwcGluZy4gVGhlbjogOCByb3VuZHMgb2YgMjAgc2Vjb25kcyBtYXhpbXVtLWVmZm9ydCBqdW1wIHJvcGUgKGFzIG1hbnkganVtcHMgYXMgcG9zc2libGUpLCAxMCBzZWNvbmRzIHJlc3QuIFRoYXQncyA0IG1pbnV0ZXMgb2YgcHVyZSBUYWJhdGEuIFJlc3QgMSBtaW51dGUsIHRoZW4gcmVwZWF0IHRoZSA0LW1pbnV0ZSBUYWJhdGEgMiBtb3JlIHRpbWVzIGZvciAzIHRvdGFsIFRhYmF0YSBibG9ja3MuIENvb2wgZG93biAzIG1pbiBlYXN5IHNraXBwaW5nLiBGb2N1cyBvbiB3cmlzdCByb3RhdGlvbiDigJQgbm90IGFybSBzd2luZ2luZy5cIixcclxuICAgIGR1cmF0aW9uOiAyMCxcclxuICAgIGludGVuc2l0eTogXCJtYXhcIixcclxuICAgIGludGVydmFsczogW1xyXG4gICAgICB7IGxhYmVsOiBcIldhcm0tdXBcIiwgd29yazogXCIzIG1pbiBlYXN5IHNraXBcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDEgfSxcclxuICAgICAgeyBsYWJlbDogXCJUYWJhdGEgYmxvY2sgKDggw5cgMjAvMTApXCIsIHdvcms6IFwiMjAgc2VjIG1heCBqdW1wc1wiLCByZXN0OiBcIjEwIHNlY1wiLCByZXBzOiA4IH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiUmVzdCBiZXR3ZWVuIGJsb2Nrc1wiLCB3b3JrOiBcIjEgbWluIHJlc3RcIiwgcmVzdDogXCIwXCIsIHJlcHM6IDIgfSxcclxuICAgICAgeyBsYWJlbDogXCJSZXBlYXQgVGFiYXRhIGJsb2NrXCIsIHdvcms6IFwiMjAgc2VjIG1heCBqdW1wc1wiLCByZXN0OiBcIjEwIHNlY1wiLCByZXBzOiA4IH0sXHJcbiAgICAgIHsgbGFiZWw6IFwiQ29vbC1kb3duXCIsIHdvcms6IFwiMyBtaW4gZWFzeSBza2lwXCIsIHJlc3Q6IFwiMFwiLCByZXBzOiAxIH0sXHJcbiAgICBdLFxyXG4gICAgdGFnczogW1widGFiYXRhXCIsIFwianVtcC1yb3BlXCIsIFwiaGlpdFwiXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcImhpaXQtc2xlZFwiLFxyXG4gICAgdHlwZTogXCJoaWl0XCIsXHJcbiAgICB0aXRsZTogXCJTbGVkIFB1c2gvUHVsbFwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiSWYgYSBzbGVkIGlzIGF2YWlsYWJsZSwgdGhpcyBpcyBvbmUgb2YgdGhlIG1vc3QgZWZmZWN0aXZlIHRvdGFsLWJvZHkgY29uZGl0aW9uaW5nIHRvb2xzLiBMb2FkIHRoZSBzbGVkIHdpdGggYSBtb2RlcmF0ZSB3ZWlnaHQuIFB1c2g6IGRyaXZlIHRoZSBzbGVkIDIwbSBkb3duIHRoZSB0dXJmIHdpdGggcG93ZXJmdWwgbGVnIGRyaXZlLCBsZWFuaW5nIGludG8gdGhlIGhhbmRsZXMuIFJlc3QgOTAgc2Vjb25kcy4gUHVsbDogYXR0YWNoIGEgcm9wZSBvciBoYW5kbGUgYW5kIGJhY2twZWRhbCB0byBwdWxsIHRoZSBzbGVkIHRvd2FyZCB5b3UgZm9yIDIwbS4gUmVzdCA5MCBzZWNvbmRzLiBQZXJmb3JtIDYgcm91bmRzIG9mIHB1c2gvcHVsbCBhbHRlcm5hdGluZy4gVGhlIHNsZWQgaGFzIG5vIGVjY2VudHJpYyBsb2FkIOKAlCBncmVhdCBvbiBoZWF2eSBsZWcgZGF5cy5cIixcclxuICAgIGR1cmF0aW9uOiAyNSxcclxuICAgIGludGVuc2l0eTogXCJoYXJkXCIsXHJcbiAgICBpbnRlcnZhbHM6IFtcclxuICAgICAgeyBsYWJlbDogXCJTbGVkIHB1c2ggMjBtXCIsIHdvcms6IFwiMjBtIHB1c2hcIiwgcmVzdDogXCI5MCBzZWNcIiwgcmVwczogNiB9LFxyXG4gICAgICB7IGxhYmVsOiBcIlNsZWQgcHVsbCAyMG1cIiwgd29yazogXCIyMG0gcHVsbC9iYWNrcGVkYWxcIiwgcmVzdDogXCI5MCBzZWNcIiwgcmVwczogNiB9LFxyXG4gICAgXSxcclxuICAgIHRhZ3M6IFtcInNsZWRcIiwgXCJjb25kaXRpb25pbmdcIiwgXCJmdW5jdGlvbmFsXCJdLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyDilIDilIDilIAgQ29tYmluZWQgTGlicmFyeSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmV4cG9ydCBjb25zdCBDQVJESU9fVEVNUExBVEVTOiBDYXJkaW9UZW1wbGF0ZVtdID0gW1xyXG4gIC4uLlJVTk5JTkcsXHJcbiAgLi4uU1dJTU1JTkcsXHJcbiAgLi4uQ1lDTElORyxcclxuICAuLi5ST1dJTkcsXHJcbiAgLi4uSElJVCxcclxuXTtcclxuXHJcbi8vIOKUgOKUgOKUgCBMb29rdXAgSGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZUJ5SWQoaWQ6IHN0cmluZyk6IENhcmRpb1RlbXBsYXRlIHwgdW5kZWZpbmVkIHtcclxuICByZXR1cm4gQ0FSRElPX1RFTVBMQVRFUy5maW5kKHQgPT4gdC5pZCA9PT0gaWQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVtcGxhdGVzQnlUeXBlKHR5cGU6IENhcmRpb1RlbXBsYXRlW1widHlwZVwiXSk6IENhcmRpb1RlbXBsYXRlW10ge1xyXG4gIHJldHVybiBDQVJESU9fVEVNUExBVEVTLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gdHlwZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZXNCeUludGVuc2l0eShpbnRlbnNpdHk6IENhcmRpb1RlbXBsYXRlW1wiaW50ZW5zaXR5XCJdKTogQ2FyZGlvVGVtcGxhdGVbXSB7XHJcbiAgcmV0dXJuIENBUkRJT19URU1QTEFURVMuZmlsdGVyKHQgPT4gdC5pbnRlbnNpdHkgPT09IGludGVuc2l0eSk7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBUeXBlIEljb25zIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuZXhwb3J0IGNvbnN0IENBUkRJT19UWVBFX0lDT05TOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gIHJ1bjogXCLwn4+DXCIsXHJcbiAgc3dpbTogXCLwn4+KXCIsXHJcbiAgYmlrZTogXCLwn5q0XCIsXHJcbiAgcm93OiBcIvCfmqNcIixcclxuICBzcHJpbnQ6IFwi4pqhXCIsXHJcbiAgaGlpdDogXCLwn5SlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgSU5URU5TSVRZX0NPTE9SUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICBlYXN5OiBcInRleHQtWyMwMEM4NTNdIGJvcmRlci1bIzAwQzg1M10vMzAgYmctWyMwMEM4NTNdLzEwXCIsXHJcbiAgbW9kZXJhdGU6IFwidGV4dC15ZWxsb3ctNDAwIGJvcmRlci15ZWxsb3ctNDAwLzMwIGJnLXllbGxvdy00MDAvMTBcIixcclxuICBoYXJkOiBcInRleHQtb3JhbmdlLTQwMCBib3JkZXItb3JhbmdlLTQwMC8zMCBiZy1vcmFuZ2UtNDAwLzEwXCIsXHJcbiAgbWF4OiBcInRleHQtcmVkLTQwMCBib3JkZXItcmVkLTQwMC8zMCBiZy1yZWQtNDAwLzEwXCIsXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJSVU5OSU5HIiwiaWQiLCJ0eXBlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1cmF0aW9uIiwiaW50ZW5zaXR5IiwidGFncyIsImludGVydmFscyIsImxhYmVsIiwid29yayIsInJlc3QiLCJyZXBzIiwiU1dJTU1JTkciLCJDWUNMSU5HIiwiUk9XSU5HIiwiSElJVCIsIkNBUkRJT19URU1QTEFURVMiLCJnZXRUZW1wbGF0ZUJ5SWQiLCJmaW5kIiwidCIsImdldFRlbXBsYXRlc0J5VHlwZSIsImZpbHRlciIsImdldFRlbXBsYXRlc0J5SW50ZW5zaXR5IiwiQ0FSRElPX1RZUEVfSUNPTlMiLCJydW4iLCJzd2ltIiwiYmlrZSIsInJvdyIsInNwcmludCIsImhpaXQiLCJJTlRFTlNJVFlfQ09MT1JTIiwiZWFzeSIsIm1vZGVyYXRlIiwiaGFyZCIsIm1heCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cardio-templates.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"warn\",\n        \"error\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO1FBQVE7S0FBUTtBQUN4QixHQUFHO0FBRUwsSUFBSUMsSUFBcUMsRUFBRUosZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9yYzMvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IFtcIndhcm5cIiwgXCJlcnJvclwiXSxcbiAgfSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/program-generator.ts":
/*!**************************************!*\
  !*** ./src/lib/program-generator.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatHybridWeekForCoach: () => (/* binding */ formatHybridWeekForCoach),\n/* harmony export */   generateHybridWeek: () => (/* binding */ generateHybridWeek),\n/* harmony export */   getTodayCardioFromPlan: () => (/* binding */ getTodayCardioFromPlan)\n/* harmony export */ });\n/* harmony import */ var _lib_cardio_templates__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/cardio-templates */ \"(rsc)/./src/lib/cardio-templates.ts\");\n// ─── Hybrid Athlete Program Generator ────────────────────────────────────────\n// Generates structured weekly plans combining strength and cardio for hybrid athletes.\n\nfunction buildSportProfile(input) {\n    const { sport, raceGoals } = input;\n    const goals = raceGoals || [];\n    const isTriathlete = sport === \"triathlon\" || goals.some((r)=>[\n            \"sprint_tri\",\n            \"olympic_tri\",\n            \"half_ironman\",\n            \"full_ironman\"\n        ].includes(r.type));\n    const isRunner = sport === \"running\" || goals.some((r)=>[\n            \"5k_10k\",\n            \"half_marathon\",\n            \"full_marathon\"\n        ].includes(r.type));\n    const isSwimmer = sport === \"swimming\" || goals.some((r)=>r.type === \"swim_race\");\n    const isCyclist = sport === \"cycling\" || goals.some((r)=>r.type === \"cycling_race\");\n    const isOCR = goals.some((r)=>r.type === \"ocr\");\n    const isPowerlifter = goals.some((r)=>r.type === \"powerlifting\");\n    // Determine weeks to nearest race\n    const today = Date.now();\n    const datedGoals = goals.filter((r)=>r.date).map((r)=>Math.max(0, Math.round((new Date(r.date).getTime() - today) / (86400000 * 7))));\n    const weeksToRace = datedGoals.length > 0 ? Math.min(...datedGoals) : null;\n    const inTaper = weeksToRace !== null && weeksToRace <= 3;\n    const raceApproaching = weeksToRace !== null && weeksToRace <= 6;\n    let primarySport = \"general\";\n    if (isTriathlete) primarySport = \"triathlete\";\n    else if (isRunner) primarySport = \"runner\";\n    else if (isSwimmer) primarySport = \"swimmer\";\n    else if (isCyclist) primarySport = \"cyclist\";\n    else if (isOCR) primarySport = \"ocr\";\n    else if (sport) primarySport = sport;\n    return {\n        isTriathlete,\n        isRunner,\n        isSwimmer,\n        isCyclist,\n        isOCR,\n        isPowerlifter,\n        primarySport,\n        weeksToRace,\n        inTaper,\n        raceApproaching\n    };\n}\n// ─── Cardio Volume Targets ────────────────────────────────────────────────────\nfunction getCardioFrequency(input, sp) {\n    const vol = input.trainingVolume || \"intermediate\";\n    if (sp.isTriathlete) {\n        return vol === \"advanced\" ? 5 : vol === \"intermediate\" ? 4 : 3;\n    }\n    if (sp.isRunner) {\n        return vol === \"advanced\" ? 5 : vol === \"intermediate\" ? 4 : 3;\n    }\n    if (sp.isSwimmer || sp.isCyclist) {\n        return vol === \"advanced\" ? 4 : 3;\n    }\n    if (input.goal === \"endurance\") {\n        return 4;\n    }\n    if (input.goal === \"fat_loss\") {\n        return 3;\n    }\n    // Strength / muscle_gain / general\n    return 2;\n}\n// ─── Template Lookup ──────────────────────────────────────────────────────────\nfunction t(id) {\n    const found = _lib_cardio_templates__WEBPACK_IMPORTED_MODULE_0__.CARDIO_TEMPLATES.find((c)=>c.id === id);\n    if (!found) throw new Error(`Cardio template not found: ${id}`);\n    return found;\n}\nfunction toAssignment(template) {\n    return {\n        templateId: template.id,\n        title: template.title,\n        type: template.type,\n        duration: template.duration,\n        intensity: template.intensity\n    };\n}\n// ─── Rule Checks ─────────────────────────────────────────────────────────────\nfunction countConsecutiveHard(days, currentIdx) {\n    let count = 0;\n    for(let i = currentIdx - 1; i >= 0; i--){\n        const c = days[i].cardio;\n        if (c && (c.intensity === \"hard\" || c.intensity === \"max\")) count++;\n        else break;\n    }\n    return count;\n}\nfunction prevDayHasHeavyLift(days, currentIdx) {\n    if (currentIdx === 0) return false;\n    const prev = days[currentIdx - 1];\n    // Legs / Lower = heavy; Upper / Push / Pull = moderate\n    return prev.hasStrength && !!prev.strengthLabel && /legs|lower|full/i.test(prev.strengthLabel);\n}\n// ─── Strength Day Layout ──────────────────────────────────────────────────────\nfunction assignStrengthDays(totalDays, liftDays, sp) {\n    // Returns a 7-element array (Mon–Sun) with strength labels or null\n    const schedule = Array(7).fill(null);\n    if (liftDays >= 6) {\n        // PPL × 2\n        const labels = [\n            \"Push A\",\n            \"Pull A\",\n            \"Legs A\",\n            \"Push B\",\n            \"Pull B\",\n            \"Legs B\"\n        ];\n        for(let i = 0; i < 6; i++)schedule[i] = labels[i];\n    } else if (liftDays === 5) {\n        schedule[0] = \"Push\";\n        schedule[1] = \"Pull\";\n        schedule[2] = \"Legs\";\n        schedule[3] = \"Upper\";\n        schedule[4] = \"Full Body\";\n    } else if (liftDays === 4) {\n        schedule[0] = \"Upper A\";\n        schedule[2] = \"Lower A\";\n        schedule[3] = \"Upper B\";\n        schedule[5] = \"Lower B\"; // Friday or Saturday\n        // Adjust: prefer Mon/Tue/Thu/Fri\n        const preferred = [\n            0,\n            1,\n            3,\n            4\n        ];\n        const labels = [\n            \"Upper A\",\n            \"Lower A\",\n            \"Upper B\",\n            \"Lower B\"\n        ];\n        schedule.fill(null);\n        preferred.forEach((d, i)=>{\n            schedule[d] = labels[i];\n        });\n    } else if (liftDays === 3) {\n        schedule[0] = \"Full Body A\";\n        schedule[2] = \"Full Body B\";\n        schedule[4] = \"Full Body C\";\n    } else if (liftDays === 2) {\n        schedule[0] = \"Upper\";\n        schedule[3] = \"Lower\";\n    }\n    // For powerlifters keep Saturday free for long sessions\n    if (sp.isPowerlifter && schedule[5] === null) {\n    // No adjustment needed\n    }\n    return schedule;\n}\n// ─── Weekly Plan Builders ─────────────────────────────────────────────────────\nconst DAY_NAMES = [\n    \"Mon\",\n    \"Tue\",\n    \"Wed\",\n    \"Thu\",\n    \"Fri\",\n    \"Sat\",\n    \"Sun\"\n];\nfunction buildTriathletePlan(input, sp, liftDays, cardioDays) {\n    // Reference: Mon Lift+EasyRun, Tue Swim, Wed Lift+Tempo, Thu Bike, Fri Lift+EasySwim, Sat Long, Sun Rest\n    const strengthSchedule = assignStrengthDays(7, liftDays, sp);\n    // Taper: swap hard sessions for easy\n    const taperMod = sp.inTaper;\n    const cardioMap = {\n        0: toAssignment(t(\"run-easy\")),\n        1: toAssignment(t(\"swim-drills\")),\n        2: toAssignment(taperMod ? t(\"run-easy\") : t(\"run-tempo\")),\n        3: toAssignment(taperMod ? t(\"bike-recovery\") : t(\"bike-endurance\")),\n        4: toAssignment(t(\"swim-pull\")),\n        5: toAssignment(taperMod ? t(\"run-easy\") : t(\"run-long\")),\n        6: null\n    };\n    return DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: cardioMap[i] || undefined,\n            isRest: i === 6,\n            note: i === 6 ? \"Rest & recovery\" : taperMod && [\n                3,\n                5\n            ].includes(i) ? \"Taper week — keep intensity low\" : undefined\n        }));\n}\nfunction buildRunnerPlan(input, sp, liftDays, cardioDays) {\n    const strengthSchedule = assignStrengthDays(7, liftDays, sp);\n    const taperMod = sp.inTaper;\n    // Avoid hard intervals the day after a heavy lift day\n    const cardioMap = {\n        0: toAssignment(t(\"run-easy\")),\n        1: toAssignment(taperMod ? t(\"run-easy\") : t(\"run-400-intervals\")),\n        2: toAssignment(t(\"run-easy\")),\n        3: toAssignment(taperMod ? t(\"run-easy\") : t(\"run-tempo\")),\n        4: toAssignment(t(\"run-easy\")),\n        5: toAssignment(taperMod ? t(\"run-easy\") : t(\"run-long\")),\n        6: null\n    };\n    if (cardioDays < 5) delete cardioMap[4]; // Remove Friday easy run\n    if (cardioDays < 4) delete cardioMap[2]; // Remove Wednesday easy run\n    return DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: cardioMap[i] || undefined,\n            isRest: i === 6 && !cardioMap[6],\n            note: sp.raceApproaching && i === 5 ? \"Key long run — race simulation pace\" : undefined\n        }));\n}\nfunction buildSwimmerPlan(input, sp, liftDays, cardioDays) {\n    const strengthSchedule = assignStrengthDays(7, liftDays, sp);\n    const taperMod = sp.inTaper;\n    const cardioMap = {\n        0: toAssignment(t(\"swim-drills\")),\n        1: null,\n        2: toAssignment(taperMod ? t(\"swim-endurance\") : t(\"swim-pull\")),\n        3: toAssignment(taperMod ? t(\"swim-drills\") : t(\"swim-sprints\")),\n        4: toAssignment(t(\"swim-kick\")),\n        5: toAssignment(t(\"swim-endurance\")),\n        6: null\n    };\n    if (cardioDays < 4) delete cardioMap[4];\n    return DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: cardioMap[i] || undefined,\n            isRest: !cardioMap[i] && !strengthSchedule[i]\n        }));\n}\nfunction buildCyclistPlan(input, sp, liftDays, cardioDays) {\n    const strengthSchedule = assignStrengthDays(7, liftDays, sp);\n    const taperMod = sp.inTaper;\n    const cardioMap = {\n        0: toAssignment(t(\"bike-recovery\")),\n        1: null,\n        2: toAssignment(taperMod ? t(\"bike-recovery\") : t(\"bike-threshold\")),\n        3: toAssignment(t(\"bike-endurance\")),\n        4: null,\n        5: toAssignment(taperMod ? t(\"bike-endurance\") : t(\"bike-endurance\")),\n        6: null\n    };\n    return DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: cardioMap[i] || undefined,\n            isRest: !cardioMap[i] && !strengthSchedule[i],\n            note: i === 5 ? \"Long ride — aim for 60–90 min\" : undefined\n        }));\n}\nfunction buildEndurancePlan(input, liftDays) {\n    const strengthSchedule = assignStrengthDays(7, liftDays, {\n        isTriathlete: false\n    });\n    const cardioMap = {\n        0: toAssignment(t(\"run-easy\")),\n        1: null,\n        2: toAssignment(t(\"run-800-repeats\")),\n        3: toAssignment(t(\"bike-endurance\")),\n        4: null,\n        5: toAssignment(t(\"run-long\")),\n        6: toAssignment(t(\"bike-recovery\"))\n    };\n    return DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: cardioMap[i] || undefined,\n            isRest: !cardioMap[i] && !strengthSchedule[i]\n        }));\n}\nfunction buildGeneralPlan(input, liftDays, cardioDays) {\n    const strengthSchedule = assignStrengthDays(7, liftDays, {});\n    // General cardio: mix of formats, nothing too sport-specific\n    const generalCardio = [\n        toAssignment(t(\"run-fartlek\")),\n        toAssignment(t(\"hiit-jump-rope-tabata\")),\n        toAssignment(t(\"row-steady-state\")),\n        toAssignment(t(\"bike-recovery\")),\n        toAssignment(t(\"run-easy\"))\n    ];\n    const days = DAY_NAMES.map((day, i)=>({\n            day,\n            dayIndex: i,\n            hasStrength: !!strengthSchedule[i],\n            strengthLabel: strengthSchedule[i] || undefined,\n            cardio: undefined,\n            isRest: false\n        }));\n    // Assign cardio to non-lifting days first, then fill remaining slots\n    let cardioAssigned = 0;\n    const cardioPool = [\n        ...generalCardio\n    ];\n    // Apply rule: easy cardio on day after heavy lift\n    for(let i = 0; i < 7 && cardioAssigned < cardioDays; i++){\n        if (days[i].hasStrength) continue; // No standalone cardio on pure lift days for general users\n        if (i === 6) continue; // Keep Sunday as rest for general users\n        const useEasy = prevDayHasHeavyLift(days, i);\n        if (useEasy) {\n            days[i].cardio = toAssignment(t(\"bike-recovery\"));\n        } else {\n            days[i].cardio = cardioPool[cardioAssigned % cardioPool.length];\n        }\n        cardioAssigned++;\n    }\n    // Mark pure rest days\n    days.forEach((d)=>{\n        d.isRest = !d.hasStrength && !d.cardio;\n    });\n    return days;\n}\n// ─── Constraint Enforcement ───────────────────────────────────────────────────\nfunction enforceConstraints(days) {\n    // Rule: no more than 2 hard cardio days back-to-back\n    for(let i = 0; i < days.length; i++){\n        const c = days[i].cardio;\n        if (!c) continue;\n        if (countConsecutiveHard(days, i) >= 2 && (c.intensity === \"hard\" || c.intensity === \"max\")) {\n            // Downgrade to easy equivalent\n            const easyTemplate = _lib_cardio_templates__WEBPACK_IMPORTED_MODULE_0__.CARDIO_TEMPLATES.find((t)=>t.type === c.type && t.intensity === \"easy\") || _lib_cardio_templates__WEBPACK_IMPORTED_MODULE_0__.CARDIO_TEMPLATES.find((t)=>t.intensity === \"easy\");\n            if (easyTemplate) {\n                days[i].cardio = toAssignment(easyTemplate);\n                days[i].note = (days[i].note ? days[i].note + \" \\xb7 \" : \"\") + \"Intensity reduced — recovery day\";\n            }\n        }\n        // Rule: easy cardio on day after heavy lifting session\n        if (prevDayHasHeavyLift(days, i) && c.intensity === \"hard\") {\n            const easyTemplate = _lib_cardio_templates__WEBPACK_IMPORTED_MODULE_0__.CARDIO_TEMPLATES.find((t)=>t.type === c.type && t.intensity === \"easy\") || t(\"bike-recovery\");\n            days[i].cardio = toAssignment(easyTemplate);\n            days[i].note = (days[i].note ? days[i].note + \" \\xb7 \" : \"\") + \"Easy cardio — recovery after heavy lift\";\n        }\n    }\n    return days;\n}\n// ─── Main Export ──────────────────────────────────────────────────────────────\nfunction generateHybridWeek(input) {\n    const sp = buildSportProfile(input);\n    const liftDays = Math.min(input.trainingDays, 5);\n    const cardioDays = getCardioFrequency(input, sp);\n    let days;\n    let programType;\n    let description;\n    if (sp.isTriathlete) {\n        days = buildTriathletePlan(input, sp, liftDays, cardioDays);\n        programType = \"triathlete\";\n        description = sp.inTaper ? \"Taper week — reducing volume ahead of race\" : \"Triathlon hybrid: swim, bike, run + strength\";\n    } else if (sp.isRunner) {\n        days = buildRunnerPlan(input, sp, liftDays, cardioDays);\n        programType = \"runner\";\n        description = sp.raceApproaching ? \"Race-specific run build + strength support\" : \"Running hybrid: aerobic base + speed work + strength\";\n    } else if (sp.isSwimmer) {\n        days = buildSwimmerPlan(input, sp, liftDays, cardioDays);\n        programType = \"swimmer\";\n        description = \"Swimming hybrid: technique + strength + endurance\";\n    } else if (sp.isCyclist) {\n        days = buildCyclistPlan(input, sp, liftDays, cardioDays);\n        programType = \"cyclist\";\n        description = \"Cycling hybrid: threshold + endurance + strength\";\n    } else if (input.goal === \"endurance\") {\n        days = buildEndurancePlan(input, liftDays);\n        programType = \"endurance\";\n        description = \"Endurance-focused hybrid: aerobic volume + strength maintenance\";\n    } else {\n        days = buildGeneralPlan(input, liftDays, cardioDays);\n        programType = \"general\";\n        description = \"General hybrid: strength-primary with cardio for conditioning\";\n    }\n    // Apply programming constraints\n    days = enforceConstraints(days);\n    // Compute weekly stats\n    const weeklyCardioMinutes = days.reduce((sum, d)=>sum + (d.cardio?.duration || 0), 0);\n    const weeklyLiftDays = days.filter((d)=>d.hasStrength).length;\n    return {\n        days,\n        weeklyCardioMinutes,\n        weeklyLiftDays,\n        programType,\n        description\n    };\n}\n// ─── Helper: Get Today's Cardio from Weekly Plan ──────────────────────────────\n// Maps JS getDay() (0=Sun) to our Mon-based index\nfunction getTodayCardioFromPlan(plan) {\n    const jsDay = new Date().getDay(); // 0=Sun, 1=Mon … 6=Sat\n    const monBasedIdx = jsDay === 0 ? 6 : jsDay - 1; // 0=Mon … 6=Sun\n    const dayPlan = plan.days.find((d)=>d.dayIndex === monBasedIdx);\n    return dayPlan?.cardio || null;\n}\n// ─── Helper: Format Week Summary for Coach Prompt ─────────────────────────────\nfunction formatHybridWeekForCoach(plan) {\n    const lines = plan.days.map((d)=>{\n        const parts = [];\n        if (d.hasStrength) parts.push(`Lift (${d.strengthLabel})`);\n        if (d.cardio) parts.push(`${d.cardio.title} [${d.cardio.intensity}]`);\n        if (d.isRest && parts.length === 0) parts.push(\"Rest\");\n        return `${d.day}: ${parts.join(\" + \")}`;\n    });\n    return [\n        `Program: ${plan.description}`,\n        `Weekly cardio: ${plan.weeklyCardioMinutes} min | Lift days: ${plan.weeklyLiftDays}`,\n        \"\",\n        ...lines\n    ].join(\"\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1qRixNQUFNLEtBQUssR0FBR2lGLE1BQU1DLElBQUksQ0FBQztRQUMvQyxPQUFPLENBQUMsRUFBRXhDLEVBQUVPLEdBQUcsQ0FBQyxFQUFFLEVBQUVnQyxNQUFNRSxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3pDO0lBRUEsT0FBTztRQUNMLENBQUMsU0FBUyxFQUFFVCxLQUFLTixXQUFXLENBQUMsQ0FBQztRQUM5QixDQUFDLGVBQWUsRUFBRU0sS0FBS0wsbUJBQW1CLENBQUMsa0JBQWtCLEVBQUVLLEtBQUtGLGNBQWMsQ0FBQyxDQUFDO1FBQ3BGO1dBQ0dRO0tBQ0osQ0FBQ0csSUFBSSxDQUFDO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb3JjMy8uL3NyYy9saWIvcHJvZ3JhbS1nZW5lcmF0b3IudHM/YjYwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDilIDilIDilIAgSHlicmlkIEF0aGxldGUgUHJvZ3JhbSBHZW5lcmF0b3Ig4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbi8vIEdlbmVyYXRlcyBzdHJ1Y3R1cmVkIHdlZWtseSBwbGFucyBjb21iaW5pbmcgc3RyZW5ndGggYW5kIGNhcmRpbyBmb3IgaHlicmlkIGF0aGxldGVzLlxyXG5cclxuaW1wb3J0IHsgQ0FSRElPX1RFTVBMQVRFUywgQ2FyZGlvVGVtcGxhdGUgfSBmcm9tIFwiQC9saWIvY2FyZGlvLXRlbXBsYXRlc1wiO1xyXG5cclxuLy8g4pSA4pSA4pSAIFR5cGVzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSYWNlR29hbCB7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIGRhdGU/OiBzdHJpbmc7XHJcbiAgcHJpb3JpdHk/OiBcImFcIiB8IFwiYlwiO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEh5YnJpZFByb2dyYW1JbnB1dCB7XHJcbiAgZ29hbDogc3RyaW5nOyAgICAgICAgICAgICAgIC8vIGZhdF9sb3NzLCBtdXNjbGVfZ2Fpbiwgc3RyZW5ndGgsIGVuZHVyYW5jZSwgZ2VuZXJhbFxyXG4gIGV4cGVyaWVuY2VMZXZlbDogc3RyaW5nOyAgICAvLyBiZWdpbm5lciwgaW50ZXJtZWRpYXRlLCBhZHZhbmNlZFxyXG4gIHRyYWluaW5nRGF5czogbnVtYmVyOyAgICAgICAvLyAy4oCTNiBsaWZ0aW5nIGRheXNcclxuICBzcG9ydD86IHN0cmluZzsgICAgICAgICAgICAgLy8gcnVubmluZywgc3dpbW1pbmcsIG1tYSwgZXRjLlxyXG4gIHJhY2VHb2Fscz86IFJhY2VHb2FsW107ICAgICAvLyB1cGNvbWluZyBldmVudHNcclxuICB0cmFpbmluZ1ZvbHVtZT86IHN0cmluZzsgICAgLy8gYmVnaW5uZXIsIGludGVybWVkaWF0ZSwgYWR2YW5jZWQgKGNhcmRpbyB2b2x1bWUpXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIERheU5hbWUgPSBcIk1vblwiIHwgXCJUdWVcIiB8IFwiV2VkXCIgfCBcIlRodVwiIHwgXCJGcmlcIiB8IFwiU2F0XCIgfCBcIlN1blwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW9Bc3NpZ25tZW50IHtcclxuICB0ZW1wbGF0ZUlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgZHVyYXRpb246IG51bWJlcjtcclxuICBpbnRlbnNpdHk6IFwiZWFzeVwiIHwgXCJtb2RlcmF0ZVwiIHwgXCJoYXJkXCIgfCBcIm1heFwiO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERheVBsYW4ge1xyXG4gIGRheTogRGF5TmFtZTtcclxuICBkYXlJbmRleDogbnVtYmVyOyAgICAgICAgICAvLyAwPU1vbiDigKYgNj1TdW5cclxuICBoYXNTdHJlbmd0aDogYm9vbGVhbjtcclxuICBzdHJlbmd0aExhYmVsPzogc3RyaW5nOyAgICAvLyBlLmcuIFwiVXBwZXJcIiwgXCJQdXNoXCIsIFwiRnVsbCBCb2R5XCJcclxuICBjYXJkaW8/OiBDYXJkaW9Bc3NpZ25tZW50O1xyXG4gIGlzUmVzdDogYm9vbGVhbjtcclxuICBub3RlPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFdlZWtseUh5YnJpZFBsYW4ge1xyXG4gIGRheXM6IERheVBsYW5bXTtcclxuICB3ZWVrbHlDYXJkaW9NaW51dGVzOiBudW1iZXI7XHJcbiAgd2Vla2x5TGlmdERheXM6IG51bWJlcjtcclxuICBwcm9ncmFtVHlwZTogc3RyaW5nOyAgICAgIC8vIFwidHJpYXRobGV0ZVwiLCBcInJ1bm5lclwiLCBcInN3aW1tZXJcIiwgXCJoeWJyaWRcIiwgXCJnZW5lcmFsXCJcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgUmFjZSAvIFNwb3J0IERldGVjdGlvbiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmludGVyZmFjZSBTcG9ydFByb2ZpbGUge1xyXG4gIGlzVHJpYXRobGV0ZTogYm9vbGVhbjtcclxuICBpc1J1bm5lcjogYm9vbGVhbjtcclxuICBpc1N3aW1tZXI6IGJvb2xlYW47XHJcbiAgaXNDeWNsaXN0OiBib29sZWFuO1xyXG4gIGlzT0NSOiBib29sZWFuO1xyXG4gIGlzUG93ZXJsaWZ0ZXI6IGJvb2xlYW47XHJcbiAgcHJpbWFyeVNwb3J0OiBzdHJpbmc7XHJcbiAgd2Vla3NUb1JhY2U6IG51bWJlciB8IG51bGw7XHJcbiAgaW5UYXBlcjogYm9vbGVhbjsgICAgICAgICAgLy8g4omkIDMgd2Vla3Mgb3V0XHJcbiAgcmFjZUFwcHJvYWNoaW5nOiBib29sZWFuOyAgLy8g4omkIDYgd2Vla3Mgb3V0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkU3BvcnRQcm9maWxlKGlucHV0OiBIeWJyaWRQcm9ncmFtSW5wdXQpOiBTcG9ydFByb2ZpbGUge1xyXG4gIGNvbnN0IHsgc3BvcnQsIHJhY2VHb2FscyB9ID0gaW5wdXQ7XHJcbiAgY29uc3QgZ29hbHMgPSByYWNlR29hbHMgfHwgW107XHJcblxyXG4gIGNvbnN0IGlzVHJpYXRobGV0ZSA9XHJcbiAgICBzcG9ydCA9PT0gXCJ0cmlhdGhsb25cIiB8fFxyXG4gICAgZ29hbHMuc29tZShyID0+XHJcbiAgICAgIFtcInNwcmludF90cmlcIiwgXCJvbHltcGljX3RyaVwiLCBcImhhbGZfaXJvbm1hblwiLCBcImZ1bGxfaXJvbm1hblwiXS5pbmNsdWRlcyhyLnR5cGUpXHJcbiAgICApO1xyXG5cclxuICBjb25zdCBpc1J1bm5lciA9XHJcbiAgICBzcG9ydCA9PT0gXCJydW5uaW5nXCIgfHxcclxuICAgIGdvYWxzLnNvbWUociA9PlxyXG4gICAgICBbXCI1a18xMGtcIiwgXCJoYWxmX21hcmF0aG9uXCIsIFwiZnVsbF9tYXJhdGhvblwiXS5pbmNsdWRlcyhyLnR5cGUpXHJcbiAgICApO1xyXG5cclxuICBjb25zdCBpc1N3aW1tZXIgPVxyXG4gICAgc3BvcnQgPT09IFwic3dpbW1pbmdcIiB8fFxyXG4gICAgZ29hbHMuc29tZShyID0+IHIudHlwZSA9PT0gXCJzd2ltX3JhY2VcIik7XHJcblxyXG4gIGNvbnN0IGlzQ3ljbGlzdCA9XHJcbiAgICBzcG9ydCA9PT0gXCJjeWNsaW5nXCIgfHxcclxuICAgIGdvYWxzLnNvbWUociA9PiByLnR5cGUgPT09IFwiY3ljbGluZ19yYWNlXCIpO1xyXG5cclxuICBjb25zdCBpc09DUiA9IGdvYWxzLnNvbWUociA9PiByLnR5cGUgPT09IFwib2NyXCIpO1xyXG4gIGNvbnN0IGlzUG93ZXJsaWZ0ZXIgPSBnb2Fscy5zb21lKHIgPT4gci50eXBlID09PSBcInBvd2VybGlmdGluZ1wiKTtcclxuXHJcbiAgLy8gRGV0ZXJtaW5lIHdlZWtzIHRvIG5lYXJlc3QgcmFjZVxyXG4gIGNvbnN0IHRvZGF5ID0gRGF0ZS5ub3coKTtcclxuICBjb25zdCBkYXRlZEdvYWxzID0gZ29hbHNcclxuICAgIC5maWx0ZXIociA9PiByLmRhdGUpXHJcbiAgICAubWFwKHIgPT4gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZCgobmV3IERhdGUoci5kYXRlISkuZ2V0VGltZSgpIC0gdG9kYXkpIC8gKDg2NDAwMDAwICogNykpKSk7XHJcblxyXG4gIGNvbnN0IHdlZWtzVG9SYWNlID0gZGF0ZWRHb2Fscy5sZW5ndGggPiAwID8gTWF0aC5taW4oLi4uZGF0ZWRHb2FscykgOiBudWxsO1xyXG4gIGNvbnN0IGluVGFwZXIgPSB3ZWVrc1RvUmFjZSAhPT0gbnVsbCAmJiB3ZWVrc1RvUmFjZSA8PSAzO1xyXG4gIGNvbnN0IHJhY2VBcHByb2FjaGluZyA9IHdlZWtzVG9SYWNlICE9PSBudWxsICYmIHdlZWtzVG9SYWNlIDw9IDY7XHJcblxyXG4gIGxldCBwcmltYXJ5U3BvcnQgPSBcImdlbmVyYWxcIjtcclxuICBpZiAoaXNUcmlhdGhsZXRlKSBwcmltYXJ5U3BvcnQgPSBcInRyaWF0aGxldGVcIjtcclxuICBlbHNlIGlmIChpc1J1bm5lcikgcHJpbWFyeVNwb3J0ID0gXCJydW5uZXJcIjtcclxuICBlbHNlIGlmIChpc1N3aW1tZXIpIHByaW1hcnlTcG9ydCA9IFwic3dpbW1lclwiO1xyXG4gIGVsc2UgaWYgKGlzQ3ljbGlzdCkgcHJpbWFyeVNwb3J0ID0gXCJjeWNsaXN0XCI7XHJcbiAgZWxzZSBpZiAoaXNPQ1IpIHByaW1hcnlTcG9ydCA9IFwib2NyXCI7XHJcbiAgZWxzZSBpZiAoc3BvcnQpIHByaW1hcnlTcG9ydCA9IHNwb3J0O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaXNUcmlhdGhsZXRlLFxyXG4gICAgaXNSdW5uZXIsXHJcbiAgICBpc1N3aW1tZXIsXHJcbiAgICBpc0N5Y2xpc3QsXHJcbiAgICBpc09DUixcclxuICAgIGlzUG93ZXJsaWZ0ZXIsXHJcbiAgICBwcmltYXJ5U3BvcnQsXHJcbiAgICB3ZWVrc1RvUmFjZSxcclxuICAgIGluVGFwZXIsXHJcbiAgICByYWNlQXBwcm9hY2hpbmcsXHJcbiAgfTtcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIENhcmRpbyBWb2x1bWUgVGFyZ2V0cyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmZ1bmN0aW9uIGdldENhcmRpb0ZyZXF1ZW5jeShpbnB1dDogSHlicmlkUHJvZ3JhbUlucHV0LCBzcDogU3BvcnRQcm9maWxlKTogbnVtYmVyIHtcclxuICBjb25zdCB2b2wgPSBpbnB1dC50cmFpbmluZ1ZvbHVtZSB8fCBcImludGVybWVkaWF0ZVwiO1xyXG5cclxuICBpZiAoc3AuaXNUcmlhdGhsZXRlKSB7XHJcbiAgICByZXR1cm4gdm9sID09PSBcImFkdmFuY2VkXCIgPyA1IDogdm9sID09PSBcImludGVybWVkaWF0ZVwiID8gNCA6IDM7XHJcbiAgfVxyXG4gIGlmIChzcC5pc1J1bm5lcikge1xyXG4gICAgcmV0dXJuIHZvbCA9PT0gXCJhZHZhbmNlZFwiID8gNSA6IHZvbCA9PT0gXCJpbnRlcm1lZGlhdGVcIiA/IDQgOiAzO1xyXG4gIH1cclxuICBpZiAoc3AuaXNTd2ltbWVyIHx8IHNwLmlzQ3ljbGlzdCkge1xyXG4gICAgcmV0dXJuIHZvbCA9PT0gXCJhZHZhbmNlZFwiID8gNCA6IDM7XHJcbiAgfVxyXG4gIGlmIChpbnB1dC5nb2FsID09PSBcImVuZHVyYW5jZVwiKSB7XHJcbiAgICByZXR1cm4gNDtcclxuICB9XHJcbiAgaWYgKGlucHV0LmdvYWwgPT09IFwiZmF0X2xvc3NcIikge1xyXG4gICAgcmV0dXJuIDM7XHJcbiAgfVxyXG4gIC8vIFN0cmVuZ3RoIC8gbXVzY2xlX2dhaW4gLyBnZW5lcmFsXHJcbiAgcmV0dXJuIDI7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBUZW1wbGF0ZSBMb29rdXAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5mdW5jdGlvbiB0KGlkOiBzdHJpbmcpOiBDYXJkaW9UZW1wbGF0ZSB7XHJcbiAgY29uc3QgZm91bmQgPSBDQVJESU9fVEVNUExBVEVTLmZpbmQoYyA9PiBjLmlkID09PSBpZCk7XHJcbiAgaWYgKCFmb3VuZCkgdGhyb3cgbmV3IEVycm9yKGBDYXJkaW8gdGVtcGxhdGUgbm90IGZvdW5kOiAke2lkfWApO1xyXG4gIHJldHVybiBmb3VuZDtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9Bc3NpZ25tZW50KHRlbXBsYXRlOiBDYXJkaW9UZW1wbGF0ZSk6IENhcmRpb0Fzc2lnbm1lbnQge1xyXG4gIHJldHVybiB7XHJcbiAgICB0ZW1wbGF0ZUlkOiB0ZW1wbGF0ZS5pZCxcclxuICAgIHRpdGxlOiB0ZW1wbGF0ZS50aXRsZSxcclxuICAgIHR5cGU6IHRlbXBsYXRlLnR5cGUsXHJcbiAgICBkdXJhdGlvbjogdGVtcGxhdGUuZHVyYXRpb24sXHJcbiAgICBpbnRlbnNpdHk6IHRlbXBsYXRlLmludGVuc2l0eSxcclxuICB9O1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgUnVsZSBDaGVja3Mg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5mdW5jdGlvbiBjb3VudENvbnNlY3V0aXZlSGFyZChcclxuICBkYXlzOiBEYXlQbGFuW10sXHJcbiAgY3VycmVudElkeDogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgbGV0IGNvdW50ID0gMDtcclxuICBmb3IgKGxldCBpID0gY3VycmVudElkeCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICBjb25zdCBjID0gZGF5c1tpXS5jYXJkaW87XHJcbiAgICBpZiAoYyAmJiAoYy5pbnRlbnNpdHkgPT09IFwiaGFyZFwiIHx8IGMuaW50ZW5zaXR5ID09PSBcIm1heFwiKSkgY291bnQrKztcclxuICAgIGVsc2UgYnJlYWs7XHJcbiAgfVxyXG4gIHJldHVybiBjb3VudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcHJldkRheUhhc0hlYXZ5TGlmdChkYXlzOiBEYXlQbGFuW10sIGN1cnJlbnRJZHg6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIGlmIChjdXJyZW50SWR4ID09PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgY29uc3QgcHJldiA9IGRheXNbY3VycmVudElkeCAtIDFdO1xyXG4gIC8vIExlZ3MgLyBMb3dlciA9IGhlYXZ5OyBVcHBlciAvIFB1c2ggLyBQdWxsID0gbW9kZXJhdGVcclxuICByZXR1cm4gKFxyXG4gICAgcHJldi5oYXNTdHJlbmd0aCAmJlxyXG4gICAgISFwcmV2LnN0cmVuZ3RoTGFiZWwgJiZcclxuICAgIC9sZWdzfGxvd2VyfGZ1bGwvaS50ZXN0KHByZXYuc3RyZW5ndGhMYWJlbClcclxuICApO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgU3RyZW5ndGggRGF5IExheW91dCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmZ1bmN0aW9uIGFzc2lnblN0cmVuZ3RoRGF5cyhcclxuICB0b3RhbERheXM6IG51bWJlcixcclxuICBsaWZ0RGF5czogbnVtYmVyLFxyXG4gIHNwOiBTcG9ydFByb2ZpbGVcclxuKTogKHN0cmluZyB8IG51bGwpW10ge1xyXG4gIC8vIFJldHVybnMgYSA3LWVsZW1lbnQgYXJyYXkgKE1vbuKAk1N1bikgd2l0aCBzdHJlbmd0aCBsYWJlbHMgb3IgbnVsbFxyXG4gIGNvbnN0IHNjaGVkdWxlOiAoc3RyaW5nIHwgbnVsbClbXSA9IEFycmF5KDcpLmZpbGwobnVsbCk7XHJcblxyXG4gIGlmIChsaWZ0RGF5cyA+PSA2KSB7XHJcbiAgICAvLyBQUEwgw5cgMlxyXG4gICAgY29uc3QgbGFiZWxzID0gW1wiUHVzaCBBXCIsIFwiUHVsbCBBXCIsIFwiTGVncyBBXCIsIFwiUHVzaCBCXCIsIFwiUHVsbCBCXCIsIFwiTGVncyBCXCJdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHNjaGVkdWxlW2ldID0gbGFiZWxzW2ldO1xyXG4gIH0gZWxzZSBpZiAobGlmdERheXMgPT09IDUpIHtcclxuICAgIHNjaGVkdWxlWzBdID0gXCJQdXNoXCI7XHJcbiAgICBzY2hlZHVsZVsxXSA9IFwiUHVsbFwiO1xyXG4gICAgc2NoZWR1bGVbMl0gPSBcIkxlZ3NcIjtcclxuICAgIHNjaGVkdWxlWzNdID0gXCJVcHBlclwiO1xyXG4gICAgc2NoZWR1bGVbNF0gPSBcIkZ1bGwgQm9keVwiO1xyXG4gIH0gZWxzZSBpZiAobGlmdERheXMgPT09IDQpIHtcclxuICAgIHNjaGVkdWxlWzBdID0gXCJVcHBlciBBXCI7XHJcbiAgICBzY2hlZHVsZVsyXSA9IFwiTG93ZXIgQVwiO1xyXG4gICAgc2NoZWR1bGVbM10gPSBcIlVwcGVyIEJcIjtcclxuICAgIHNjaGVkdWxlWzVdID0gXCJMb3dlciBCXCI7IC8vIEZyaWRheSBvciBTYXR1cmRheVxyXG4gICAgLy8gQWRqdXN0OiBwcmVmZXIgTW9uL1R1ZS9UaHUvRnJpXHJcbiAgICBjb25zdCBwcmVmZXJyZWQgPSBbMCwgMSwgMywgNF07XHJcbiAgICBjb25zdCBsYWJlbHMgPSBbXCJVcHBlciBBXCIsIFwiTG93ZXIgQVwiLCBcIlVwcGVyIEJcIiwgXCJMb3dlciBCXCJdO1xyXG4gICAgc2NoZWR1bGUuZmlsbChudWxsKTtcclxuICAgIHByZWZlcnJlZC5mb3JFYWNoKChkLCBpKSA9PiB7IHNjaGVkdWxlW2RdID0gbGFiZWxzW2ldOyB9KTtcclxuICB9IGVsc2UgaWYgKGxpZnREYXlzID09PSAzKSB7XHJcbiAgICBzY2hlZHVsZVswXSA9IFwiRnVsbCBCb2R5IEFcIjtcclxuICAgIHNjaGVkdWxlWzJdID0gXCJGdWxsIEJvZHkgQlwiO1xyXG4gICAgc2NoZWR1bGVbNF0gPSBcIkZ1bGwgQm9keSBDXCI7XHJcbiAgfSBlbHNlIGlmIChsaWZ0RGF5cyA9PT0gMikge1xyXG4gICAgc2NoZWR1bGVbMF0gPSBcIlVwcGVyXCI7XHJcbiAgICBzY2hlZHVsZVszXSA9IFwiTG93ZXJcIjtcclxuICB9XHJcblxyXG4gIC8vIEZvciBwb3dlcmxpZnRlcnMga2VlcCBTYXR1cmRheSBmcmVlIGZvciBsb25nIHNlc3Npb25zXHJcbiAgaWYgKHNwLmlzUG93ZXJsaWZ0ZXIgJiYgc2NoZWR1bGVbNV0gPT09IG51bGwpIHtcclxuICAgIC8vIE5vIGFkanVzdG1lbnQgbmVlZGVkXHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2NoZWR1bGU7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBXZWVrbHkgUGxhbiBCdWlsZGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmNvbnN0IERBWV9OQU1FUzogRGF5TmFtZVtdID0gW1wiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCIsIFwiU3VuXCJdO1xyXG5cclxuZnVuY3Rpb24gYnVpbGRUcmlhdGhsZXRlUGxhbihcclxuICBpbnB1dDogSHlicmlkUHJvZ3JhbUlucHV0LFxyXG4gIHNwOiBTcG9ydFByb2ZpbGUsXHJcbiAgbGlmdERheXM6IG51bWJlcixcclxuICBjYXJkaW9EYXlzOiBudW1iZXJcclxuKTogRGF5UGxhbltdIHtcclxuICAvLyBSZWZlcmVuY2U6IE1vbiBMaWZ0K0Vhc3lSdW4sIFR1ZSBTd2ltLCBXZWQgTGlmdCtUZW1wbywgVGh1IEJpa2UsIEZyaSBMaWZ0K0Vhc3lTd2ltLCBTYXQgTG9uZywgU3VuIFJlc3RcclxuICBjb25zdCBzdHJlbmd0aFNjaGVkdWxlID0gYXNzaWduU3RyZW5ndGhEYXlzKDcsIGxpZnREYXlzLCBzcCk7XHJcblxyXG4gIC8vIFRhcGVyOiBzd2FwIGhhcmQgc2Vzc2lvbnMgZm9yIGVhc3lcclxuICBjb25zdCB0YXBlck1vZCA9IHNwLmluVGFwZXI7XHJcblxyXG4gIGNvbnN0IGNhcmRpb01hcDogUmVjb3JkPG51bWJlciwgQ2FyZGlvQXNzaWdubWVudCB8IG51bGw+ID0ge1xyXG4gICAgMDogdG9Bc3NpZ25tZW50KHQoXCJydW4tZWFzeVwiKSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9uOiBlYXN5IHJ1blxyXG4gICAgMTogdG9Bc3NpZ25tZW50KHQoXCJzd2ltLWRyaWxsc1wiKSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUdWU6IHN3aW0gdGVjaG5pcXVlXHJcbiAgICAyOiB0b0Fzc2lnbm1lbnQodGFwZXJNb2QgPyB0KFwicnVuLWVhc3lcIikgOiB0KFwicnVuLXRlbXBvXCIpKSwgICAgLy8gV2VkOiB0ZW1wbyAob3IgZWFzeSBpbiB0YXBlcilcclxuICAgIDM6IHRvQXNzaWdubWVudCh0YXBlck1vZCA/IHQoXCJiaWtlLXJlY292ZXJ5XCIpIDogdChcImJpa2UtZW5kdXJhbmNlXCIpKSwgLy8gVGh1OiBiaWtlXHJcbiAgICA0OiB0b0Fzc2lnbm1lbnQodChcInN3aW0tcHVsbFwiKSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZyaTogc3dpbSBzdHJlbmd0aFxyXG4gICAgNTogdG9Bc3NpZ25tZW50KHRhcGVyTW9kID8gdChcInJ1bi1lYXN5XCIpIDogdChcInJ1bi1sb25nXCIpKSwgICAgLy8gU2F0OiBsb25nIHJ1biAoZWFzeSBpbiB0YXBlcilcclxuICAgIDY6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdW46IHJlc3RcclxuICB9O1xyXG5cclxuICByZXR1cm4gREFZX05BTUVTLm1hcCgoZGF5LCBpKSA9PiAoe1xyXG4gICAgZGF5LFxyXG4gICAgZGF5SW5kZXg6IGksXHJcbiAgICBoYXNTdHJlbmd0aDogISFzdHJlbmd0aFNjaGVkdWxlW2ldLFxyXG4gICAgc3RyZW5ndGhMYWJlbDogc3RyZW5ndGhTY2hlZHVsZVtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBjYXJkaW86IGNhcmRpb01hcFtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBpc1Jlc3Q6IGkgPT09IDYsXHJcbiAgICBub3RlOiBpID09PSA2XHJcbiAgICAgID8gXCJSZXN0ICYgcmVjb3ZlcnlcIlxyXG4gICAgICA6IHRhcGVyTW9kICYmIFszLCA1XS5pbmNsdWRlcyhpKVxyXG4gICAgICA/IFwiVGFwZXIgd2VlayDigJQga2VlcCBpbnRlbnNpdHkgbG93XCJcclxuICAgICAgOiB1bmRlZmluZWQsXHJcbiAgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZFJ1bm5lclBsYW4oXHJcbiAgaW5wdXQ6IEh5YnJpZFByb2dyYW1JbnB1dCxcclxuICBzcDogU3BvcnRQcm9maWxlLFxyXG4gIGxpZnREYXlzOiBudW1iZXIsXHJcbiAgY2FyZGlvRGF5czogbnVtYmVyXHJcbik6IERheVBsYW5bXSB7XHJcbiAgY29uc3Qgc3RyZW5ndGhTY2hlZHVsZSA9IGFzc2lnblN0cmVuZ3RoRGF5cyg3LCBsaWZ0RGF5cywgc3ApO1xyXG4gIGNvbnN0IHRhcGVyTW9kID0gc3AuaW5UYXBlcjtcclxuXHJcbiAgLy8gQXZvaWQgaGFyZCBpbnRlcnZhbHMgdGhlIGRheSBhZnRlciBhIGhlYXZ5IGxpZnQgZGF5XHJcbiAgY29uc3QgY2FyZGlvTWFwOiBSZWNvcmQ8bnVtYmVyLCBDYXJkaW9Bc3NpZ25tZW50IHwgbnVsbD4gPSB7XHJcbiAgICAwOiB0b0Fzc2lnbm1lbnQodChcInJ1bi1lYXN5XCIpKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9uXHJcbiAgICAxOiB0b0Fzc2lnbm1lbnQodGFwZXJNb2QgPyB0KFwicnVuLWVhc3lcIikgOiB0KFwicnVuLTQwMC1pbnRlcnZhbHNcIikpLCAgICAgICAvLyBUdWU6IGludGVydmFsc1xyXG4gICAgMjogdG9Bc3NpZ25tZW50KHQoXCJydW4tZWFzeVwiKSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlZFxyXG4gICAgMzogdG9Bc3NpZ25tZW50KHRhcGVyTW9kID8gdChcInJ1bi1lYXN5XCIpIDogdChcInJ1bi10ZW1wb1wiKSksICAgICAgICAgICAgICAgLy8gVGh1OiB0ZW1wb1xyXG4gICAgNDogdG9Bc3NpZ25tZW50KHQoXCJydW4tZWFzeVwiKSksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZyaTogcmVjb3ZlcnkgcnVuXHJcbiAgICA1OiB0b0Fzc2lnbm1lbnQodGFwZXJNb2QgPyB0KFwicnVuLWVhc3lcIikgOiB0KFwicnVuLWxvbmdcIikpLCAgICAgICAgICAgICAgIC8vIFNhdDogbG9uZyBydW5cclxuICAgIDY6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1bjogcmVzdFxyXG4gIH07XHJcblxyXG4gIGlmIChjYXJkaW9EYXlzIDwgNSkgZGVsZXRlIGNhcmRpb01hcFs0XTsgLy8gUmVtb3ZlIEZyaWRheSBlYXN5IHJ1blxyXG4gIGlmIChjYXJkaW9EYXlzIDwgNCkgZGVsZXRlIGNhcmRpb01hcFsyXTsgLy8gUmVtb3ZlIFdlZG5lc2RheSBlYXN5IHJ1blxyXG5cclxuICByZXR1cm4gREFZX05BTUVTLm1hcCgoZGF5LCBpKSA9PiAoe1xyXG4gICAgZGF5LFxyXG4gICAgZGF5SW5kZXg6IGksXHJcbiAgICBoYXNTdHJlbmd0aDogISFzdHJlbmd0aFNjaGVkdWxlW2ldLFxyXG4gICAgc3RyZW5ndGhMYWJlbDogc3RyZW5ndGhTY2hlZHVsZVtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBjYXJkaW86IGNhcmRpb01hcFtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBpc1Jlc3Q6IGkgPT09IDYgJiYgIWNhcmRpb01hcFs2XSxcclxuICAgIG5vdGU6IHNwLnJhY2VBcHByb2FjaGluZyAmJiBpID09PSA1ID8gXCJLZXkgbG9uZyBydW4g4oCUIHJhY2Ugc2ltdWxhdGlvbiBwYWNlXCIgOiB1bmRlZmluZWQsXHJcbiAgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZFN3aW1tZXJQbGFuKFxyXG4gIGlucHV0OiBIeWJyaWRQcm9ncmFtSW5wdXQsXHJcbiAgc3A6IFNwb3J0UHJvZmlsZSxcclxuICBsaWZ0RGF5czogbnVtYmVyLFxyXG4gIGNhcmRpb0RheXM6IG51bWJlclxyXG4pOiBEYXlQbGFuW10ge1xyXG4gIGNvbnN0IHN0cmVuZ3RoU2NoZWR1bGUgPSBhc3NpZ25TdHJlbmd0aERheXMoNywgbGlmdERheXMsIHNwKTtcclxuICBjb25zdCB0YXBlck1vZCA9IHNwLmluVGFwZXI7XHJcblxyXG4gIGNvbnN0IGNhcmRpb01hcDogUmVjb3JkPG51bWJlciwgQ2FyZGlvQXNzaWdubWVudCB8IG51bGw+ID0ge1xyXG4gICAgMDogdG9Bc3NpZ25tZW50KHQoXCJzd2ltLWRyaWxsc1wiKSksXHJcbiAgICAxOiBudWxsLFxyXG4gICAgMjogdG9Bc3NpZ25tZW50KHRhcGVyTW9kID8gdChcInN3aW0tZW5kdXJhbmNlXCIpIDogdChcInN3aW0tcHVsbFwiKSksXHJcbiAgICAzOiB0b0Fzc2lnbm1lbnQodGFwZXJNb2QgPyB0KFwic3dpbS1kcmlsbHNcIikgOiB0KFwic3dpbS1zcHJpbnRzXCIpKSxcclxuICAgIDQ6IHRvQXNzaWdubWVudCh0KFwic3dpbS1raWNrXCIpKSxcclxuICAgIDU6IHRvQXNzaWdubWVudCh0KFwic3dpbS1lbmR1cmFuY2VcIikpLFxyXG4gICAgNjogbnVsbCxcclxuICB9O1xyXG5cclxuICBpZiAoY2FyZGlvRGF5cyA8IDQpIGRlbGV0ZSBjYXJkaW9NYXBbNF07XHJcblxyXG4gIHJldHVybiBEQVlfTkFNRVMubWFwKChkYXksIGkpID0+ICh7XHJcbiAgICBkYXksXHJcbiAgICBkYXlJbmRleDogaSxcclxuICAgIGhhc1N0cmVuZ3RoOiAhIXN0cmVuZ3RoU2NoZWR1bGVbaV0sXHJcbiAgICBzdHJlbmd0aExhYmVsOiBzdHJlbmd0aFNjaGVkdWxlW2ldIHx8IHVuZGVmaW5lZCxcclxuICAgIGNhcmRpbzogY2FyZGlvTWFwW2ldIHx8IHVuZGVmaW5lZCxcclxuICAgIGlzUmVzdDogIWNhcmRpb01hcFtpXSAmJiAhc3RyZW5ndGhTY2hlZHVsZVtpXSxcclxuICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkQ3ljbGlzdFBsYW4oXHJcbiAgaW5wdXQ6IEh5YnJpZFByb2dyYW1JbnB1dCxcclxuICBzcDogU3BvcnRQcm9maWxlLFxyXG4gIGxpZnREYXlzOiBudW1iZXIsXHJcbiAgY2FyZGlvRGF5czogbnVtYmVyXHJcbik6IERheVBsYW5bXSB7XHJcbiAgY29uc3Qgc3RyZW5ndGhTY2hlZHVsZSA9IGFzc2lnblN0cmVuZ3RoRGF5cyg3LCBsaWZ0RGF5cywgc3ApO1xyXG4gIGNvbnN0IHRhcGVyTW9kID0gc3AuaW5UYXBlcjtcclxuXHJcbiAgY29uc3QgY2FyZGlvTWFwOiBSZWNvcmQ8bnVtYmVyLCBDYXJkaW9Bc3NpZ25tZW50IHwgbnVsbD4gPSB7XHJcbiAgICAwOiB0b0Fzc2lnbm1lbnQodChcImJpa2UtcmVjb3ZlcnlcIikpLFxyXG4gICAgMTogbnVsbCxcclxuICAgIDI6IHRvQXNzaWdubWVudCh0YXBlck1vZCA/IHQoXCJiaWtlLXJlY292ZXJ5XCIpIDogdChcImJpa2UtdGhyZXNob2xkXCIpKSxcclxuICAgIDM6IHRvQXNzaWdubWVudCh0KFwiYmlrZS1lbmR1cmFuY2VcIikpLFxyXG4gICAgNDogbnVsbCxcclxuICAgIDU6IHRvQXNzaWdubWVudCh0YXBlck1vZCA/IHQoXCJiaWtlLWVuZHVyYW5jZVwiKSA6IHQoXCJiaWtlLWVuZHVyYW5jZVwiKSksIC8vIExvbmcgcmlkZVxyXG4gICAgNjogbnVsbCxcclxuICB9O1xyXG5cclxuICByZXR1cm4gREFZX05BTUVTLm1hcCgoZGF5LCBpKSA9PiAoe1xyXG4gICAgZGF5LFxyXG4gICAgZGF5SW5kZXg6IGksXHJcbiAgICBoYXNTdHJlbmd0aDogISFzdHJlbmd0aFNjaGVkdWxlW2ldLFxyXG4gICAgc3RyZW5ndGhMYWJlbDogc3RyZW5ndGhTY2hlZHVsZVtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBjYXJkaW86IGNhcmRpb01hcFtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBpc1Jlc3Q6ICFjYXJkaW9NYXBbaV0gJiYgIXN0cmVuZ3RoU2NoZWR1bGVbaV0sXHJcbiAgICBub3RlOiBpID09PSA1ID8gXCJMb25nIHJpZGUg4oCUIGFpbSBmb3IgNjDigJM5MCBtaW5cIiA6IHVuZGVmaW5lZCxcclxuICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkRW5kdXJhbmNlUGxhbihcclxuICBpbnB1dDogSHlicmlkUHJvZ3JhbUlucHV0LFxyXG4gIGxpZnREYXlzOiBudW1iZXJcclxuKTogRGF5UGxhbltdIHtcclxuICBjb25zdCBzdHJlbmd0aFNjaGVkdWxlID0gYXNzaWduU3RyZW5ndGhEYXlzKDcsIGxpZnREYXlzLCB7IGlzVHJpYXRobGV0ZTogZmFsc2UgfSBhcyBTcG9ydFByb2ZpbGUpO1xyXG5cclxuICBjb25zdCBjYXJkaW9NYXA6IFJlY29yZDxudW1iZXIsIENhcmRpb0Fzc2lnbm1lbnQgfCBudWxsPiA9IHtcclxuICAgIDA6IHRvQXNzaWdubWVudCh0KFwicnVuLWVhc3lcIikpLFxyXG4gICAgMTogbnVsbCxcclxuICAgIDI6IHRvQXNzaWdubWVudCh0KFwicnVuLTgwMC1yZXBlYXRzXCIpKSxcclxuICAgIDM6IHRvQXNzaWdubWVudCh0KFwiYmlrZS1lbmR1cmFuY2VcIikpLFxyXG4gICAgNDogbnVsbCxcclxuICAgIDU6IHRvQXNzaWdubWVudCh0KFwicnVuLWxvbmdcIikpLFxyXG4gICAgNjogdG9Bc3NpZ25tZW50KHQoXCJiaWtlLXJlY292ZXJ5XCIpKSxcclxuICB9O1xyXG5cclxuICByZXR1cm4gREFZX05BTUVTLm1hcCgoZGF5LCBpKSA9PiAoe1xyXG4gICAgZGF5LFxyXG4gICAgZGF5SW5kZXg6IGksXHJcbiAgICBoYXNTdHJlbmd0aDogISFzdHJlbmd0aFNjaGVkdWxlW2ldLFxyXG4gICAgc3RyZW5ndGhMYWJlbDogc3RyZW5ndGhTY2hlZHVsZVtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBjYXJkaW86IGNhcmRpb01hcFtpXSB8fCB1bmRlZmluZWQsXHJcbiAgICBpc1Jlc3Q6ICFjYXJkaW9NYXBbaV0gJiYgIXN0cmVuZ3RoU2NoZWR1bGVbaV0sXHJcbiAgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZEdlbmVyYWxQbGFuKFxyXG4gIGlucHV0OiBIeWJyaWRQcm9ncmFtSW5wdXQsXHJcbiAgbGlmdERheXM6IG51bWJlcixcclxuICBjYXJkaW9EYXlzOiBudW1iZXJcclxuKTogRGF5UGxhbltdIHtcclxuICBjb25zdCBzdHJlbmd0aFNjaGVkdWxlID0gYXNzaWduU3RyZW5ndGhEYXlzKDcsIGxpZnREYXlzLCB7fSBhcyBTcG9ydFByb2ZpbGUpO1xyXG5cclxuICAvLyBHZW5lcmFsIGNhcmRpbzogbWl4IG9mIGZvcm1hdHMsIG5vdGhpbmcgdG9vIHNwb3J0LXNwZWNpZmljXHJcbiAgY29uc3QgZ2VuZXJhbENhcmRpbzogQ2FyZGlvQXNzaWdubWVudFtdID0gW1xyXG4gICAgdG9Bc3NpZ25tZW50KHQoXCJydW4tZmFydGxla1wiKSksXHJcbiAgICB0b0Fzc2lnbm1lbnQodChcImhpaXQtanVtcC1yb3BlLXRhYmF0YVwiKSksXHJcbiAgICB0b0Fzc2lnbm1lbnQodChcInJvdy1zdGVhZHktc3RhdGVcIikpLFxyXG4gICAgdG9Bc3NpZ25tZW50KHQoXCJiaWtlLXJlY292ZXJ5XCIpKSxcclxuICAgIHRvQXNzaWdubWVudCh0KFwicnVuLWVhc3lcIikpLFxyXG4gIF07XHJcblxyXG4gIGNvbnN0IGRheXM6IERheVBsYW5bXSA9IERBWV9OQU1FUy5tYXAoKGRheSwgaSkgPT4gKHtcclxuICAgIGRheSxcclxuICAgIGRheUluZGV4OiBpLFxyXG4gICAgaGFzU3RyZW5ndGg6ICEhc3RyZW5ndGhTY2hlZHVsZVtpXSxcclxuICAgIHN0cmVuZ3RoTGFiZWw6IHN0cmVuZ3RoU2NoZWR1bGVbaV0gfHwgdW5kZWZpbmVkLFxyXG4gICAgY2FyZGlvOiB1bmRlZmluZWQsXHJcbiAgICBpc1Jlc3Q6IGZhbHNlLFxyXG4gIH0pKTtcclxuXHJcbiAgLy8gQXNzaWduIGNhcmRpbyB0byBub24tbGlmdGluZyBkYXlzIGZpcnN0LCB0aGVuIGZpbGwgcmVtYWluaW5nIHNsb3RzXHJcbiAgbGV0IGNhcmRpb0Fzc2lnbmVkID0gMDtcclxuICBjb25zdCBjYXJkaW9Qb29sID0gWy4uLmdlbmVyYWxDYXJkaW9dO1xyXG5cclxuICAvLyBBcHBseSBydWxlOiBlYXN5IGNhcmRpbyBvbiBkYXkgYWZ0ZXIgaGVhdnkgbGlmdFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNyAmJiBjYXJkaW9Bc3NpZ25lZCA8IGNhcmRpb0RheXM7IGkrKykge1xyXG4gICAgaWYgKGRheXNbaV0uaGFzU3RyZW5ndGgpIGNvbnRpbnVlOyAvLyBObyBzdGFuZGFsb25lIGNhcmRpbyBvbiBwdXJlIGxpZnQgZGF5cyBmb3IgZ2VuZXJhbCB1c2Vyc1xyXG4gICAgaWYgKGkgPT09IDYpIGNvbnRpbnVlOyAvLyBLZWVwIFN1bmRheSBhcyByZXN0IGZvciBnZW5lcmFsIHVzZXJzXHJcblxyXG4gICAgY29uc3QgdXNlRWFzeSA9IHByZXZEYXlIYXNIZWF2eUxpZnQoZGF5cywgaSk7XHJcbiAgICBpZiAodXNlRWFzeSkge1xyXG4gICAgICBkYXlzW2ldLmNhcmRpbyA9IHRvQXNzaWdubWVudCh0KFwiYmlrZS1yZWNvdmVyeVwiKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYXlzW2ldLmNhcmRpbyA9IGNhcmRpb1Bvb2xbY2FyZGlvQXNzaWduZWQgJSBjYXJkaW9Qb29sLmxlbmd0aF07XHJcbiAgICB9XHJcbiAgICBjYXJkaW9Bc3NpZ25lZCsrO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFyayBwdXJlIHJlc3QgZGF5c1xyXG4gIGRheXMuZm9yRWFjaChkID0+IHtcclxuICAgIGQuaXNSZXN0ID0gIWQuaGFzU3RyZW5ndGggJiYgIWQuY2FyZGlvO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gZGF5cztcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIENvbnN0cmFpbnQgRW5mb3JjZW1lbnQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5mdW5jdGlvbiBlbmZvcmNlQ29uc3RyYWludHMoZGF5czogRGF5UGxhbltdKTogRGF5UGxhbltdIHtcclxuICAvLyBSdWxlOiBubyBtb3JlIHRoYW4gMiBoYXJkIGNhcmRpbyBkYXlzIGJhY2stdG8tYmFja1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGF5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgYyA9IGRheXNbaV0uY2FyZGlvO1xyXG4gICAgaWYgKCFjKSBjb250aW51ZTtcclxuICAgIGlmIChjb3VudENvbnNlY3V0aXZlSGFyZChkYXlzLCBpKSA+PSAyICYmIChjLmludGVuc2l0eSA9PT0gXCJoYXJkXCIgfHwgYy5pbnRlbnNpdHkgPT09IFwibWF4XCIpKSB7XHJcbiAgICAgIC8vIERvd25ncmFkZSB0byBlYXN5IGVxdWl2YWxlbnRcclxuICAgICAgY29uc3QgZWFzeVRlbXBsYXRlID0gQ0FSRElPX1RFTVBMQVRFUy5maW5kKHQgPT5cclxuICAgICAgICB0LnR5cGUgPT09IGMudHlwZSAmJiB0LmludGVuc2l0eSA9PT0gXCJlYXN5XCJcclxuICAgICAgKSB8fCBDQVJESU9fVEVNUExBVEVTLmZpbmQodCA9PiB0LmludGVuc2l0eSA9PT0gXCJlYXN5XCIpO1xyXG4gICAgICBpZiAoZWFzeVRlbXBsYXRlKSB7XHJcbiAgICAgICAgZGF5c1tpXS5jYXJkaW8gPSB0b0Fzc2lnbm1lbnQoZWFzeVRlbXBsYXRlKTtcclxuICAgICAgICBkYXlzW2ldLm5vdGUgPSAoZGF5c1tpXS5ub3RlID8gZGF5c1tpXS5ub3RlICsgXCIgwrcgXCIgOiBcIlwiKSArIFwiSW50ZW5zaXR5IHJlZHVjZWQg4oCUIHJlY292ZXJ5IGRheVwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUnVsZTogZWFzeSBjYXJkaW8gb24gZGF5IGFmdGVyIGhlYXZ5IGxpZnRpbmcgc2Vzc2lvblxyXG4gICAgaWYgKHByZXZEYXlIYXNIZWF2eUxpZnQoZGF5cywgaSkgJiYgYy5pbnRlbnNpdHkgPT09IFwiaGFyZFwiKSB7XHJcbiAgICAgIGNvbnN0IGVhc3lUZW1wbGF0ZSA9IENBUkRJT19URU1QTEFURVMuZmluZCh0ID0+XHJcbiAgICAgICAgdC50eXBlID09PSBjLnR5cGUgJiYgdC5pbnRlbnNpdHkgPT09IFwiZWFzeVwiXHJcbiAgICAgICkgfHwgdChcImJpa2UtcmVjb3ZlcnlcIik7XHJcbiAgICAgIGRheXNbaV0uY2FyZGlvID0gdG9Bc3NpZ25tZW50KGVhc3lUZW1wbGF0ZSk7XHJcbiAgICAgIGRheXNbaV0ubm90ZSA9IChkYXlzW2ldLm5vdGUgPyBkYXlzW2ldLm5vdGUgKyBcIiDCtyBcIiA6IFwiXCIpICsgXCJFYXN5IGNhcmRpbyDigJQgcmVjb3ZlcnkgYWZ0ZXIgaGVhdnkgbGlmdFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRheXM7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBNYWluIEV4cG9ydCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUh5YnJpZFdlZWsoaW5wdXQ6IEh5YnJpZFByb2dyYW1JbnB1dCk6IFdlZWtseUh5YnJpZFBsYW4ge1xyXG4gIGNvbnN0IHNwID0gYnVpbGRTcG9ydFByb2ZpbGUoaW5wdXQpO1xyXG4gIGNvbnN0IGxpZnREYXlzID0gTWF0aC5taW4oaW5wdXQudHJhaW5pbmdEYXlzLCA1KTtcclxuICBjb25zdCBjYXJkaW9EYXlzID0gZ2V0Q2FyZGlvRnJlcXVlbmN5KGlucHV0LCBzcCk7XHJcblxyXG4gIGxldCBkYXlzOiBEYXlQbGFuW107XHJcbiAgbGV0IHByb2dyYW1UeXBlOiBzdHJpbmc7XHJcbiAgbGV0IGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcblxyXG4gIGlmIChzcC5pc1RyaWF0aGxldGUpIHtcclxuICAgIGRheXMgPSBidWlsZFRyaWF0aGxldGVQbGFuKGlucHV0LCBzcCwgbGlmdERheXMsIGNhcmRpb0RheXMpO1xyXG4gICAgcHJvZ3JhbVR5cGUgPSBcInRyaWF0aGxldGVcIjtcclxuICAgIGRlc2NyaXB0aW9uID0gc3AuaW5UYXBlclxyXG4gICAgICA/IFwiVGFwZXIgd2VlayDigJQgcmVkdWNpbmcgdm9sdW1lIGFoZWFkIG9mIHJhY2VcIlxyXG4gICAgICA6IFwiVHJpYXRobG9uIGh5YnJpZDogc3dpbSwgYmlrZSwgcnVuICsgc3RyZW5ndGhcIjtcclxuICB9IGVsc2UgaWYgKHNwLmlzUnVubmVyKSB7XHJcbiAgICBkYXlzID0gYnVpbGRSdW5uZXJQbGFuKGlucHV0LCBzcCwgbGlmdERheXMsIGNhcmRpb0RheXMpO1xyXG4gICAgcHJvZ3JhbVR5cGUgPSBcInJ1bm5lclwiO1xyXG4gICAgZGVzY3JpcHRpb24gPSBzcC5yYWNlQXBwcm9hY2hpbmdcclxuICAgICAgPyBcIlJhY2Utc3BlY2lmaWMgcnVuIGJ1aWxkICsgc3RyZW5ndGggc3VwcG9ydFwiXHJcbiAgICAgIDogXCJSdW5uaW5nIGh5YnJpZDogYWVyb2JpYyBiYXNlICsgc3BlZWQgd29yayArIHN0cmVuZ3RoXCI7XHJcbiAgfSBlbHNlIGlmIChzcC5pc1N3aW1tZXIpIHtcclxuICAgIGRheXMgPSBidWlsZFN3aW1tZXJQbGFuKGlucHV0LCBzcCwgbGlmdERheXMsIGNhcmRpb0RheXMpO1xyXG4gICAgcHJvZ3JhbVR5cGUgPSBcInN3aW1tZXJcIjtcclxuICAgIGRlc2NyaXB0aW9uID0gXCJTd2ltbWluZyBoeWJyaWQ6IHRlY2huaXF1ZSArIHN0cmVuZ3RoICsgZW5kdXJhbmNlXCI7XHJcbiAgfSBlbHNlIGlmIChzcC5pc0N5Y2xpc3QpIHtcclxuICAgIGRheXMgPSBidWlsZEN5Y2xpc3RQbGFuKGlucHV0LCBzcCwgbGlmdERheXMsIGNhcmRpb0RheXMpO1xyXG4gICAgcHJvZ3JhbVR5cGUgPSBcImN5Y2xpc3RcIjtcclxuICAgIGRlc2NyaXB0aW9uID0gXCJDeWNsaW5nIGh5YnJpZDogdGhyZXNob2xkICsgZW5kdXJhbmNlICsgc3RyZW5ndGhcIjtcclxuICB9IGVsc2UgaWYgKGlucHV0LmdvYWwgPT09IFwiZW5kdXJhbmNlXCIpIHtcclxuICAgIGRheXMgPSBidWlsZEVuZHVyYW5jZVBsYW4oaW5wdXQsIGxpZnREYXlzKTtcclxuICAgIHByb2dyYW1UeXBlID0gXCJlbmR1cmFuY2VcIjtcclxuICAgIGRlc2NyaXB0aW9uID0gXCJFbmR1cmFuY2UtZm9jdXNlZCBoeWJyaWQ6IGFlcm9iaWMgdm9sdW1lICsgc3RyZW5ndGggbWFpbnRlbmFuY2VcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgZGF5cyA9IGJ1aWxkR2VuZXJhbFBsYW4oaW5wdXQsIGxpZnREYXlzLCBjYXJkaW9EYXlzKTtcclxuICAgIHByb2dyYW1UeXBlID0gXCJnZW5lcmFsXCI7XHJcbiAgICBkZXNjcmlwdGlvbiA9IFwiR2VuZXJhbCBoeWJyaWQ6IHN0cmVuZ3RoLXByaW1hcnkgd2l0aCBjYXJkaW8gZm9yIGNvbmRpdGlvbmluZ1wiO1xyXG4gIH1cclxuXHJcbiAgLy8gQXBwbHkgcHJvZ3JhbW1pbmcgY29uc3RyYWludHNcclxuICBkYXlzID0gZW5mb3JjZUNvbnN0cmFpbnRzKGRheXMpO1xyXG5cclxuICAvLyBDb21wdXRlIHdlZWtseSBzdGF0c1xyXG4gIGNvbnN0IHdlZWtseUNhcmRpb01pbnV0ZXMgPSBkYXlzLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyAoZC5jYXJkaW8/LmR1cmF0aW9uIHx8IDApLCAwKTtcclxuICBjb25zdCB3ZWVrbHlMaWZ0RGF5cyA9IGRheXMuZmlsdGVyKGQgPT4gZC5oYXNTdHJlbmd0aCkubGVuZ3RoO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZGF5cyxcclxuICAgIHdlZWtseUNhcmRpb01pbnV0ZXMsXHJcbiAgICB3ZWVrbHlMaWZ0RGF5cyxcclxuICAgIHByb2dyYW1UeXBlLFxyXG4gICAgZGVzY3JpcHRpb24sXHJcbiAgfTtcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIEhlbHBlcjogR2V0IFRvZGF5J3MgQ2FyZGlvIGZyb20gV2Vla2x5IFBsYW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbi8vIE1hcHMgSlMgZ2V0RGF5KCkgKDA9U3VuKSB0byBvdXIgTW9uLWJhc2VkIGluZGV4XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9kYXlDYXJkaW9Gcm9tUGxhbihwbGFuOiBXZWVrbHlIeWJyaWRQbGFuKTogQ2FyZGlvQXNzaWdubWVudCB8IG51bGwge1xyXG4gIGNvbnN0IGpzRGF5ID0gbmV3IERhdGUoKS5nZXREYXkoKTsgLy8gMD1TdW4sIDE9TW9uIOKApiA2PVNhdFxyXG4gIGNvbnN0IG1vbkJhc2VkSWR4ID0ganNEYXkgPT09IDAgPyA2IDoganNEYXkgLSAxOyAvLyAwPU1vbiDigKYgNj1TdW5cclxuICBjb25zdCBkYXlQbGFuID0gcGxhbi5kYXlzLmZpbmQoZCA9PiBkLmRheUluZGV4ID09PSBtb25CYXNlZElkeCk7XHJcbiAgcmV0dXJuIGRheVBsYW4/LmNhcmRpbyB8fCBudWxsO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgSGVscGVyOiBGb3JtYXQgV2VlayBTdW1tYXJ5IGZvciBDb2FjaCBQcm9tcHQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0SHlicmlkV2Vla0ZvckNvYWNoKHBsYW46IFdlZWtseUh5YnJpZFBsYW4pOiBzdHJpbmcge1xyXG4gIGNvbnN0IGxpbmVzID0gcGxhbi5kYXlzLm1hcChkID0+IHtcclxuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgaWYgKGQuaGFzU3RyZW5ndGgpIHBhcnRzLnB1c2goYExpZnQgKCR7ZC5zdHJlbmd0aExhYmVsfSlgKTtcclxuICAgIGlmIChkLmNhcmRpbykgcGFydHMucHVzaChgJHtkLmNhcmRpby50aXRsZX0gWyR7ZC5jYXJkaW8uaW50ZW5zaXR5fV1gKTtcclxuICAgIGlmIChkLmlzUmVzdCAmJiBwYXJ0cy5sZW5ndGggPT09IDApIHBhcnRzLnB1c2goXCJSZXN0XCIpO1xyXG4gICAgcmV0dXJuIGAke2QuZGF5fTogJHtwYXJ0cy5qb2luKFwiICsgXCIpfWA7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBgUHJvZ3JhbTogJHtwbGFuLmRlc2NyaXB0aW9ufWAsXHJcbiAgICBgV2Vla2x5IGNhcmRpbzogJHtwbGFuLndlZWtseUNhcmRpb01pbnV0ZXN9IG1pbiB8IExpZnQgZGF5czogJHtwbGFuLndlZWtseUxpZnREYXlzfWAsXHJcbiAgICBcIlwiLFxyXG4gICAgLi4ubGluZXMsXHJcbiAgXS5qb2luKFwiXFxuXCIpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJDQVJESU9fVEVNUExBVEVTIiwiYnVpbGRTcG9ydFByb2ZpbGUiLCJpbnB1dCIsInNwb3J0IiwicmFjZUdvYWxzIiwiZ29hbHMiLCJpc1RyaWF0aGxldGUiLCJzb21lIiwiciIsImluY2x1ZGVzIiwidHlwZSIsImlzUnVubmVyIiwiaXNTd2ltbWVyIiwiaXNDeWNsaXN0IiwiaXNPQ1IiLCJpc1Bvd2VybGlmdGVyIiwidG9kYXkiLCJEYXRlIiwibm93IiwiZGF0ZWRHb2FscyIsImZpbHRlciIsImRhdGUiLCJtYXAiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJnZXRUaW1lIiwid2Vla3NUb1JhY2UiLCJsZW5ndGgiLCJtaW4iLCJpblRhcGVyIiwicmFjZUFwcHJvYWNoaW5nIiwicHJpbWFyeVNwb3J0IiwiZ2V0Q2FyZGlvRnJlcXVlbmN5Iiwic3AiLCJ2b2wiLCJ0cmFpbmluZ1ZvbHVtZSIsImdvYWwiLCJ0IiwiaWQiLCJmb3VuZCIsImZpbmQiLCJjIiwiRXJyb3IiLCJ0b0Fzc2lnbm1lbnQiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlSWQiLCJ0aXRsZSIsImR1cmF0aW9uIiwiaW50ZW5zaXR5IiwiY291bnRDb25zZWN1dGl2ZUhhcmQiLCJkYXlzIiwiY3VycmVudElkeCIsImNvdW50IiwiaSIsImNhcmRpbyIsInByZXZEYXlIYXNIZWF2eUxpZnQiLCJwcmV2IiwiaGFzU3RyZW5ndGgiLCJzdHJlbmd0aExhYmVsIiwidGVzdCIsImFzc2lnblN0cmVuZ3RoRGF5cyIsInRvdGFsRGF5cyIsImxpZnREYXlzIiwic2NoZWR1bGUiLCJBcnJheSIsImZpbGwiLCJsYWJlbHMiLCJwcmVmZXJyZWQiLCJmb3JFYWNoIiwiZCIsIkRBWV9OQU1FUyIsImJ1aWxkVHJpYXRobGV0ZVBsYW4iLCJjYXJkaW9EYXlzIiwic3RyZW5ndGhTY2hlZHVsZSIsInRhcGVyTW9kIiwiY2FyZGlvTWFwIiwiZGF5IiwiZGF5SW5kZXgiLCJ1bmRlZmluZWQiLCJpc1Jlc3QiLCJub3RlIiwiYnVpbGRSdW5uZXJQbGFuIiwiYnVpbGRTd2ltbWVyUGxhbiIsImJ1aWxkQ3ljbGlzdFBsYW4iLCJidWlsZEVuZHVyYW5jZVBsYW4iLCJidWlsZEdlbmVyYWxQbGFuIiwiZ2VuZXJhbENhcmRpbyIsImNhcmRpb0Fzc2lnbmVkIiwiY2FyZGlvUG9vbCIsInVzZUVhc3kiLCJlbmZvcmNlQ29uc3RyYWludHMiLCJlYXN5VGVtcGxhdGUiLCJnZW5lcmF0ZUh5YnJpZFdlZWsiLCJ0cmFpbmluZ0RheXMiLCJwcm9ncmFtVHlwZSIsImRlc2NyaXB0aW9uIiwid2Vla2x5Q2FyZGlvTWludXRlcyIsInJlZHVjZSIsInN1bSIsIndlZWtseUxpZnREYXlzIiwiZ2V0VG9kYXlDYXJkaW9Gcm9tUGxhbiIsInBsYW4iLCJqc0RheSIsImdldERheSIsIm1vbkJhc2VkSWR4IiwiZGF5UGxhbiIsImZvcm1hdEh5YnJpZFdlZWtGb3JDb2FjaCIsImxpbmVzIiwicGFydHMiLCJwdXNoIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/program-generator.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/session.ts":
/*!****************************!*\
  !*** ./src/lib/session.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getCurrentUserId: () => (/* binding */ getCurrentUserId),\n/* harmony export */   hasCompletedOnboarding: () => (/* binding */ hasCompletedOnboarding),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\nasync function getCurrentUser() {\n    const session = await (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getSession)();\n    if (!session?.userId) return null;\n    const user = await _prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n        where: {\n            id: session.userId\n        },\n        include: {\n            profile: true,\n            subscription: true,\n            streak: true\n        }\n    });\n    return user;\n}\nasync function getCurrentUserId() {\n    const session = await (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getSession)();\n    return session?.userId ?? null;\n}\nasync function requireAuth() {\n    const userId = await getCurrentUserId();\n    if (!userId) {\n        throw new Error(\"UNAUTHORIZED\");\n    }\n    return userId;\n}\nasync function hasCompletedOnboarding() {\n    const session = await (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getSession)();\n    return session?.onboardingDone ?? false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Nlc3Npb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ0Y7QUFFM0IsZUFBZUU7SUFDcEIsTUFBTUMsVUFBVSxNQUFNSCxpREFBVUE7SUFDaEMsSUFBSSxDQUFDRyxTQUFTQyxRQUFRLE9BQU87SUFFN0IsTUFBTUMsT0FBTyxNQUFNSiwyQ0FBTUEsQ0FBQ0ksSUFBSSxDQUFDQyxVQUFVLENBQUM7UUFDeENDLE9BQU87WUFBRUMsSUFBSUwsUUFBUUMsTUFBTTtRQUFDO1FBQzVCSyxTQUFTO1lBQ1BDLFNBQVM7WUFDVEMsY0FBYztZQUNkQyxRQUFRO1FBQ1Y7SUFDRjtJQUVBLE9BQU9QO0FBQ1Q7QUFFTyxlQUFlUTtJQUNwQixNQUFNVixVQUFVLE1BQU1ILGlEQUFVQTtJQUNoQyxPQUFPRyxTQUFTQyxVQUFVO0FBQzVCO0FBRU8sZUFBZVU7SUFDcEIsTUFBTVYsU0FBUyxNQUFNUztJQUNyQixJQUFJLENBQUNULFFBQVE7UUFDWCxNQUFNLElBQUlXLE1BQU07SUFDbEI7SUFDQSxPQUFPWDtBQUNUO0FBRU8sZUFBZVk7SUFDcEIsTUFBTWIsVUFBVSxNQUFNSCxpREFBVUE7SUFDaEMsT0FBT0csU0FBU2Msa0JBQWtCO0FBQ3BDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9yYzMvLi9zcmMvbGliL3Nlc3Npb24udHM/OGRmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSBcIi4vYXV0aFwiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi9wcmlzbWFcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpIHtcclxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbigpO1xyXG4gIGlmICghc2Vzc2lvbj8udXNlcklkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgd2hlcmU6IHsgaWQ6IHNlc3Npb24udXNlcklkIH0sXHJcbiAgICBpbmNsdWRlOiB7XHJcbiAgICAgIHByb2ZpbGU6IHRydWUsXHJcbiAgICAgIHN1YnNjcmlwdGlvbjogdHJ1ZSxcclxuICAgICAgc3RyZWFrOiB0cnVlLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcklkKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XHJcbiAgcmV0dXJuIHNlc3Npb24/LnVzZXJJZCA/PyBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZUF1dGgoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCB1c2VySWQgPSBhd2FpdCBnZXRDdXJyZW50VXNlcklkKCk7XHJcbiAgaWYgKCF1c2VySWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcclxuICB9XHJcbiAgcmV0dXJuIHVzZXJJZDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc0NvbXBsZXRlZE9uYm9hcmRpbmcoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcclxuICByZXR1cm4gc2Vzc2lvbj8ub25ib2FyZGluZ0RvbmUgPz8gZmFsc2U7XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldFNlc3Npb24iLCJwcmlzbWEiLCJnZXRDdXJyZW50VXNlciIsInNlc3Npb24iLCJ1c2VySWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwicHJvZmlsZSIsInN1YnNjcmlwdGlvbiIsInN0cmVhayIsImdldEN1cnJlbnRVc2VySWQiLCJyZXF1aXJlQXV0aCIsIkVycm9yIiwiaGFzQ29tcGxldGVkT25ib2FyZGluZyIsIm9uYm9hcmRpbmdEb25lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/session.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/subscription.ts":
/*!*********************************!*\
  !*** ./src/lib/subscription.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LIMITS: () => (/* binding */ LIMITS),\n/* harmony export */   canUseFeature: () => (/* binding */ canUseFeature),\n/* harmony export */   getRemainingMessages: () => (/* binding */ getRemainingMessages),\n/* harmony export */   toSimpleTier: () => (/* binding */ toSimpleTier)\n/* harmony export */ });\n// ─── Subscription Feature Gating ──────────────────────────────────────────────\n// Wraps existing tier system with hybrid-athlete feature checks\n// Map existing tiers (free/pro/elite) to simple free/premium\nfunction toSimpleTier(tier) {\n    return tier === \"free\" ? \"free\" : \"premium\";\n}\nconst LIMITS = {\n    free: {\n        aiMessagesPerDay: 1,\n        canCustomizeWorkouts: false,\n        canAccessRaceProgramming: false,\n        canAccessNutritionAI: false,\n        canAccessRecoveryScore: false,\n        canAccessUnlimitedChat: false,\n        canSwapExercises: false\n    },\n    premium: {\n        aiMessagesPerDay: 999,\n        canCustomizeWorkouts: true,\n        canAccessRaceProgramming: true,\n        canAccessNutritionAI: true,\n        canAccessRecoveryScore: true,\n        canAccessUnlimitedChat: true,\n        canSwapExercises: true\n    }\n};\nfunction canUseFeature(tier, feature) {\n    return LIMITS[tier][feature];\n}\nfunction getRemainingMessages(tier, usedToday) {\n    return Math.max(0, LIMITS[tier].aiMessagesPerDay - usedToday);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1YnNjcmlwdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsaUZBQWlGO0FBQ2pGLGdFQUFnRTtBQUloRSw2REFBNkQ7QUFDdEQsU0FBU0EsYUFBYUMsSUFBWTtJQUN2QyxPQUFPQSxTQUFTLFNBQVMsU0FBUztBQUNwQztBQUVPLE1BQU1DLFNBQVM7SUFDcEJDLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxzQkFBc0I7UUFDdEJDLDBCQUEwQjtRQUMxQkMsc0JBQXNCO1FBQ3RCQyx3QkFBd0I7UUFDeEJDLHdCQUF3QjtRQUN4QkMsa0JBQWtCO0lBQ3BCO0lBQ0FDLFNBQVM7UUFDUFAsa0JBQWtCO1FBQ2xCQyxzQkFBc0I7UUFDdEJDLDBCQUEwQjtRQUMxQkMsc0JBQXNCO1FBQ3RCQyx3QkFBd0I7UUFDeEJDLHdCQUF3QjtRQUN4QkMsa0JBQWtCO0lBQ3BCO0FBQ0YsRUFBVTtBQUVILFNBQVNFLGNBQ2RYLElBQXNCLEVBQ3RCWSxPQUFpQztJQUVqQyxPQUFPWCxNQUFNLENBQUNELEtBQUssQ0FBQ1ksUUFBUTtBQUM5QjtBQUVPLFNBQVNDLHFCQUNkYixJQUFzQixFQUN0QmMsU0FBaUI7SUFFakIsT0FBT0MsS0FBS0MsR0FBRyxDQUFDLEdBQUdmLE1BQU0sQ0FBQ0QsS0FBSyxDQUFDRyxnQkFBZ0IsR0FBR1c7QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb3JjMy8uL3NyYy9saWIvc3Vic2NyaXB0aW9uLnRzP2M2NjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g4pSA4pSA4pSAIFN1YnNjcmlwdGlvbiBGZWF0dXJlIEdhdGluZyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuLy8gV3JhcHMgZXhpc3RpbmcgdGllciBzeXN0ZW0gd2l0aCBoeWJyaWQtYXRobGV0ZSBmZWF0dXJlIGNoZWNrc1xyXG5cclxuZXhwb3J0IHR5cGUgU3Vic2NyaXB0aW9uVGllciA9ICdmcmVlJyB8ICdwcmVtaXVtJ1xyXG5cclxuLy8gTWFwIGV4aXN0aW5nIHRpZXJzIChmcmVlL3Byby9lbGl0ZSkgdG8gc2ltcGxlIGZyZWUvcHJlbWl1bVxyXG5leHBvcnQgZnVuY3Rpb24gdG9TaW1wbGVUaWVyKHRpZXI6IHN0cmluZyk6IFN1YnNjcmlwdGlvblRpZXIge1xyXG4gIHJldHVybiB0aWVyID09PSAnZnJlZScgPyAnZnJlZScgOiAncHJlbWl1bSdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExJTUlUUyA9IHtcclxuICBmcmVlOiB7XHJcbiAgICBhaU1lc3NhZ2VzUGVyRGF5OiAxLFxyXG4gICAgY2FuQ3VzdG9taXplV29ya291dHM6IGZhbHNlLFxyXG4gICAgY2FuQWNjZXNzUmFjZVByb2dyYW1taW5nOiBmYWxzZSxcclxuICAgIGNhbkFjY2Vzc051dHJpdGlvbkFJOiBmYWxzZSxcclxuICAgIGNhbkFjY2Vzc1JlY292ZXJ5U2NvcmU6IGZhbHNlLFxyXG4gICAgY2FuQWNjZXNzVW5saW1pdGVkQ2hhdDogZmFsc2UsXHJcbiAgICBjYW5Td2FwRXhlcmNpc2VzOiBmYWxzZSxcclxuICB9LFxyXG4gIHByZW1pdW06IHtcclxuICAgIGFpTWVzc2FnZXNQZXJEYXk6IDk5OSxcclxuICAgIGNhbkN1c3RvbWl6ZVdvcmtvdXRzOiB0cnVlLFxyXG4gICAgY2FuQWNjZXNzUmFjZVByb2dyYW1taW5nOiB0cnVlLFxyXG4gICAgY2FuQWNjZXNzTnV0cml0aW9uQUk6IHRydWUsXHJcbiAgICBjYW5BY2Nlc3NSZWNvdmVyeVNjb3JlOiB0cnVlLFxyXG4gICAgY2FuQWNjZXNzVW5saW1pdGVkQ2hhdDogdHJ1ZSxcclxuICAgIGNhblN3YXBFeGVyY2lzZXM6IHRydWUsXHJcbiAgfSxcclxufSBhcyBjb25zdFxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhblVzZUZlYXR1cmUoXHJcbiAgdGllcjogU3Vic2NyaXB0aW9uVGllcixcclxuICBmZWF0dXJlOiBrZXlvZiB0eXBlb2YgTElNSVRTLmZyZWVcclxuKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIExJTUlUU1t0aWVyXVtmZWF0dXJlXSBhcyBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZW1haW5pbmdNZXNzYWdlcyhcclxuICB0aWVyOiBTdWJzY3JpcHRpb25UaWVyLFxyXG4gIHVzZWRUb2RheTogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KDAsIExJTUlUU1t0aWVyXS5haU1lc3NhZ2VzUGVyRGF5IC0gdXNlZFRvZGF5KVxyXG59XHJcbiJdLCJuYW1lcyI6WyJ0b1NpbXBsZVRpZXIiLCJ0aWVyIiwiTElNSVRTIiwiZnJlZSIsImFpTWVzc2FnZXNQZXJEYXkiLCJjYW5DdXN0b21pemVXb3Jrb3V0cyIsImNhbkFjY2Vzc1JhY2VQcm9ncmFtbWluZyIsImNhbkFjY2Vzc051dHJpdGlvbkFJIiwiY2FuQWNjZXNzUmVjb3ZlcnlTY29yZSIsImNhbkFjY2Vzc1VubGltaXRlZENoYXQiLCJjYW5Td2FwRXhlcmNpc2VzIiwicHJlbWl1bSIsImNhblVzZUZlYXR1cmUiLCJmZWF0dXJlIiwiZ2V0UmVtYWluaW5nTWVzc2FnZXMiLCJ1c2VkVG9kYXkiLCJNYXRoIiwibWF4Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/subscription.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/@anthropic-ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoach%2Fchat%2Froute&page=%2Fapi%2Fcoach%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoach%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CGeric%5CDesktop%5Cforc3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();