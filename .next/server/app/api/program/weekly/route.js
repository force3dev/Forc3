"use strict";(()=>{var e={};e.id=344,e.ids=[344],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62597:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>y,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};t.r(n),t.d(n,{GET:()=>p,dynamic:()=>c});var i=t(49303),a=t(88716),o=t(60670),s=t(87070),l=t(61165),u=t(13538),d=t(77265);let c="force-dynamic";async function p(){let e=await (0,l.getCurrentUserId)();if(!e)return s.NextResponse.json({error:"Unauthorized"},{status:401});let r=await u.prisma.profile.findUnique({where:{userId:e}});if(!r)return s.NextResponse.json({error:"No profile"},{status:404});let t=Array.isArray(r.raceGoals)?r.raceGoals:[],n=(0,d.dd)({goal:r.goal||"general",experienceLevel:r.experienceLevel||"intermediate",trainingDays:r.trainingDays||4,sport:r.sport||void 0,raceGoals:t,trainingVolume:r.trainingVolume||"intermediate"});return s.NextResponse.json(n)}let y=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/program/weekly/route",pathname:"/api/program/weekly",filename:"route",bundlePath:"app/api/program/weekly/route"},resolvedPagePath:"C:\\Users\\Geric\\Desktop\\forc3\\src\\app\\api\\program\\weekly\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:g}=y,f="/api/program/weekly/route";function w(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},77265:(e,r,t)=>{t.d(r,{$I:()=>d,dd:()=>u,ps:()=>c});var n=t(62643);function i(e){let r=n.zr.find(r=>r.id===e);if(!r)throw Error(`Cardio template not found: ${e}`);return r}function a(e){return{templateId:e.id,title:e.title,type:e.type,duration:e.duration,intensity:e.intensity}}function o(e,r){if(0===r)return!1;let t=e[r-1];return t.hasStrength&&!!t.strengthLabel&&/legs|lower|full/i.test(t.strengthLabel)}function s(e,r,t){let n=Array(7).fill(null);if(r>=6){let e=["Push A","Pull A","Legs A","Push B","Pull B","Legs B"];for(let r=0;r<6;r++)n[r]=e[r]}else if(5===r)n[0]="Push",n[1]="Pull",n[2]="Legs",n[3]="Upper",n[4]="Full Body";else if(4===r){n[0]="Upper A",n[2]="Lower A",n[3]="Upper B",n[5]="Lower B";let e=["Upper A","Lower A","Upper B","Lower B"];n.fill(null),[0,1,3,4].forEach((r,t)=>{n[r]=e[t]})}else 3===r?(n[0]="Full Body A",n[2]="Full Body B",n[4]="Full Body C"):2===r&&(n[0]="Upper",n[3]="Lower");return t.isPowerlifter&&n[5],n}let l=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function u(e){let r,t,u;let d=function(e){let{sport:r,raceGoals:t}=e,n=t||[],i="triathlon"===r||n.some(e=>["sprint_tri","olympic_tri","half_ironman","full_ironman"].includes(e.type)),a="running"===r||n.some(e=>["5k_10k","half_marathon","full_marathon"].includes(e.type)),o="swimming"===r||n.some(e=>"swim_race"===e.type),s="cycling"===r||n.some(e=>"cycling_race"===e.type),l=n.some(e=>"ocr"===e.type),u=n.some(e=>"powerlifting"===e.type),d=Date.now(),c=n.filter(e=>e.date).map(e=>Math.max(0,Math.round((new Date(e.date).getTime()-d)/6048e5))),p=c.length>0?Math.min(...c):null,y="general";return i?y="triathlete":a?y="runner":o?y="swimmer":s?y="cyclist":l?y="ocr":r&&(y=r),{isTriathlete:i,isRunner:a,isSwimmer:o,isCyclist:s,isOCR:l,isPowerlifter:u,primarySport:y,weeksToRace:p,inTaper:null!==p&&p<=3,raceApproaching:null!==p&&p<=6}}(e),c=Math.min(e.trainingDays,5),p=function(e,r){let t=e.trainingVolume||"intermediate";return r.isTriathlete||r.isRunner?"advanced"===t?5:"intermediate"===t?4:3:r.isSwimmer||r.isCyclist?"advanced"===t?4:3:"endurance"===e.goal?4:"fat_loss"===e.goal?3:2}(e,d);d.isTriathlete?(r=function(e,r,t,n){let o=s(7,t,r),u=r.inTaper,d={0:a(i("run-easy")),1:a(i("swim-drills")),2:a(u?i("run-easy"):i("run-tempo")),3:a(u?i("bike-recovery"):i("bike-endurance")),4:a(i("swim-pull")),5:a(u?i("run-easy"):i("run-long")),6:null};return l.map((e,r)=>({day:e,dayIndex:r,hasStrength:!!o[r],strengthLabel:o[r]||void 0,cardio:d[r]||void 0,isRest:6===r,note:6===r?"Rest & recovery":u&&[3,5].includes(r)?"Taper week — keep intensity low":void 0}))}(0,d,c,0),t="triathlete",u=d.inTaper?"Taper week — reducing volume ahead of race":"Triathlon hybrid: swim, bike, run + strength"):d.isRunner?(r=function(e,r,t,n){let o=s(7,t,r),u=r.inTaper,d={0:a(i("run-easy")),1:a(u?i("run-easy"):i("run-400-intervals")),2:a(i("run-easy")),3:a(u?i("run-easy"):i("run-tempo")),4:a(i("run-easy")),5:a(u?i("run-easy"):i("run-long")),6:null};return n<5&&delete d[4],n<4&&delete d[2],l.map((e,t)=>({day:e,dayIndex:t,hasStrength:!!o[t],strengthLabel:o[t]||void 0,cardio:d[t]||void 0,isRest:6===t&&!d[6],note:r.raceApproaching&&5===t?"Key long run — race simulation pace":void 0}))}(0,d,c,p),t="runner",u=d.raceApproaching?"Race-specific run build + strength support":"Running hybrid: aerobic base + speed work + strength"):d.isSwimmer?(r=function(e,r,t,n){let o=s(7,t,r),u=r.inTaper,d={0:a(i("swim-drills")),1:null,2:a(u?i("swim-endurance"):i("swim-pull")),3:a(u?i("swim-drills"):i("swim-sprints")),4:a(i("swim-kick")),5:a(i("swim-endurance")),6:null};return n<4&&delete d[4],l.map((e,r)=>({day:e,dayIndex:r,hasStrength:!!o[r],strengthLabel:o[r]||void 0,cardio:d[r]||void 0,isRest:!d[r]&&!o[r]}))}(0,d,c,p),t="swimmer",u="Swimming hybrid: technique + strength + endurance"):d.isCyclist?(r=function(e,r,t,n){let o=s(7,t,r),u=r.inTaper,d={0:a(i("bike-recovery")),1:null,2:a(u?i("bike-recovery"):i("bike-threshold")),3:a(i("bike-endurance")),4:null,5:a(i("bike-endurance")),6:null};return l.map((e,r)=>({day:e,dayIndex:r,hasStrength:!!o[r],strengthLabel:o[r]||void 0,cardio:d[r]||void 0,isRest:!d[r]&&!o[r],note:5===r?"Long ride — aim for 60–90 min":void 0}))}(0,d,c,0),t="cyclist",u="Cycling hybrid: threshold + endurance + strength"):"endurance"===e.goal?(r=function(e,r){let t=s(7,r,{isTriathlete:!1}),n={0:a(i("run-easy")),1:null,2:a(i("run-800-repeats")),3:a(i("bike-endurance")),4:null,5:a(i("run-long")),6:a(i("bike-recovery"))};return l.map((e,r)=>({day:e,dayIndex:r,hasStrength:!!t[r],strengthLabel:t[r]||void 0,cardio:n[r]||void 0,isRest:!n[r]&&!t[r]}))}(0,c),t="endurance",u="Endurance-focused hybrid: aerobic volume + strength maintenance"):(r=function(e,r,t){let n=s(7,r,{}),u=[a(i("run-fartlek")),a(i("hiit-jump-rope-tabata")),a(i("row-steady-state")),a(i("bike-recovery")),a(i("run-easy"))],d=l.map((e,r)=>({day:e,dayIndex:r,hasStrength:!!n[r],strengthLabel:n[r]||void 0,cardio:void 0,isRest:!1})),c=0,p=[...u];for(let e=0;e<7&&c<t;e++)!d[e].hasStrength&&6!==e&&(o(d,e)?d[e].cardio=a(i("bike-recovery")):d[e].cardio=p[c%p.length],c++);return d.forEach(e=>{e.isRest=!e.hasStrength&&!e.cardio}),d}(0,c,p),t="general",u="General hybrid: strength-primary with cardio for conditioning");let y=(r=function(e){for(let r=0;r<e.length;r++){let t=e[r].cardio;if(t){if(function(e,r){let t=0;for(let n=r-1;n>=0;n--){let r=e[n].cardio;if(r&&("hard"===r.intensity||"max"===r.intensity))t++;else break}return t}(e,r)>=2&&("hard"===t.intensity||"max"===t.intensity)){let i=n.zr.find(e=>e.type===t.type&&"easy"===e.intensity)||n.zr.find(e=>"easy"===e.intensity);i&&(e[r].cardio=a(i),e[r].note=(e[r].note?e[r].note+" \xb7 ":"")+"Intensity reduced — recovery day")}if(o(e,r)&&"hard"===t.intensity){let o=n.zr.find(e=>e.type===t.type&&"easy"===e.intensity)||i("bike-recovery");e[r].cardio=a(o),e[r].note=(e[r].note?e[r].note+" \xb7 ":"")+"Easy cardio — recovery after heavy lift"}}}return e}(r)).reduce((e,r)=>e+(r.cardio?.duration||0),0),h=r.filter(e=>e.hasStrength).length;return{days:r,weeklyCardioMinutes:y,weeklyLiftDays:h,programType:t,description:u}}function d(e){let r=new Date().getDay(),t=0===r?6:r-1,n=e.days.find(e=>e.dayIndex===t);return n?.cardio||null}function c(e){let r=e.days.map(e=>{let r=[];return e.hasStrength&&r.push(`Lift (${e.strengthLabel})`),e.cardio&&r.push(`${e.cardio.title} [${e.cardio.intensity}]`),e.isRest&&0===r.length&&r.push("Rest"),`${e.day}: ${r.join(" + ")}`});return[`Program: ${e.description}`,`Weekly cardio: ${e.weeklyCardioMinutes} min | Lift days: ${e.weeklyLiftDays}`,"",...r].join("\n")}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972,3112,1679],()=>t(62597));module.exports=n})();