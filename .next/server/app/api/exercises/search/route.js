"use strict";(()=>{var e={};e.id=3910,e.ids=[3910,3538],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45924:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var t={};s.r(t),s.d(t,{GET:()=>l,dynamic:()=>u});var a=s(49303),i=s(88716),n=s(60670),o=s(87070),c=s(79175);let u="force-dynamic";async function l(e){let{searchParams:r}=new URL(e.url),s=r.get("q")||"",t=r.get("muscle")||void 0,a=r.get("equipment")||void 0,i=r.get("category")||void 0;try{let e=await (0,c.Gv)(s,{muscleGroup:t,equipment:a,category:i});return o.NextResponse.json({results:e})}catch(e){return console.error("Exercise search error:",e),o.NextResponse.json({error:"Search failed"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/exercises/search/route",pathname:"/api/exercises/search",filename:"route",bundlePath:"app/api/exercises/search/route"},resolvedPagePath:"C:\\Users\\Geric\\Desktop\\forc3\\src\\app\\api\\exercises\\search\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:f}=p,g="/api/exercises/search/route";function h(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},79175:(e,r,s)=>{s.d(r,{Gv:()=>c,mi:()=>o});var t=s(13538);async function a(e){let r=process.env.EXERCISEDB_API_KEY;if(!r)return[];try{let s=`https://exercisedb.p.rapidapi.com/exercises/name/${encodeURIComponent(e)}?limit=10`,t=await fetch(s,{headers:{"X-RapidAPI-Key":r,"X-RapidAPI-Host":"exercisedb.p.rapidapi.com"},next:{revalidate:86400}});if(!t.ok)return[];return(await t.json()).map(e=>({name:e.name,category:function(e,r){let s=e?.toLowerCase()||"";return s.includes("chest")||s.includes("back")||s.includes("shoulder")?"compound":s.includes("upper arm")||s.includes("bicep")||s.includes("tricep")?"isolation":s.includes("upper leg")||s.includes("lower leg")?"compound":s.includes("waist")||s.includes("core")?"core":s.includes("cardio")?"cardio":"compound"}(e.bodyPart,e.target),muscleGroups:[e.target].filter(Boolean),secondaryMuscles:e.secondaryMuscles||[],equipment:e.equipment?[e.equipment]:[],gifUrl:e.gifUrl,source:"exercisedb"}))}catch{return[]}}async function i(e){try{let r=`https://wger.de/api/v2/exercise/search/?term=${encodeURIComponent(e)}&language=english&format=json`,s=await fetch(r,{next:{revalidate:86400}});if(!s.ok)return[];return((await s.json()).suggestions||[]).slice(0,10).map(e=>({name:e.value,category:"compound",muscleGroups:[],secondaryMuscles:[],equipment:[],source:"wger"}))}catch{return[]}}async function n(e,r){let s=r?.limit||20;return(await t.prisma.exercise.findMany({where:{AND:[e?{OR:[{name:{contains:e,mode:"insensitive"}},{muscleGroups:{contains:e,mode:"insensitive"}}]}:{},r?.muscleGroup?{muscleGroups:{contains:r.muscleGroup,mode:"insensitive"}}:{},r?.equipment?{equipment:{contains:r.equipment,mode:"insensitive"}}:{},r?.category?{category:{equals:r.category}}:{}]},take:s,orderBy:{name:"asc"}})).map(e=>({...e,muscleGroupsParsed:u(e.muscleGroups,[]),secondaryMusclesParsed:u(e.secondaryMuscles,[]),equipmentParsed:u(e.equipment,[]),formTipsParsed:u(e.formTips,[]),coachingCuesParsed:u(e.coachingCues,[]),alternativesParsed:u(e.alternatives,[])}))}async function o(e){let r=await t.prisma.exercise.findFirst({where:{OR:[{slug:e},{name:e.replace(/-/g," ")}]}});return r?{...r,muscleGroupsParsed:u(r.muscleGroups,[]),secondaryMusclesParsed:u(r.secondaryMuscles,[]),equipmentParsed:u(r.equipment,[]),formTipsParsed:u(r.formTips,[]),coachingCuesParsed:u(r.coachingCues,[]),alternativesParsed:u(r.alternatives,[]),avoidIfInjuryParsed:u(r.avoidIfInjury,[])}:null}async function c(e,r){let s=await n(e,{...r,limit:20});if(s.length>=10||!e)return s;let[t,o]=await Promise.allSettled([a(e),i(e)]),c=[..."fulfilled"===t.status?t.value:[],..."fulfilled"===o.status?o.value:[]],u=new Set(s.map(e=>e.name.toLowerCase()));return{local:s,external:c.filter(e=>!u.has(e.name.toLowerCase()))}}function u(e,r){if(!e)return r;try{return JSON.parse(e)}catch{return r}}},13538:(e,r,s)=>{s.d(r,{prisma:()=>a});var t=s(53524);let a=globalThis.prisma||new t.PrismaClient({log:["warn","error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>s(45924));module.exports=t})();